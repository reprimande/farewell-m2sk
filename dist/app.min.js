!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){(function(){function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&iteratee(array[length],length,array)!==!1;);return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){var length=null==array?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){return predicate(value,key,collection)?(result=key,!1):void 0}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return null==object?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];(value===placeholder||value===PLACEHOLDER)&&(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function strictIndexOf(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}function strictLastIndexOf(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}function unicodeSize(string){for(var result=reUnicode.lastIndex=0;reUnicode.test(string);)++result;return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var undefined,VERSION="4.17.4",LARGE_ARRAY_SIZE=200,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",MAX_MEMOIZE_SIZE=500,PLACEHOLDER="__lodash_placeholder__",CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=800,HOT_SPAN=16,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=0/0,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]],argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos="['’]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",rsOrdUpper="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp(rsApos,"g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,asciiSize=baseProperty("length"),deburrLetter=basePropertyOf(deburredLetters),escapeHtmlChar=basePropertyOf(htmlEscapes),unescapeHtmlChar=basePropertyOf(htmlUnescapes),runInContext=function runInContext(context){function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1,result.__filtered__=!0}else result=this.clone(),result.__dir__*=-1;return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=0>dir,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&takeCount>resIndex;){index+=dir;for(var iterIndex=-1,value=array[index];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;break outer}}result[resIndex++]=value}return result}function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(0>index)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),--this.size,!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return 0>index?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return 0>index?(++this.size,data.push([key,value])):data[index][1]=value,this}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);return this.size-=result?1:0,result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}function setCacheHas(value){return this.__data__.has(value)}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);return this.size=data.size,result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object))&&baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number===number&&(upper!==undefined&&(number=upper>=number?number:upper),lower!==undefined&&(number=number>=lower?number:lower)),number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?undefined:keysFunc(value);return arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value);if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee(value);if(null!=current&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value}return result}function baseFill(array,value,start,end){var length=array.length;for(start=toInteger(start),0>start&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:toInteger(end),0>end&&(end+=length),end=start>end?0:toLength(end);end>start;)array[start++]=value;return array}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);for(var index=0,length=path.length;null!=object&&length>index;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?value===undefined?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}function baseInvoke(object,path,args){path=castPath(path,object),object=parent(object,path);var func=null==object?object:object[toKey(last(path))];return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag;

}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other?!0:null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return isSameTag?(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack)):!1}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result))return!1}}return!0}function baseIsNative(value){if(!isObject(value)||isMasked(value))return!1;var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return other>value}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(isObject(srcValue))stack||(stack=new Stack),baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;newValue===undefined&&(newValue=srcValue),assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):(!isObject(objValue)||srcIndex&&isFunction(objValue))&&(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack["delete"](srcValue)),assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(length)return n+=0>n?length:0,isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));var result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;(fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;isIndex(index)?splice.call(array,index,1):baseUnset(array,index)}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}function baseRepeat(string,n){var result="";if(!string||1>n||n>MAX_SAFE_INTEGER)return result;do n%2&&(result+=string),n=nativeFloor(n/2),n&&(string+=string);while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object))return object;path=castPath(path,object);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined,newValue===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;0>start&&(start=-start>length?0:length+start),end=end>length?length:end,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),!result}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=null==array?low:array.length;if("number"==typeof value&&value===value&&HALF_MAX_ARRAY_LENGTH>=high){for(;high>low;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?value>=computed:value>computed)?low=mid+1:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=null==array?0:array.length,valIsNaN=value!==value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;high>low;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=null===computed,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN)var setLow=retHighest||othIsReflexive;else setLow=valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):othIsNull||othIsSymbol?!1:retHighest?value>=computed:value>computed;setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=0===value?0:value}}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value}function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){return path=castPath(path,object),object=parent(object,path),null==object||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(2>length)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=valsLength>index?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&end>=length?array:baseSlice(array,start,end)}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value===value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&other>value||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength)return result;var order=orders[index];return result*("desc"==order?-1:1)}}return object.index-other.index}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsLength>argsIndex)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsLength>argsIndex)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;newValue===undefined&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):undefined,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createBind(func,bitmask,thisArg){function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=3>length&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);if(length-=holders.length,arity>length)return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length);var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}var Ctor=createCtor(func);return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(prereq&&!wrapper&&"wrapper"==getFuncName(func))var wrapper=new LodashWrapper([],!0)}for(index=wrapper?index:length;++index<length;){func=funcs[index];var funcName=getFuncName(func),data="wrapper"==funcName?getData(func):undefined;wrapper=data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&arity>length){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&length>ary&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;"string"==typeof value||"string"==typeof other?(value=baseToString(value),other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;if(2>charsLength)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return wrapper}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),step=step===undefined?end>start?1:-1:toFinite(step),baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){return("string"!=typeof value||"string"!=typeof other)&&(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG),bitmask&WRAP_CURRY_BOUND_FLAG||(bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity],result=wrapFunc.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),precision=null==precision?0:nativeMin(toInteger(precision),292)){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));return pair=(toString(value)+"e").split("e"),+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG),partials=holders=undefined),ary=ary===undefined?ary:nativeMax(toInteger(ary),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0),!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)&&(bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)),bitmask&&bitmask!=WRAP_BIND_FLAG)result=bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG?createCurry(func,bitmask,arity):bitmask!=WRAP_PARTIAL_FLAG&&bitmask!=(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG)||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,thisArg,partials);else var result=createBind(func,bitmask,thisArg);var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack["delete"](srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){return cacheHas(seen,othIndex)||arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)?void 0:seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack["delete"](array),stack["delete"](other),result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack["delete"](object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1;

}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack["delete"](object),stack["delete"](other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;return result=result===iteratee?baseIteratee:result,arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}function getView(start,end,transforms){for(var index=-1,length=transforms.length;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=castPath(path,object);for(var index=-1,length=path.length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:(length=null==object?0:object.length,!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object)))}function initCloneArray(array){var length=array.length,result=array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&length>value}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)?eq(object[index],value):!1}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return"number"==type||"symbol"==type||"boolean"==type||null==value||isSymbol(value)?!0:reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object)}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null==object?!1:object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function memoizeCapped(func){var result=memoize(func,function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key}),cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG)>newBitmask,isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&WRAP_BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),value=source[7],value&&(data[7]=value),srcBitmask&WRAP_ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;for(size=size===undefined?length:size;++index<size;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size,array}function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}function chunk(array,size,guard){size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);var length=null==array?0:array.length;if(!length||1>size)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));length>index;)result[resIndex++]=baseSlice(array,index,index+=size);return result}function compact(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result}function concat(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}function drop(array,n,guard){var length=null==array?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,0>n?0:n,length)):[]}function dropRight(array,n,guard){var length=null==array?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,0,0>n?0:n)):[]}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]}function fill(array,value,start,end){var length=null==array?0:array.length;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),baseFill(array,value,start,end)):[]}function findIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return 0>index&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=0>fromIndex?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){var length=null==array?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=null==array?0:array.length;return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=null==array?0:array.length;return length?(depth=depth===undefined?1:toInteger(depth),baseFlatten(array,depth)):[]}function fromPairs(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return 0>index&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)}function initial(array){var length=null==array?0:array.length;return length?baseSlice(array,0,-1):[]}function join(array,separator){return null==array?"":nativeJoin.call(array,separator)}function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=0>index?nativeMax(length+index,0):nativeMin(index,length-1)),value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array}function remove(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result}function reverse(array){return null==array?array:nativeReverse.call(array)}function slice(array,start,end){var length=null==array?0:array.length;return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,end=length):(start=null==start?0:toInteger(start),end=end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]}function sortedIndex(array,value){return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value);if(length>index&&eq(array[index],value))return index}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,!0)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)}function sortedLastIndexOf(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){return array&&array.length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,0,0>n?0:n)):[]}function takeRight(array,n,guard){var length=null==array?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,0>n?0:n,length)):[]}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){return isArrayLikeObject(group)?(length=nativeMax(group.length,length),!0):void 0}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!array||!array.length)return[];var result=unzip(array);return null==iteratee?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}function chain(value){var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor){return interceptor(value),value}function thru(value,interceptor){return interceptor(value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{done:done,value:value}}function wrapperToIterator(){return this}function wrapperPlant(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone;parent=parent.__wrapped__}return previous.__wrapped__=value,result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),wrapped=wrapped.reverse(),wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return 0>fromIndex&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?length>=fromIndex&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){return null==collection?[]:(isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),orders=guard?undefined:orders,isArray(orders)||(orders=null==orders?[]:[orders]),baseOrderBy(collection,iteratees,orders))}function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection)}function sampleSize(collection,n,guard){n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n);var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n)}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection)}function size(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}function after(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n<1?func.apply(this,arguments):void 0}}function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),1>=n&&(func=undefined),result}}function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curry.placeholder,result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curryRight.placeholder,result}function debounce(func,wait,options){function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||0>timeSinceLastCall||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();return shouldInvoke(time)?trailingEdge(time):void(timerId=setTimeout(timerExpired,remainingWait(time)))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function cancel(){timerId!==undefined&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=cancel,debounced.flush=flush,debounced}function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}function rest(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=start===undefined?start:toInteger(start),baseRest(func,start)}function spread(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=null==start?0:nativeMax(toInteger(start),0),baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return null==source||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===!0||value===!1||isObjectLike(value)&&baseGetTag(value)==boolTag}function isElement(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value)}function isEmpty(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer="function"==typeof customizer?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result}function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}function isFinite(value){return"number"==typeof value&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value))throw new Error(CORE_ERROR_TEXT);return baseIsNative(value)}function isNull(value){return null===value}function isNil(value){return null==value}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&MAX_SAFE_INTEGER>=value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}function toArray(value){if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return iteratorToArray(value[symIterator]());var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value)}function toFinite(value){if(!value)return 0===value?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=0>value?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):0===value?value:0}function toString(value){return null==value?"":baseToString(value);

}function create(prototype,properties){var result=baseCreate(prototype);return null==properties?result:baseAssign(result,properties)}function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return null==object?[]:baseFunctions(object,keys(object))}function functionsIn(object){return null==object?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return null!=object&&hasPath(object,path,baseHas)}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result}function mapValues(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result}function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;for(length||(length=1,object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object}function set(object,path,value){return null==object?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)}function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);if(iteratee=getIteratee(iteratee,4),null==accumulator){var Ctor=object&&object.constructor;accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{}}return(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator}function unset(object,path){return null==object?!0:baseUnset(object,path)}function update(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return null==object?[]:baseValues(object,keys(object))}function valuesIn(object){return null==object?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=toNumber(upper),upper=upper===upper?upper:0),lower!==undefined&&(lower=toNumber(lower),lower=lower===lower?lower:0),baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),number=toNumber(number),baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&"boolean"!=typeof floating&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),floating===undefined&&("boolean"==typeof upper?(floating=upper,upper=undefined):"boolean"==typeof lower&&(floating=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),lower>upper){var temp=lower;lower=upper,upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return string=toString(string),string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string),target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;return position-=target.length,position>=0&&string.slice(position,end)==target}function escape(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){return string=toString(string),string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}function pad(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&length>strLength?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&length>strLength?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){return guard||null==radix?radix=0:radix&&(radix=+radix),nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}function repeat(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}function split(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0)?(string=toString(string),string&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&(separator=baseToString(separator),!separator&&hasUnicode(string))?castSlice(stringToArray(string),0,limit):string.split(separator,limit)):[]}function startsWith(string,target,position){return string=toString(string),position=null==position?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=undefined),string=toString(string),options=assignInWith({},options,settings,customDefaultsAssignIn);var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});if(result.source=source,isError(result))throw result;return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrim,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength)return string;var end=length-stringSize(omission);if(1>end)return omission;var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined)return result+omission;if(strSymbols&&(end+=result.length-end),isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;for(separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index))}return result+omission}function unescape(string){return string=toString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){return string=toString(string),pattern=guard?undefined:pattern,pattern===undefined?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}function cond(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return null==value||value!==value?defaultValue:value}function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);return actions.push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noConflict(){return root._===this&&(root._=oldDash),this}function noop(){}function nthArg(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return null==object?undefined:baseGet(object,path)}}function stubArray(){return[]}function stubFalse(){return!1}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return!0}function times(n,iteratee){if(n=toInteger(n),1>n||n>MAX_SAFE_INTEGER)return[];var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee),n-=MAX_ARRAY_LENGTH;for(var result=baseTimes(length,iteratee);++index<n;)iteratee(index);return result}function toPath(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}context=null==context?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=WeakMap&&new WeakMap,realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result}}();lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=hashClear,Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0),baseFor=createBaseFor(),baseForRight=createBaseFor(!0),baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity,castRest=baseRest,clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)},createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(values){return new Set(values)}:noop,getData=metaMap?function(func){return metaMap.get(func)}:noop,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isMaskable=coreJsData?isFunction:stubFalse,setData=shortOut(baseSetData),setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString),stringToPath=memoizeCapped(function(string){var result=[];return reLeadingDot.test(string)&&result.push(""),string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}),difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]}),intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return comparator="function"==typeof comparator?comparator:undefined,comparator&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]}),pull=baseRest(pullAll),pullAt=flatRest(function(array,indexes){var length=null==array?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result}),union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)}),without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip),zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;return iteratee="function"==typeof iteratee?(arrays.pop(),iteratee):undefined,unzipWith(arrays,iteratee)}),wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};return!(length>1||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?(value=value.slice(start,+start+(length?1:0)),value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor)}),countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)}),find=createFind(findIndex),findLast=createFind(findLastIndex),groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])}),invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result}),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)}),partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]}),sortBy=baseRest(function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=ctxNow||function(){return root.Date.now()},bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)}),defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});memoize.Cache=MapCache;var overArgs=castRest(function(func,transforms){transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)}),gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return value>=other}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer,isBuffer=nativeIsBuffer||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return other>=value}),assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))return void copyObject(source,keys(source),object);for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt),defaults=baseRest(function(args){return args.push(undefined,customDefaultsAssignIn),apply(assignInWith,undefined,args)}),defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)}),invert=createInverter(function(result,value,key){result[value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke),merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result}),pick=flatRest(function(object,paths){return null==object?{}:basePick(object,paths)}),toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn),camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)}),kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase"),snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()}),startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)}),upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase"),attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))}),object}),flow=createFlow(),flowRight=createFlow(!0),method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}}),over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome),range=createRange(),rangeRight=createRange(!0),add=createMathOperation(function(augend,addend){
return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor"),multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);return lodash.after=after,lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=castArray,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.concat=concat,lodash.cond=cond,lodash.conforms=conforms,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatMap=flatMap,lodash.flatMapDeep=flatMapDeep,lodash.flatMapDepth=flatMapDepth,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flattenDepth=flattenDepth,lodash.flip=flip,lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=fromPairs,lodash.functions=functions,lodash.functionsIn=functionsIn,lodash.groupBy=groupBy,lodash.initial=initial,lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=nthArg,lodash.omit=omit,lodash.omitBy=omitBy,lodash.once=once,lodash.orderBy=orderBy,lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=pullAllBy,lodash.pullAllWith=pullAllWith,lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.reverse=reverse,lodash.sampleSize=sampleSize,lodash.set=set,lodash.setWith=setWith,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,lodash.sortedUniq=sortedUniq,lodash.sortedUniqBy=sortedUniqBy,lodash.split=split,lodash.spread=spread,lodash.tail=tail,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=toPath,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.unary=unary,lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=uniq,lodash.uniqBy=uniqBy,lodash.uniqWith=uniqWith,lodash.unset=unset,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=update,lodash.updateWith=updateWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.without=without,lodash.words=words,lodash.wrap=wrap,lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=zipObject,lodash.zipObjectDeep=zipObjectDeep,lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=clamp,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.cloneDeepWith=cloneDeepWith,lodash.cloneWith=cloneWith,lodash.conformsTo=conformsTo,lodash.deburr=deburr,lodash.defaultTo=defaultTo,lodash.divide=divide,lodash.endsWith=endsWith,lodash.eq=eq,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=has,lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=isBoolean,lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isEqualWith=isEqualWith,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=isMatch,lodash.isMatchWith=isMatchWith,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNil=isNil,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=isSafeInteger,lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.isWeakMap=isWeakMap,lodash.isWeakSet=isWeakSet,lodash.join=join,lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=max,lodash.maxBy=maxBy,lodash.mean=mean,lodash.meanBy=meanBy,lodash.min=min,lodash.minBy=minBy,lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=stubObject,lodash.stubString=stubString,lodash.stubTrue=stubTrue,lodash.multiply=multiply,lodash.nth=nth,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.pad=pad,lodash.padEnd=padEnd,lodash.padStart=padStart,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.replace=replace,lodash.result=result,lodash.round=round,lodash.runInContext=runInContext,lodash.sample=sample,lodash.size=size,lodash.snakeCase=snakeCase,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedIndexBy=sortedIndexBy,lodash.sortedIndexOf=sortedIndexOf,lodash.sortedLastIndex=sortedLastIndex,lodash.sortedLastIndexBy=sortedLastIndexBy,lodash.sortedLastIndexOf=sortedLastIndexOf,lodash.startCase=startCase,lodash.startsWith=startsWith,lodash.subtract=subtract,lodash.sum=sum,lodash.sumBy=sumBy,lodash.template=template,lodash.times=times,lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=toLower,lodash.toNumber=toNumber,lodash.toSafeInteger=toSafeInteger,lodash.toString=toString,lodash.toUpper=toUpper,lodash.trim=trim,lodash.trimEnd=trimEnd,lodash.trimStart=trimStart,lodash.truncate=truncate,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source}(),{chain:!1}),lodash.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(start>0||0>end)?new LazyWrapper(result):(0>start?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined&&(end=toInteger(end),result=0>end?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value),interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)}return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"",names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}}),realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.at=wrapperAt,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.next=wrapperNext,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=wrapperToIterator),lodash},_=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeModule?((freeModule.exports=_)._=_,freeExports._=_):root._=_}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(require,module,exports){(function(global){!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.p5=f()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(){},{}],2:[function(_dereq_,module,exports){"use strict";exports.argument=function(predicate,message){if(!predicate)throw new Error(message)},exports.assert=exports.argument},{}],3:[function(_dereq_,module,exports){"use strict";function line(ctx,x1,y1,x2,y2){ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke()}exports.line=line},{}],4:[function(_dereq_,module,exports){"use strict";function DefaultEncoding(font){this.font=font}function CmapEncoding(cmap){this.cmap=cmap}function CffEncoding(encoding,charset){this.encoding=encoding,this.charset=charset}function GlyphNames(post){var i;switch(post.version){case 1:this.names=exports.standardNames.slice();break;case 2:for(this.names=new Array(post.numberOfGlyphs),i=0;i<post.numberOfGlyphs;i++)this.names[i]=post.glyphNameIndex[i]<exports.standardNames.length?exports.standardNames[post.glyphNameIndex[i]]:post.names[post.glyphNameIndex[i]-exports.standardNames.length];break;case 2.5:for(this.names=new Array(post.numberOfGlyphs),i=0;i<post.numberOfGlyphs;i++)this.names[i]=exports.standardNames[i+post.glyphNameIndex[i]];break;case 3:this.names=[]}}function addGlyphNames(font){for(var glyph,glyphIndexMap=font.tables.cmap.glyphIndexMap,charCodes=Object.keys(glyphIndexMap),i=0;i<charCodes.length;i+=1){var c=charCodes[i],glyphIndex=glyphIndexMap[c];glyph=font.glyphs.get(glyphIndex),glyph.addUnicode(parseInt(c))}for(i=0;i<font.glyphs.length;i+=1)glyph=font.glyphs.get(i),glyph.name=font.cffEncoding?font.cffEncoding.charset[i]:font.glyphNames.glyphIndexToName(i)}var cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];DefaultEncoding.prototype.charToGlyphIndex=function(c){var code=c.charCodeAt(0),glyphs=this.font.glyphs;if(!glyphs)return null;for(var i=0;i<glyphs.length;i+=1)for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)if(glyph.unicodes[j]===code)return i},CmapEncoding.prototype.charToGlyphIndex=function(c){return this.cmap.glyphIndexMap[c.charCodeAt(0)]||0},CffEncoding.prototype.charToGlyphIndex=function(s){var code=s.charCodeAt(0),charName=this.encoding[code];return this.charset.indexOf(charName)},GlyphNames.prototype.nameToGlyphIndex=function(name){return this.names.indexOf(name)},GlyphNames.prototype.glyphIndexToName=function(gid){return this.names[gid]},exports.cffStandardStrings=cffStandardStrings,exports.cffStandardEncoding=cffStandardEncoding,exports.cffExpertEncoding=cffExpertEncoding,exports.standardNames=standardNames,exports.DefaultEncoding=DefaultEncoding,exports.CmapEncoding=CmapEncoding,exports.CffEncoding=CffEncoding,exports.GlyphNames=GlyphNames,exports.addGlyphNames=addGlyphNames},{}],5:[function(_dereq_,module,exports){"use strict";function Font(options){options=options||{},this.familyName=options.familyName||" ",this.styleName=options.styleName||" ",this.designer=options.designer||" ",this.designerURL=options.designerURL||" ",this.manufacturer=options.manufacturer||" ",this.manufacturerURL=options.manufacturerURL||" ",this.license=options.license||" ",this.licenseURL=options.licenseURL||" ",this.version=options.version||"Version 0.1",this.description=options.description||" ",this.copyright=options.copyright||" ",this.trademark=options.trademark||" ",this.unitsPerEm=options.unitsPerEm||1e3,this.ascender=options.ascender,this.descender=options.descender,this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,options.glyphs||[]),this.encoding=new encoding.DefaultEncoding(this),this.tables={}}var path=_dereq_("./path"),sfnt=_dereq_("./tables/sfnt"),encoding=_dereq_("./encoding"),glyphset=_dereq_("./glyphset");Font.prototype.hasChar=function(c){return null!==this.encoding.charToGlyphIndex(c)},Font.prototype.charToGlyphIndex=function(s){return this.encoding.charToGlyphIndex(s)},Font.prototype.charToGlyph=function(c){var glyphIndex=this.charToGlyphIndex(c),glyph=this.glyphs.get(glyphIndex);return glyph||(glyph=this.glyphs.get(0)),glyph},Font.prototype.stringToGlyphs=function(s){for(var glyphs=[],i=0;i<s.length;i+=1){var c=s[i];glyphs.push(this.charToGlyph(c))}return glyphs},Font.prototype.nameToGlyphIndex=function(name){return this.glyphNames.nameToGlyphIndex(name)},Font.prototype.nameToGlyph=function(name){var glyphIndex=this.nametoGlyphIndex(name),glyph=this.glyphs.get(glyphIndex);return glyph||(glyph=this.glyphs.get(0)),glyph},Font.prototype.glyphIndexToName=function(gid){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(gid):""},Font.prototype.getKerningValue=function(leftGlyph,rightGlyph){leftGlyph=leftGlyph.index||leftGlyph,rightGlyph=rightGlyph.index||rightGlyph;var gposKerning=this.getGposKerningValue;return gposKerning?gposKerning(leftGlyph,rightGlyph):this.kerningPairs[leftGlyph+","+rightGlyph]||0},Font.prototype.forEachGlyph=function(text,x,y,fontSize,options,callback){if(this.supported){x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:72,options=options||{};for(var kerning=void 0===options.kerning?!0:options.kerning,fontScale=1/this.unitsPerEm*fontSize,glyphs=this.stringToGlyphs(text),i=0;i<glyphs.length;i+=1){var glyph=glyphs[i];if(callback(glyph,x,y,fontSize,options),glyph.advanceWidth&&(x+=glyph.advanceWidth*fontScale),kerning&&i<glyphs.length-1){var kerningValue=this.getKerningValue(glyph,glyphs[i+1]);x+=kerningValue*fontScale}}}},Font.prototype.getPath=function(text,x,y,fontSize,options){var fullPath=new path.Path;return this.forEachGlyph(text,x,y,fontSize,options,function(glyph,gX,gY,gFontSize){var glyphPath=glyph.getPath(gX,gY,gFontSize);fullPath.extend(glyphPath)}),fullPath},Font.prototype.draw=function(ctx,text,x,y,fontSize,options){this.getPath(text,x,y,fontSize,options).draw(ctx)},Font.prototype.drawPoints=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,function(glyph,gX,gY,gFontSize){glyph.drawPoints(ctx,gX,gY,gFontSize)})},Font.prototype.drawMetrics=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,function(glyph,gX,gY,gFontSize){glyph.drawMetrics(ctx,gX,gY,gFontSize)})},Font.prototype.validate=function(){function assert(predicate,message){predicate||warnings.push(message)}function assertStringAttribute(attrName){assert(_this[attrName]&&_this[attrName].trim().length>0,"No "+attrName+" specified.")}var warnings=[],_this=this;assertStringAttribute("familyName"),assertStringAttribute("weightName"),assertStringAttribute("manufacturer"),assertStringAttribute("copyright"),assertStringAttribute("version"),assert(this.unitsPerEm>0,"No unitsPerEm specified.")},Font.prototype.toTables=function(){return sfnt.fontToTable(this)},Font.prototype.toBuffer=function(){for(var sfntTable=this.toTables(),bytes=sfntTable.encode(),buffer=new ArrayBuffer(bytes.length),intArray=new Uint8Array(buffer),i=0;i<bytes.length;i++)intArray[i]=bytes[i];return buffer},Font.prototype.download=function(){var fileName=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",buffer=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,buffer.byteLength,function(fs){fs.root.getFile(fileName,{create:!0},function(fileEntry){fileEntry.createWriter(function(writer){var dataView=new DataView(buffer),blob=new Blob([dataView],{type:"font/opentype"});writer.write(blob),writer.addEventListener("writeend",function(){location.href=fileEntry.toURL();

},!1)})})},function(err){throw err})},exports.Font=Font},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":25}],6:[function(_dereq_,module,exports){"use strict";function getPathDefinition(glyph,path){var _path=path||{commands:[]};return{configurable:!0,get:function(){return"function"==typeof _path&&(_path=_path()),_path},set:function(p){_path=p}}}function Glyph(options){this.bindConstructorValues(options)}var check=_dereq_("./check"),draw=_dereq_("./draw"),path=_dereq_("./path");Glyph.prototype.bindConstructorValues=function(options){this.index=options.index||0,this.name=options.name||null,this.unicode=options.unicode||void 0,this.unicodes=options.unicodes||void 0!==options.unicode?[options.unicode]:[],options.xMin&&(this.xMin=options.xMin),options.yMin&&(this.yMin=options.yMin),options.xMax&&(this.xMax=options.xMax),options.yMax&&(this.yMax=options.yMax),options.advanceWidth&&(this.advanceWidth=options.advanceWidth),Object.defineProperty(this,"path",getPathDefinition(this,options.path))},Glyph.prototype.addUnicode=function(unicode){0===this.unicodes.length&&(this.unicode=unicode),this.unicodes.push(unicode)},Glyph.prototype.getPath=function(x,y,fontSize){x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:72;for(var scale=1/this.path.unitsPerEm*fontSize,p=new path.Path,commands=this.path.commands,i=0;i<commands.length;i+=1){var cmd=commands[i];"M"===cmd.type?p.moveTo(x+cmd.x*scale,y+-cmd.y*scale):"L"===cmd.type?p.lineTo(x+cmd.x*scale,y+-cmd.y*scale):"Q"===cmd.type?p.quadraticCurveTo(x+cmd.x1*scale,y+-cmd.y1*scale,x+cmd.x*scale,y+-cmd.y*scale):"C"===cmd.type?p.curveTo(x+cmd.x1*scale,y+-cmd.y1*scale,x+cmd.x2*scale,y+-cmd.y2*scale,x+cmd.x*scale,y+-cmd.y*scale):"Z"===cmd.type&&p.closePath()}return p},Glyph.prototype.getContours=function(){if(void 0===this.points)return[];for(var contours=[],currentContour=[],i=0;i<this.points.length;i+=1){var pt=this.points[i];currentContour.push(pt),pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}return check.argument(0===currentContour.length,"There are still points left in the current contour."),contours},Glyph.prototype.getMetrics=function(){for(var commands=this.path.commands,xCoords=[],yCoords=[],i=0;i<commands.length;i+=1){var cmd=commands[i];"Z"!==cmd.type&&(xCoords.push(cmd.x),yCoords.push(cmd.y)),("Q"===cmd.type||"C"===cmd.type)&&(xCoords.push(cmd.x1),yCoords.push(cmd.y1)),"C"===cmd.type&&(xCoords.push(cmd.x2),yCoords.push(cmd.y2))}var metrics={xMin:Math.min.apply(null,xCoords),yMin:Math.min.apply(null,yCoords),xMax:Math.max.apply(null,xCoords),yMax:Math.max.apply(null,yCoords),leftSideBearing:0};return metrics.rightSideBearing=this.advanceWidth-metrics.leftSideBearing-(metrics.xMax-metrics.xMin),metrics},Glyph.prototype.draw=function(ctx,x,y,fontSize){this.getPath(x,y,fontSize).draw(ctx)},Glyph.prototype.drawPoints=function(ctx,x,y,fontSize){function drawCircles(l,x,y,scale){var PI_SQ=2*Math.PI;ctx.beginPath();for(var j=0;j<l.length;j+=1)ctx.moveTo(x+l[j].x*scale,y+l[j].y*scale),ctx.arc(x+l[j].x*scale,y+l[j].y*scale,2,0,PI_SQ,!1);ctx.closePath(),ctx.fill()}x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:24;for(var scale=1/this.path.unitsPerEm*fontSize,blueCircles=[],redCircles=[],path=this.path,i=0;i<path.commands.length;i+=1){var cmd=path.commands[i];void 0!==cmd.x&&blueCircles.push({x:cmd.x,y:-cmd.y}),void 0!==cmd.x1&&redCircles.push({x:cmd.x1,y:-cmd.y1}),void 0!==cmd.x2&&redCircles.push({x:cmd.x2,y:-cmd.y2})}ctx.fillStyle="blue",drawCircles(blueCircles,x,y,scale),ctx.fillStyle="red",drawCircles(redCircles,x,y,scale)},Glyph.prototype.drawMetrics=function(ctx,x,y,fontSize){var scale;x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:24,scale=1/this.path.unitsPerEm*fontSize,ctx.lineWidth=1,ctx.strokeStyle="black",draw.line(ctx,x,-1e4,x,1e4),draw.line(ctx,-1e4,y,1e4,y);var xMin=this.xMin||0,yMin=this.yMin||0,xMax=this.xMax||0,yMax=this.yMax||0,advanceWidth=this.advanceWidth||0;ctx.strokeStyle="blue",draw.line(ctx,x+xMin*scale,-1e4,x+xMin*scale,1e4),draw.line(ctx,x+xMax*scale,-1e4,x+xMax*scale,1e4),draw.line(ctx,-1e4,y+-yMin*scale,1e4,y+-yMin*scale),draw.line(ctx,-1e4,y+-yMax*scale,1e4,y+-yMax*scale),ctx.strokeStyle="green",draw.line(ctx,x+advanceWidth*scale,-1e4,x+advanceWidth*scale,1e4)},exports.Glyph=Glyph},{"./check":2,"./draw":3,"./path":10}],7:[function(_dereq_,module,exports){"use strict";function GlyphSet(font,glyphs){if(this.font=font,this.glyphs={},Array.isArray(glyphs))for(var i=0;i<glyphs.length;i++)this.glyphs[i]=glyphs[i];this.length=glyphs&&glyphs.length||0}function glyphLoader(font,index){return new _glyph.Glyph({index:index,font:font})}function ttfGlyphLoader(font,index,parseGlyph,data,position,buildPath){return function(){var glyph=new _glyph.Glyph({index:index,font:font});return glyph.path=function(){parseGlyph(glyph,data,position);var path=buildPath(font.glyphs,glyph);return path.unitsPerEm=font.unitsPerEm,path},glyph}}function cffGlyphLoader(font,index,parseCFFCharstring,charstring){return function(){var glyph=new _glyph.Glyph({index:index,font:font});return glyph.path=function(){var path=parseCFFCharstring(font,glyph,charstring);return path.unitsPerEm=font.unitsPerEm,path},glyph}}var _glyph=_dereq_("./glyph");GlyphSet.prototype.get=function(index){return"function"==typeof this.glyphs[index]&&(this.glyphs[index]=this.glyphs[index]()),this.glyphs[index]},GlyphSet.prototype.push=function(index,loader){this.glyphs[index]=loader,this.length++},exports.GlyphSet=GlyphSet,exports.glyphLoader=glyphLoader,exports.ttfGlyphLoader=ttfGlyphLoader,exports.cffGlyphLoader=cffGlyphLoader},{"./glyph":6}],8:[function(_dereq_,module,exports){"use strict";function toArrayBuffer(buffer){for(var arrayBuffer=new ArrayBuffer(buffer.length),data=new Uint8Array(arrayBuffer),i=0;i<buffer.length;i+=1)data[i]=buffer[i];return arrayBuffer}function loadFromFile(path,callback){var fs=_dereq_("fs");fs.readFile(path,function(err,buffer){return err?callback(err.message):void callback(null,toArrayBuffer(buffer))})}function loadFromUrl(url,callback){var request=new XMLHttpRequest;request.open("get",url,!0),request.responseType="arraybuffer",request.onload=function(){return 200!==request.status?callback("Font could not be loaded: "+request.statusText):callback(null,request.response)},request.send()}function parseBuffer(buffer){var indexToLocFormat,hmtxOffset,glyfOffset,locaOffset,cffOffset,kernOffset,gposOffset,font=new _font.Font,data=new DataView(buffer,0),version=parse.getFixed(data,0);if(1===version)font.outlinesFormat="truetype";else{if(version=parse.getTag(data,0),"OTTO"!==version)throw new Error("Unsupported OpenType version "+version);font.outlinesFormat="cff"}for(var numTables=parse.getUShort(data,4),p=12,i=0;numTables>i;i+=1){var tag=parse.getTag(data,p),offset=parse.getULong(data,p+8);switch(tag){case"cmap":font.tables.cmap=cmap.parse(data,offset),font.encoding=new encoding.CmapEncoding(font.tables.cmap),font.encoding||(font.supported=!1);break;case"head":font.tables.head=head.parse(data,offset),font.unitsPerEm=font.tables.head.unitsPerEm,indexToLocFormat=font.tables.head.indexToLocFormat;break;case"hhea":font.tables.hhea=hhea.parse(data,offset),font.ascender=font.tables.hhea.ascender,font.descender=font.tables.hhea.descender,font.numberOfHMetrics=font.tables.hhea.numberOfHMetrics;break;case"hmtx":hmtxOffset=offset;break;case"maxp":font.tables.maxp=maxp.parse(data,offset),font.numGlyphs=font.tables.maxp.numGlyphs;break;case"name":font.tables.name=_name.parse(data,offset),font.familyName=font.tables.name.fontFamily,font.styleName=font.tables.name.fontSubfamily;break;case"OS/2":font.tables.os2=os2.parse(data,offset);break;case"post":font.tables.post=post.parse(data,offset),font.glyphNames=new encoding.GlyphNames(font.tables.post);break;case"glyf":glyfOffset=offset;break;case"loca":locaOffset=offset;break;case"CFF ":cffOffset=offset;break;case"kern":kernOffset=offset;break;case"GPOS":gposOffset=offset}p+=16}if(glyfOffset&&locaOffset){var shortVersion=0===indexToLocFormat,locaTable=loca.parse(data,locaOffset,font.numGlyphs,shortVersion);font.glyphs=glyf.parse(data,glyfOffset,locaTable,font),hmtx.parse(data,hmtxOffset,font.numberOfHMetrics,font.numGlyphs,font.glyphs),encoding.addGlyphNames(font)}else cffOffset?(cff.parse(data,cffOffset,font),encoding.addGlyphNames(font)):font.supported=!1;return font.supported&&(font.kerningPairs=kernOffset?kern.parse(data,kernOffset):{},gposOffset&&gpos.parse(data,gposOffset,font)),font}function load(url,callback){var isNode="undefined"==typeof window,loadFn=isNode?loadFromFile:loadFromUrl;loadFn(url,function(err,arrayBuffer){if(err)return callback(err);var font=parseBuffer(arrayBuffer);return font.supported?callback(null,font):callback("Font is not supported (is this a Postscript font?)")})}var encoding=_dereq_("./encoding"),_font=_dereq_("./font"),glyph=_dereq_("./glyph"),parse=_dereq_("./parse"),path=_dereq_("./path"),cmap=_dereq_("./tables/cmap"),cff=_dereq_("./tables/cff"),glyf=_dereq_("./tables/glyf"),gpos=_dereq_("./tables/gpos"),head=_dereq_("./tables/head"),hhea=_dereq_("./tables/hhea"),hmtx=_dereq_("./tables/hmtx"),kern=_dereq_("./tables/kern"),loca=_dereq_("./tables/loca"),maxp=_dereq_("./tables/maxp"),_name=_dereq_("./tables/name"),os2=_dereq_("./tables/os2"),post=_dereq_("./tables/post");exports._parse=parse,exports.Font=_font.Font,exports.Glyph=glyph.Glyph,exports.Path=path.Path,exports.parse=parseBuffer,exports.load=load},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,"./tables/cmap":13,"./tables/glyf":14,"./tables/gpos":15,"./tables/head":16,"./tables/hhea":17,"./tables/hmtx":18,"./tables/kern":19,"./tables/loca":20,"./tables/maxp":21,"./tables/name":22,"./tables/os2":23,"./tables/post":24,fs:1}],9:[function(_dereq_,module,exports){"use strict";function Parser(data,offset){this.data=data,this.offset=offset,this.relativeOffset=0}exports.getByte=function(dataView,offset){return dataView.getUint8(offset)},exports.getCard8=exports.getByte,exports.getUShort=function(dataView,offset){return dataView.getUint16(offset,!1)},exports.getCard16=exports.getUShort,exports.getShort=function(dataView,offset){return dataView.getInt16(offset,!1)},exports.getULong=function(dataView,offset){return dataView.getUint32(offset,!1)},exports.getFixed=function(dataView,offset){var decimal=dataView.getInt16(offset,!1),fraction=dataView.getUint16(offset+2,!1);return decimal+fraction/65535},exports.getTag=function(dataView,offset){for(var tag="",i=offset;offset+4>i;i+=1)tag+=String.fromCharCode(dataView.getInt8(i));return tag},exports.getOffset=function(dataView,offset,offSize){for(var v=0,i=0;offSize>i;i+=1)v<<=8,v+=dataView.getUint8(offset+i);return v},exports.getBytes=function(dataView,startOffset,endOffset){for(var bytes=[],i=startOffset;endOffset>i;i+=1)bytes.push(dataView.getUint8(i));return bytes},exports.bytesToString=function(bytes){for(var s="",i=0;i<bytes.length;i+=1)s+=String.fromCharCode(bytes[i]);return s};var typeOffsets={"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};Parser.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},Parser.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},Parser.prototype.parseCard8=Parser.prototype.parseByte,Parser.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},Parser.prototype.parseCard16=Parser.prototype.parseUShort,Parser.prototype.parseSID=Parser.prototype.parseUShort,Parser.prototype.parseOffset16=Parser.prototype.parseUShort,Parser.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},Parser.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},Parser.prototype.parseULong=function(){var v=exports.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},Parser.prototype.parseFixed=function(){var v=exports.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(count){for(var offsets=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;count>i;i++)offsets[i]=exports.getUShort(dataView,offset),offset+=2;return this.relativeOffset+=2*count,offsets},Parser.prototype.parseString=function(length){var dataView=this.data,offset=this.offset+this.relativeOffset,string="";this.relativeOffset+=length;for(var i=0;length>i;i++)string+=String.fromCharCode(dataView.getUint8(offset+i));return string},Parser.prototype.parseTag=function(){return this.parseString(4)},Parser.prototype.parseLongDateTime=function(){var v=exports.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,v},Parser.prototype.parseFixed=function(){var v=exports.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v/65536},Parser.prototype.parseVersion=function(){var major=exports.getUShort(this.data,this.offset+this.relativeOffset),minor=exports.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,major+minor/4096/10},Parser.prototype.skip=function(type,amount){void 0===amount&&(amount=1),this.relativeOffset+=typeOffsets[type]*amount},exports.Parser=Parser},{}],10:[function(_dereq_,module,exports){"use strict";function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Path.prototype.moveTo=function(x,y){this.commands.push({type:"M",x:x,y:y})},Path.prototype.lineTo=function(x,y){this.commands.push({type:"L",x:x,y:y})},Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(x1,y1,x2,y2,x,y){this.commands.push({type:"C",x1:x1,y1:y1,x2:x2,y2:y2,x:x,y:y})},Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(x1,y1,x,y){this.commands.push({type:"Q",x1:x1,y1:y1,x:x,y:y})},Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})},Path.prototype.extend=function(pathOrCommands){pathOrCommands.commands&&(pathOrCommands=pathOrCommands.commands),Array.prototype.push.apply(this.commands,pathOrCommands)},Path.prototype.draw=function(ctx){ctx.beginPath();for(var i=0;i<this.commands.length;i+=1){var cmd=this.commands[i];"M"===cmd.type?ctx.moveTo(cmd.x,cmd.y):"L"===cmd.type?ctx.lineTo(cmd.x,cmd.y):"C"===cmd.type?ctx.bezierCurveTo(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?ctx.quadraticCurveTo(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&ctx.closePath()}this.fill&&(ctx.fillStyle=this.fill,ctx.fill()),this.stroke&&(ctx.strokeStyle=this.stroke,ctx.lineWidth=this.strokeWidth,ctx.stroke())},Path.prototype.toPathData=function(decimalPlaces){function floatToString(v){return Math.round(v)===v?""+Math.round(v):v.toFixed(decimalPlaces)}function packValues(){for(var s="",i=0;i<arguments.length;i+=1){var v=arguments[i];v>=0&&i>0&&(s+=" "),s+=floatToString(v)}return s}decimalPlaces=void 0!==decimalPlaces?decimalPlaces:2;for(var d="",i=0;i<this.commands.length;i+=1){var cmd=this.commands[i];"M"===cmd.type?d+="M"+packValues(cmd.x,cmd.y):"L"===cmd.type?d+="L"+packValues(cmd.x,cmd.y):"C"===cmd.type?d+="C"+packValues(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?d+="Q"+packValues(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&(d+="Z")}return d},Path.prototype.toSVG=function(decimalPlaces){var svg='<path d="';return svg+=this.toPathData(decimalPlaces),svg+='"',this.fill&"black"!==this.fill&&(svg+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(svg+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),svg+="/>"},exports.Path=Path},{}],11:[function(_dereq_,module,exports){"use strict";function Table(tableName,fields,options){var i;for(i=0;i<fields.length;i+=1){var field=fields[i];this[field.name]=field.value}if(this.tableName=tableName,this.fields=fields,options){var optionKeys=Object.keys(options);for(i=0;i<optionKeys.length;i+=1){var k=optionKeys[i],v=options[k];void 0!==this[k]&&(this[k]=v)}}}var check=_dereq_("./check"),encode=_dereq_("./types").encode,sizeOf=_dereq_("./types").sizeOf;Table.prototype.sizeOf=function(){for(var v=0,i=0;i<this.fields.length;i+=1){var field=this.fields[i],value=this[field.name];if(void 0===value&&(value=field.value),"function"==typeof value.sizeOf)v+=value.sizeOf();else{var sizeOfFunction=sizeOf[field.type];check.assert("function"==typeof sizeOfFunction,"Could not find sizeOf function for field"+field.name),v+=sizeOfFunction(value)}}return v},Table.prototype.encode=function(){return encode.TABLE(this)},exports.Table=Table},{"./check":2,"./types":26}],12:[function(_dereq_,module,exports){"use strict";function equals(a,b){if(a===b)return!0;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;i+=1)if(!equals(a[i],b[i]))return!1;return!0}return!1}function parseCFFIndex(data,start,conversionFn){var i,objectOffset,endOffset,offsets=[],objects=[],count=parse.getCard16(data,start);if(0!==count){var offsetSize=parse.getByte(data,start+2);objectOffset=start+(count+1)*offsetSize+2;var pos=start+3;for(i=0;count+1>i;i+=1)offsets.push(parse.getOffset(data,pos,offsetSize)),pos+=offsetSize;endOffset=objectOffset+offsets[count]}else endOffset=start+2;for(i=0;i<offsets.length-1;i+=1){var value=parse.getBytes(data,objectOffset+offsets[i],objectOffset+offsets[i+1]);conversionFn&&(value=conversionFn(value)),objects.push(value)}return{objects:objects,startOffset:start,endOffset:endOffset}}function parseFloatOperand(parser){for(var s="",eof=15,lookup=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var b=parser.parseByte(),n1=b>>4,n2=15&b;if(n1===eof)break;if(s+=lookup[n1],n2===eof)break;s+=lookup[n2]}return parseFloat(s)}function parseOperand(parser,b0){var b1,b2,b3,b4;if(28===b0)return b1=parser.parseByte(),b2=parser.parseByte(),b1<<8|b2;if(29===b0)return b1=parser.parseByte(),b2=parser.parseByte(),b3=parser.parseByte(),b4=parser.parseByte(),b1<<24|b2<<16|b3<<8|b4;if(30===b0)return parseFloatOperand(parser);if(b0>=32&&246>=b0)return b0-139;if(b0>=247&&250>=b0)return b1=parser.parseByte(),256*(b0-247)+b1+108;if(b0>=251&&254>=b0)return b1=parser.parseByte(),256*-(b0-251)-b1-108;throw new Error("Invalid b0 "+b0)}function entriesToObject(entries){for(var o={},i=0;i<entries.length;i+=1){var value,key=entries[i][0],values=entries[i][1];if(value=1===values.length?values[0]:values,o.hasOwnProperty(key))throw new Error("Object "+o+" already has key "+key);o[key]=value}return o}function parseCFFDict(data,start,size){start=void 0!==start?start:0;var parser=new parse.Parser(data,start),entries=[],operands=[];for(size=void 0!==size?size:data.length;parser.relativeOffset<size;){var op=parser.parseByte();21>=op?(12===op&&(op=1200+parser.parseByte()),entries.push([op,operands]),operands=[]):operands.push(parseOperand(parser,op))}return entriesToObject(entries)}function getCFFString(strings,index){return index=390>=index?encoding.cffStandardStrings[index]:strings[index-391]}function interpretDict(dict,meta,strings){for(var newDict={},i=0;i<meta.length;i+=1){var m=meta[i],value=dict[m.op];void 0===value&&(value=void 0!==m.value?m.value:null),"SID"===m.type&&(value=getCFFString(strings,value)),newDict[m.name]=value}return newDict}function parseCFFHeader(data,start){var header={};return header.formatMajor=parse.getCard8(data,start),header.formatMinor=parse.getCard8(data,start+1),header.size=parse.getCard8(data,start+2),header.offsetSize=parse.getCard8(data,start+3),header.startOffset=start,header.endOffset=start+4,header}function parseCFFTopDict(data,strings){var dict=parseCFFDict(data,0,data.byteLength);return interpretDict(dict,TOP_DICT_META,strings)}function parseCFFPrivateDict(data,start,size,strings){var dict=parseCFFDict(data,start,size);return interpretDict(dict,PRIVATE_DICT_META,strings)}function parseCFFCharset(data,start,nGlyphs,strings){var i,sid,count,parser=new parse.Parser(data,start);nGlyphs-=1;var charset=[".notdef"],format=parser.parseCard8();if(0===format)for(i=0;nGlyphs>i;i+=1)sid=parser.parseSID(),charset.push(getCFFString(strings,sid));else if(1===format)for(;charset.length<=nGlyphs;)for(sid=parser.parseSID(),count=parser.parseCard8(),i=0;count>=i;i+=1)charset.push(getCFFString(strings,sid)),sid+=1;else{if(2!==format)throw new Error("Unknown charset format "+format);for(;charset.length<=nGlyphs;)for(sid=parser.parseSID(),count=parser.parseCard16(),i=0;count>=i;i+=1)charset.push(getCFFString(strings,sid)),sid+=1}return charset}function parseCFFEncoding(data,start,charset){var i,code,enc={},parser=new parse.Parser(data,start),format=parser.parseCard8();if(0===format){var nCodes=parser.parseCard8();for(i=0;nCodes>i;i+=1)code=parser.parseCard8(),enc[code]=i}else{if(1!==format)throw new Error("Unknown encoding format "+format);var nRanges=parser.parseCard8();for(code=1,i=0;nRanges>i;i+=1)for(var first=parser.parseCard8(),nLeft=parser.parseCard8(),j=first;first+nLeft>=j;j+=1)enc[j]=code,code+=1}return new encoding.CffEncoding(enc,charset)}function parseCFFCharstring(font,glyph,code){function newContour(x,y){open&&p.closePath(),p.moveTo(x,y),open=!0}function parseStems(){var hasWidthArg;hasWidthArg=stack.length%2!==0,hasWidthArg&&!haveWidth&&(width=stack.shift()+font.nominalWidthX),nStems+=stack.length>>1,stack.length=0,haveWidth=!0}function parse(code){for(var b1,b2,b3,b4,codeIndex,subrCode,jpx,jpy,c3x,c3y,c4x,c4y,i=0;i<code.length;){var v=code[i];switch(i+=1,v){case 1:parseStems();break;case 3:parseStems();break;case 4:stack.length>1&&!haveWidth&&(width=stack.shift()+font.nominalWidthX,haveWidth=!0),y+=stack.pop(),newContour(x,y);break;case 5:for(;stack.length>0;)x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);break;case 6:for(;stack.length>0&&(x+=stack.shift(),p.lineTo(x,y),0!==stack.length);)y+=stack.shift(),p.lineTo(x,y);break;case 7:for(;stack.length>0&&(y+=stack.shift(),p.lineTo(x,y),0!==stack.length);)x+=stack.shift(),p.lineTo(x,y);break;case 8:for(;stack.length>0;)c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 10:codeIndex=stack.pop()+font.subrsBias,subrCode=font.subrs[codeIndex],subrCode&&parse(subrCode);break;case 11:return;case 12:switch(v=code[i],i+=1,v){case 35:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y+stack.shift(),c3x=jpx+stack.shift(),c3y=jpy+stack.shift(),c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),x=c4x+stack.shift(),y=c4y+stack.shift(),stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 34:c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y,c3x=jpx+stack.shift(),c3y=c2y,c4x=c3x+stack.shift(),c4y=y,x=c4x+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 36:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y,c3x=jpx+stack.shift(),c3y=c2y,c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),x=c4x+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 37:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y+stack.shift(),c3x=jpx+stack.shift(),c3y=jpy+stack.shift(),c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),Math.abs(c4x-x)>Math.abs(c4y-y)?x=c4x+stack.shift():y=c4y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;default:console.log("Glyph "+glyph.index+": unknown operator 1200"+v),stack.length=0}break;case 14:stack.length>0&&!haveWidth&&(width=stack.shift()+font.nominalWidthX,haveWidth=!0),open&&(p.closePath(),open=!1);break;case 18:parseStems();break;case 19:case 20:parseStems(),i+=nStems+7>>3;break;case 21:stack.length>2&&!haveWidth&&(width=stack.shift()+font.nominalWidthX,haveWidth=!0),y+=stack.pop(),x+=stack.pop(),newContour(x,y);break;case 22:stack.length>1&&!haveWidth&&(width=stack.shift()+font.nominalWidthX,haveWidth=!0),x+=stack.pop(),newContour(x,y);break;case 23:parseStems();break;case 24:for(;stack.length>2;)c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);break;case 25:for(;stack.length>6;)x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 26:for(stack.length%2&&(x+=stack.shift());stack.length>0;)c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x,y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 27:for(stack.length%2&&(y+=stack.shift());stack.length>0;)c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y,p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 28:b1=code[i],b2=code[i+1],stack.push((b1<<24|b2<<16)>>16),i+=2;break;case 29:codeIndex=stack.pop()+font.gsubrsBias,subrCode=font.gsubrs[codeIndex],subrCode&&parse(subrCode);break;case 30:for(;stack.length>0&&(c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y),0!==stack.length);)c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),y=c2y+stack.shift(),x=c2x+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 31:for(;stack.length>0&&(c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),y=c2y+stack.shift(),x=c2x+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y),0!==stack.length);)c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;default:32>v?console.log("Glyph "+glyph.index+": unknown operator "+v):247>v?stack.push(v-139):251>v?(b1=code[i],i+=1,stack.push(256*(v-247)+b1+108)):255>v?(b1=code[i],i+=1,stack.push(256*-(v-251)-b1-108)):(b1=code[i],b2=code[i+1],b3=code[i+2],b4=code[i+3],i+=4,stack.push((b1<<24|b2<<16|b3<<8|b4)/65536))}}}var c1x,c1y,c2x,c2y,p=new path.Path,stack=[],nStems=0,haveWidth=!1,width=font.defaultWidthX,open=!1,x=0,y=0;return parse(code),glyph.advanceWidth=width,p}function calcCFFSubroutineBias(subrs){var bias;return bias=subrs.length<1240?107:subrs.length<33900?1131:32768}function parseCFFTable(data,start,font){font.tables.cff={};var header=parseCFFHeader(data,start),nameIndex=parseCFFIndex(data,header.endOffset,parse.bytesToString),topDictIndex=parseCFFIndex(data,nameIndex.endOffset),stringIndex=parseCFFIndex(data,topDictIndex.endOffset,parse.bytesToString),globalSubrIndex=parseCFFIndex(data,stringIndex.endOffset);font.gsubrs=globalSubrIndex.objects,font.gsubrsBias=calcCFFSubroutineBias(font.gsubrs);var topDictData=new DataView(new Uint8Array(topDictIndex.objects[0]).buffer),topDict=parseCFFTopDict(topDictData,stringIndex.objects);font.tables.cff.topDict=topDict;var privateDictOffset=start+topDict["private"][1],privateDict=parseCFFPrivateDict(data,privateDictOffset,topDict["private"][0],stringIndex.objects);if(font.defaultWidthX=privateDict.defaultWidthX,font.nominalWidthX=privateDict.nominalWidthX,0!==privateDict.subrs){var subrOffset=privateDictOffset+privateDict.subrs,subrIndex=parseCFFIndex(data,subrOffset);font.subrs=subrIndex.objects,font.subrsBias=calcCFFSubroutineBias(font.subrs)}else font.subrs=[],font.subrsBias=0;var charStringsIndex=parseCFFIndex(data,start+topDict.charStrings);font.nGlyphs=charStringsIndex.objects.length;var charset=parseCFFCharset(data,start+topDict.charset,font.nGlyphs,stringIndex.objects);font.cffEncoding=0===topDict.encoding?new encoding.CffEncoding(encoding.cffStandardEncoding,charset):1===topDict.encoding?new encoding.CffEncoding(encoding.cffExpertEncoding,charset):parseCFFEncoding(data,start+topDict.encoding,charset),font.encoding=font.encoding||font.cffEncoding,font.glyphs=new glyphset.GlyphSet(font);for(var i=0;i<font.nGlyphs;i+=1){var charString=charStringsIndex.objects[i];font.glyphs.push(i,glyphset.cffGlyphLoader(font,i,parseCFFCharstring,charString))}}function encodeString(s,strings){var sid,i=encoding.cffStandardStrings.indexOf(s);return i>=0&&(sid=i),i=strings.indexOf(s),i>=0?sid=i+encoding.cffStandardStrings.length:(sid=encoding.cffStandardStrings.length+strings.length,strings.push(s)),sid}function makeHeader(){return new table.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(fontNames){var t=new table.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var i=0;i<fontNames.length;i+=1)t.names.push({name:"name_"+i,type:"NAME",value:fontNames[i]});return t}function makeDict(meta,attrs,strings){for(var m={},i=0;i<meta.length;i+=1){var entry=meta[i],value=attrs[entry.name];void 0===value||equals(value,entry.value)||("SID"===entry.type&&(value=encodeString(value,strings)),m[entry.op]={name:entry.name,type:entry.type,value:value})}return m}function makeTopDict(attrs,strings){var t=new table.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=makeDict(TOP_DICT_META,attrs,strings),t}function makeTopDictIndex(topDict){var t=new table.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:topDict}],t}function makeStringIndex(strings){var t=new table.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var i=0;i<strings.length;i+=1)t.strings.push({name:"string_"+i,type:"STRING",value:strings[i]});return t}function makeGlobalSubrIndex(){return new table.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(glyphNames,strings){for(var t=new table.Table("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<glyphNames.length;i+=1){var glyphName=glyphNames[i],glyphSID=encodeString(glyphName,strings);t.fields.push({name:"glyph_"+i,type:"SID",value:glyphSID})}return t}function glyphToOps(glyph){var ops=[],path=glyph.path;ops.push({name:"width",type:"NUMBER",value:glyph.advanceWidth});for(var x=0,y=0,i=0;i<path.commands.length;i+=1){var dx,dy,cmd=path.commands[i];if("Q"===cmd.type){var _13=1/3,_23=2/3;cmd={type:"C",x:cmd.x,y:cmd.y,x1:_13*x+_23*cmd.x1,y1:_13*y+_23*cmd.y1,x2:_13*cmd.x+_23*cmd.x1,y2:_13*cmd.y+_23*cmd.y1}}if("M"===cmd.type)dx=Math.round(cmd.x-x),dy=Math.round(cmd.y-y),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rmoveto",type:"OP",value:21}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("L"===cmd.type)dx=Math.round(cmd.x-x),dy=Math.round(cmd.y-y),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rlineto",type:"OP",value:5}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("C"===cmd.type){var dx1=Math.round(cmd.x1-x),dy1=Math.round(cmd.y1-y),dx2=Math.round(cmd.x2-cmd.x1),dy2=Math.round(cmd.y2-cmd.y1);dx=Math.round(cmd.x-cmd.x2),dy=Math.round(cmd.y-cmd.y2),ops.push({name:"dx1",type:"NUMBER",value:dx1}),ops.push({name:"dy1",type:"NUMBER",value:dy1}),ops.push({name:"dx2",type:"NUMBER",value:dx2}),ops.push({name:"dy2",type:"NUMBER",value:dy2}),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rrcurveto",type:"OP",value:8}),x=Math.round(cmd.x),y=Math.round(cmd.y)}}return ops.push({name:"endchar",type:"OP",value:14}),ops}function makeCharStringsIndex(glyphs){for(var t=new table.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),i=0;i<glyphs.length;i+=1){
var glyph=glyphs.get(i),ops=glyphToOps(glyph);t.charStrings.push({name:glyph.name,type:"CHARSTRING",value:ops})}return t}function makePrivateDict(attrs,strings){var t=new table.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=makeDict(PRIVATE_DICT_META,attrs,strings),t}function makePrivateDictIndex(privateDict){var t=new table.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return t.privateDicts=[{name:"privateDict_0",type:"TABLE",value:privateDict}],t}function makeCFFTable(glyphs,options){for(var glyph,t=new table.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),fontScale=1/options.unitsPerEm,attrs={version:options.version,fullName:options.fullName,familyName:options.familyName,weight:options.weightName,fontMatrix:[fontScale,0,0,fontScale,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]},privateAttrs={},glyphNames=[],i=1;i<glyphs.length;i+=1)glyph=glyphs.get(i),glyphNames.push(glyph.name);var strings=[];t.header=makeHeader(),t.nameIndex=makeNameIndex([options.postScriptName]);var topDict=makeTopDict(attrs,strings);t.topDictIndex=makeTopDictIndex(topDict),t.globalSubrIndex=makeGlobalSubrIndex(),t.charsets=makeCharsets(glyphNames,strings),t.charStringsIndex=makeCharStringsIndex(glyphs);var privateDict=makePrivateDict(privateAttrs,strings);t.privateDictIndex=makePrivateDictIndex(privateDict),t.stringIndex=makeStringIndex(strings);var startOffset=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return attrs.charset=startOffset,attrs.encoding=0,attrs.charStrings=attrs.charset+t.charsets.sizeOf(),attrs["private"][1]=attrs.charStrings+t.charStringsIndex.sizeOf(),topDict=makeTopDict(attrs,strings),t.topDictIndex=makeTopDictIndex(topDict),t}var encoding=_dereq_("../encoding"),glyphset=_dereq_("../glyphset"),parse=_dereq_("../parse"),path=_dereq_("../path"),table=_dereq_("../table"),TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];exports.parse=parseCFFTable,exports.make=makeCFFTable},{"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(_dereq_,module,exports){"use strict";function parseCmapTable(data,start){var i,cmap={};cmap.version=parse.getUShort(data,start),check.argument(0===cmap.version,"cmap table version should be 0."),cmap.numTables=parse.getUShort(data,start+2);var offset=-1;for(i=0;i<cmap.numTables;i+=1){var platformId=parse.getUShort(data,start+4+8*i),encodingId=parse.getUShort(data,start+4+8*i+2);if(3===platformId&&(1===encodingId||0===encodingId)){offset=parse.getULong(data,start+4+8*i+4);break}}if(-1===offset)return null;var p=new parse.Parser(data,start+offset);cmap.format=p.parseUShort(),check.argument(4===cmap.format,"Only format 4 cmap tables are supported."),cmap.length=p.parseUShort(),cmap.language=p.parseUShort();var segCount;cmap.segCount=segCount=p.parseUShort()>>1,p.skip("uShort",3),cmap.glyphIndexMap={};var endCountParser=new parse.Parser(data,start+offset+14),startCountParser=new parse.Parser(data,start+offset+16+2*segCount),idDeltaParser=new parse.Parser(data,start+offset+16+4*segCount),idRangeOffsetParser=new parse.Parser(data,start+offset+16+6*segCount),glyphIndexOffset=start+offset+16+8*segCount;for(i=0;segCount-1>i;i+=1)for(var glyphIndex,endCount=endCountParser.parseUShort(),startCount=startCountParser.parseUShort(),idDelta=idDeltaParser.parseShort(),idRangeOffset=idRangeOffsetParser.parseUShort(),c=startCount;endCount>=c;c+=1)0!==idRangeOffset?(glyphIndexOffset=idRangeOffsetParser.offset+idRangeOffsetParser.relativeOffset-2,glyphIndexOffset+=idRangeOffset,glyphIndexOffset+=2*(c-startCount),glyphIndex=parse.getUShort(data,glyphIndexOffset),0!==glyphIndex&&(glyphIndex=glyphIndex+idDelta&65535)):glyphIndex=c+idDelta&65535,cmap.glyphIndexMap[c]=glyphIndex;return cmap}function addSegment(t,code,glyphIndex){t.segments.push({end:code,start:code,delta:-(code-glyphIndex),offset:0})}function addTerminatorSegment(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(glyphs){var i,t=new table.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(t.segments=[],i=0;i<glyphs.length;i+=1){for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)addSegment(t,glyph.unicodes[j],i);t.segments=t.segments.sort(function(a,b){return a.start-b.start})}addTerminatorSegment(t);var segCount;segCount=t.segments.length,t.segCountX2=2*segCount,t.searchRange=2*Math.pow(2,Math.floor(Math.log(segCount)/Math.log(2))),t.entrySelector=Math.log(t.searchRange/2)/Math.log(2),t.rangeShift=t.segCountX2-t.searchRange;var endCounts=[],startCounts=[],idDeltas=[],idRangeOffsets=[],glyphIds=[];for(i=0;segCount>i;i+=1){var segment=t.segments[i];endCounts=endCounts.concat({name:"end_"+i,type:"USHORT",value:segment.end}),startCounts=startCounts.concat({name:"start_"+i,type:"USHORT",value:segment.start}),idDeltas=idDeltas.concat({name:"idDelta_"+i,type:"SHORT",value:segment.delta}),idRangeOffsets=idRangeOffsets.concat({name:"idRangeOffset_"+i,type:"USHORT",value:segment.offset}),void 0!==segment.glyphId&&(glyphIds=glyphIds.concat({name:"glyph_"+i,type:"USHORT",value:segment.glyphId}))}return t.fields=t.fields.concat(endCounts),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(startCounts),t.fields=t.fields.concat(idDeltas),t.fields=t.fields.concat(idRangeOffsets),t.fields=t.fields.concat(glyphIds),t.length=14+2*endCounts.length+2+2*startCounts.length+2*idDeltas.length+2*idRangeOffsets.length+2*glyphIds.length,t}var check=_dereq_("../check"),parse=_dereq_("../parse"),table=_dereq_("../table");exports.parse=parseCmapTable,exports.make=makeCmapTable},{"../check":2,"../parse":9,"../table":11}],14:[function(_dereq_,module,exports){"use strict";function parseGlyphCoordinate(p,flag,previousValue,shortVectorBitMask,sameBitMask){var v;return(flag&shortVectorBitMask)>0?(v=p.parseByte(),0===(flag&sameBitMask)&&(v=-v),v=previousValue+v):v=(flag&sameBitMask)>0?previousValue:previousValue+p.parseShort(),v}function parseGlyph(glyph,data,start){var p=new parse.Parser(data,start);glyph.numberOfContours=p.parseShort(),glyph.xMin=p.parseShort(),glyph.yMin=p.parseShort(),glyph.xMax=p.parseShort(),glyph.yMax=p.parseShort();var flags,flag;if(glyph.numberOfContours>0){var i,endPointIndices=glyph.endPointIndices=[];for(i=0;i<glyph.numberOfContours;i+=1)endPointIndices.push(p.parseUShort());for(glyph.instructionLength=p.parseUShort(),glyph.instructions=[],i=0;i<glyph.instructionLength;i+=1)glyph.instructions.push(p.parseByte());var numberOfCoordinates=endPointIndices[endPointIndices.length-1]+1;for(flags=[],i=0;numberOfCoordinates>i;i+=1)if(flag=p.parseByte(),flags.push(flag),(8&flag)>0)for(var repeatCount=p.parseByte(),j=0;repeatCount>j;j+=1)flags.push(flag),i+=1;if(check.argument(flags.length===numberOfCoordinates,"Bad flags."),endPointIndices.length>0){var point,points=[];if(numberOfCoordinates>0){for(i=0;numberOfCoordinates>i;i+=1)flag=flags[i],point={},point.onCurve=!!(1&flag),point.lastPointOfContour=endPointIndices.indexOf(i)>=0,points.push(point);var px=0;for(i=0;numberOfCoordinates>i;i+=1)flag=flags[i],point=points[i],point.x=parseGlyphCoordinate(p,flag,px,2,16),px=point.x;var py=0;for(i=0;numberOfCoordinates>i;i+=1)flag=flags[i],point=points[i],point.y=parseGlyphCoordinate(p,flag,py,4,32),py=point.y}glyph.points=points}else glyph.points=[]}else if(0===glyph.numberOfContours)glyph.points=[];else{glyph.isComposite=!0,glyph.points=[],glyph.components=[];for(var moreComponents=!0;moreComponents;){flags=p.parseUShort();var component={glyphIndex:p.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&flags)>0?(component.dx=p.parseShort(),component.dy=p.parseShort()):(component.dx=p.parseChar(),component.dy=p.parseChar()),(8&flags)>0?component.xScale=component.yScale=p.parseF2Dot14():(64&flags)>0?(component.xScale=p.parseF2Dot14(),component.yScale=p.parseF2Dot14()):(128&flags)>0&&(component.xScale=p.parseF2Dot14(),component.scale01=p.parseF2Dot14(),component.scale10=p.parseF2Dot14(),component.yScale=p.parseF2Dot14()),glyph.components.push(component),moreComponents=!!(32&flags)}}}function transformPoints(points,transform){for(var newPoints=[],i=0;i<points.length;i+=1){var pt=points[i],newPt={x:transform.xScale*pt.x+transform.scale01*pt.y+transform.dx,y:transform.scale10*pt.x+transform.yScale*pt.y+transform.dy,onCurve:pt.onCurve,lastPointOfContour:pt.lastPointOfContour};newPoints.push(newPt)}return newPoints}function getContours(points){for(var contours=[],currentContour=[],i=0;i<points.length;i+=1){var pt=points[i];currentContour.push(pt),pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}return check.argument(0===currentContour.length,"There are still points left in the current contour."),contours}function getPath(points){var p=new path.Path;if(!points)return p;for(var contours=getContours(points),i=0;i<contours.length;i+=1){var curvePt,realFirstPoint,contour=contours[i],firstPt=contour[0],lastPt=contour[contour.length-1];firstPt.onCurve?(curvePt=null,realFirstPoint=!0):(firstPt=lastPt.onCurve?lastPt:{x:(firstPt.x+lastPt.x)/2,y:(firstPt.y+lastPt.y)/2},curvePt=firstPt,realFirstPoint=!1),p.moveTo(firstPt.x,firstPt.y);for(var j=realFirstPoint?1:0;j<contour.length;j+=1){var pt=contour[j],prevPt=0===j?firstPt:contour[j-1];if(prevPt.onCurve&&pt.onCurve)p.lineTo(pt.x,pt.y);else if(prevPt.onCurve&&!pt.onCurve)curvePt=pt;else if(prevPt.onCurve||pt.onCurve){if(prevPt.onCurve||!pt.onCurve)throw new Error("Invalid state.");p.quadraticCurveTo(curvePt.x,curvePt.y,pt.x,pt.y),curvePt=null}else{var midPt={x:(prevPt.x+pt.x)/2,y:(prevPt.y+pt.y)/2};p.quadraticCurveTo(prevPt.x,prevPt.y,midPt.x,midPt.y),curvePt=pt}}firstPt!==lastPt&&(curvePt?p.quadraticCurveTo(curvePt.x,curvePt.y,firstPt.x,firstPt.y):p.lineTo(firstPt.x,firstPt.y))}return p.closePath(),p}function buildPath(glyphs,glyph){if(glyph.isComposite)for(var j=0;j<glyph.components.length;j+=1){var component=glyph.components[j],componentGlyph=glyphs.get(component.glyphIndex);if(componentGlyph.points){var transformedPoints=transformPoints(componentGlyph.points,component);glyph.points=glyph.points.concat(transformedPoints)}}return getPath(glyph.points)}function parseGlyfTable(data,start,loca,font){var i,glyphs=new glyphset.GlyphSet(font);for(i=0;i<loca.length-1;i+=1){var offset=loca[i],nextOffset=loca[i+1];offset!==nextOffset?glyphs.push(i,glyphset.ttfGlyphLoader(font,i,parseGlyph,data,start+offset,buildPath)):glyphs.push(i,glyphset.glyphLoader(font,i))}return glyphs}var check=_dereq_("../check"),glyphset=_dereq_("../glyphset"),parse=_dereq_("../parse"),path=_dereq_("../path");exports.parse=parseGlyfTable},{"../check":2,"../glyphset":7,"../parse":9,"../path":10}],15:[function(_dereq_,module,exports){"use strict";function parseTaggedListTable(data,start){for(var p=new parse.Parser(data,start),n=p.parseUShort(),list=[],i=0;n>i;i++)list[p.parseTag()]={offset:p.parseUShort()};return list}function parseCoverageTable(data,start){var p=new parse.Parser(data,start),format=p.parseUShort(),count=p.parseUShort();if(1===format)return p.parseUShortList(count);if(2===format){for(var coverage=[];count--;)for(var begin=p.parseUShort(),end=p.parseUShort(),index=p.parseUShort(),i=begin;end>=i;i++)coverage[index++]=i;return coverage}}function parseClassDefTable(data,start){var p=new parse.Parser(data,start),format=p.parseUShort();if(1===format){var startGlyph=p.parseUShort(),glyphCount=p.parseUShort(),classes=p.parseUShortList(glyphCount);return function(glyphID){return classes[glyphID-startGlyph]||0}}if(2===format){for(var rangeCount=p.parseUShort(),startGlyphs=[],endGlyphs=[],classValues=[],i=0;rangeCount>i;i++)startGlyphs[i]=p.parseUShort(),endGlyphs[i]=p.parseUShort(),classValues[i]=p.parseUShort();return function(glyphID){for(var l=0,r=startGlyphs.length-1;r>l;){var c=l+r+1>>1;glyphID<startGlyphs[c]?r=c-1:l=c}return startGlyphs[l]<=glyphID&&glyphID<=endGlyphs[l]?classValues[l]||0:0}}}function parsePairPosSubTable(data,start){var value1,value2,p=new parse.Parser(data,start),format=p.parseUShort(),coverageOffset=p.parseUShort(),coverage=parseCoverageTable(data,start+coverageOffset),valueFormat1=p.parseUShort(),valueFormat2=p.parseUShort();if(4===valueFormat1&&0===valueFormat2){var sharedPairSets={};if(1===format){for(var pairSetCount=p.parseUShort(),pairSet=[],pairSetOffsets=p.parseOffset16List(pairSetCount),firstGlyph=0;pairSetCount>firstGlyph;firstGlyph++){var pairSetOffset=pairSetOffsets[firstGlyph],sharedPairSet=sharedPairSets[pairSetOffset];if(!sharedPairSet){sharedPairSet={},p.relativeOffset=pairSetOffset;for(var pairValueCount=p.parseUShort();pairValueCount--;){var secondGlyph=p.parseUShort();valueFormat1&&(value1=p.parseShort()),valueFormat2&&(value2=p.parseShort()),sharedPairSet[secondGlyph]=value1}}pairSet[coverage[firstGlyph]]=sharedPairSet}return function(leftGlyph,rightGlyph){var pairs=pairSet[leftGlyph];return pairs?pairs[rightGlyph]:void 0}}if(2===format){for(var classDef1Offset=p.parseUShort(),classDef2Offset=p.parseUShort(),class1Count=p.parseUShort(),class2Count=p.parseUShort(),getClass1=parseClassDefTable(data,start+classDef1Offset),getClass2=parseClassDefTable(data,start+classDef2Offset),kerningMatrix=[],i=0;class1Count>i;i++)for(var kerningRow=kerningMatrix[i]=[],j=0;class2Count>j;j++)valueFormat1&&(value1=p.parseShort()),valueFormat2&&(value2=p.parseShort()),kerningRow[j]=value1;var covered={};for(i=0;i<coverage.length;i++)covered[coverage[i]]=1;return function(leftGlyph,rightGlyph){if(covered[leftGlyph]){var class1=getClass1(leftGlyph),class2=getClass2(rightGlyph),kerningRow=kerningMatrix[class1];return kerningRow?kerningRow[class2]:void 0}}}}}function parseLookupTable(data,start){var p=new parse.Parser(data,start),lookupType=p.parseUShort(),lookupFlag=p.parseUShort(),useMarkFilteringSet=16&lookupFlag,subTableCount=p.parseUShort(),subTableOffsets=p.parseOffset16List(subTableCount),table={lookupType:lookupType,lookupFlag:lookupFlag,markFilteringSet:useMarkFilteringSet?p.parseUShort():-1};if(2===lookupType){for(var subtables=[],i=0;subTableCount>i;i++)subtables.push(parsePairPosSubTable(data,start+subTableOffsets[i]));table.getKerningValue=function(leftGlyph,rightGlyph){for(var i=subtables.length;i--;){var value=subtables[i](leftGlyph,rightGlyph);if(void 0!==value)return value}return 0}}return table}function parseGposTable(data,start,font){var p=new parse.Parser(data,start),tableVersion=p.parseFixed();check.argument(1===tableVersion,"Unsupported GPOS table version."),parseTaggedListTable(data,start+p.parseUShort()),parseTaggedListTable(data,start+p.parseUShort());var lookupListOffset=p.parseUShort();p.relativeOffset=lookupListOffset;for(var lookupCount=p.parseUShort(),lookupTableOffsets=p.parseOffset16List(lookupCount),lookupListAbsoluteOffset=start+lookupListOffset,i=0;lookupCount>i;i++){var table=parseLookupTable(data,lookupListAbsoluteOffset+lookupTableOffsets[i]);2!==table.lookupType||font.getGposKerningValue||(font.getGposKerningValue=table.getKerningValue)}}var check=_dereq_("../check"),parse=_dereq_("../parse");exports.parse=parseGposTable},{"../check":2,"../parse":9}],16:[function(_dereq_,module,exports){"use strict";function parseHeadTable(data,start){var head={},p=new parse.Parser(data,start);return head.version=p.parseVersion(),head.fontRevision=Math.round(1e3*p.parseFixed())/1e3,head.checkSumAdjustment=p.parseULong(),head.magicNumber=p.parseULong(),check.argument(1594834165===head.magicNumber,"Font header has wrong magic number."),head.flags=p.parseUShort(),head.unitsPerEm=p.parseUShort(),head.created=p.parseLongDateTime(),head.modified=p.parseLongDateTime(),head.xMin=p.parseShort(),head.yMin=p.parseShort(),head.xMax=p.parseShort(),head.yMax=p.parseShort(),head.macStyle=p.parseUShort(),head.lowestRecPPEM=p.parseUShort(),head.fontDirectionHint=p.parseShort(),head.indexToLocFormat=p.parseShort(),head.glyphDataFormat=p.parseShort(),head}function makeHeadTable(options){return new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],options)}var check=_dereq_("../check"),parse=_dereq_("../parse"),table=_dereq_("../table");exports.parse=parseHeadTable,exports.make=makeHeadTable},{"../check":2,"../parse":9,"../table":11}],17:[function(_dereq_,module,exports){"use strict";function parseHheaTable(data,start){var hhea={},p=new parse.Parser(data,start);return hhea.version=p.parseVersion(),hhea.ascender=p.parseShort(),hhea.descender=p.parseShort(),hhea.lineGap=p.parseShort(),hhea.advanceWidthMax=p.parseUShort(),hhea.minLeftSideBearing=p.parseShort(),hhea.minRightSideBearing=p.parseShort(),hhea.xMaxExtent=p.parseShort(),hhea.caretSlopeRise=p.parseShort(),hhea.caretSlopeRun=p.parseShort(),hhea.caretOffset=p.parseShort(),p.relativeOffset+=8,hhea.metricDataFormat=p.parseShort(),hhea.numberOfHMetrics=p.parseUShort(),hhea}function makeHheaTable(options){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],options)}var parse=_dereq_("../parse"),table=_dereq_("../table");exports.parse=parseHheaTable,exports.make=makeHheaTable},{"../parse":9,"../table":11}],18:[function(_dereq_,module,exports){"use strict";function parseHmtxTable(data,start,numMetrics,numGlyphs,glyphs){for(var advanceWidth,leftSideBearing,p=new parse.Parser(data,start),i=0;numGlyphs>i;i+=1){numMetrics>i&&(advanceWidth=p.parseUShort(),leftSideBearing=p.parseShort());var glyph=glyphs.get(i);glyph.advanceWidth=advanceWidth,glyph.leftSideBearing=leftSideBearing}}function makeHmtxTable(glyphs){for(var t=new table.Table("hmtx",[]),i=0;i<glyphs.length;i+=1){var glyph=glyphs.get(i),advanceWidth=glyph.advanceWidth||0,leftSideBearing=glyph.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+i,type:"USHORT",value:advanceWidth}),t.fields.push({name:"leftSideBearing_"+i,type:"SHORT",value:leftSideBearing})}return t}var parse=_dereq_("../parse"),table=_dereq_("../table");exports.parse=parseHmtxTable,exports.make=makeHmtxTable},{"../parse":9,"../table":11}],19:[function(_dereq_,module,exports){"use strict";function parseKernTable(data,start){var pairs={},p=new parse.Parser(data,start),tableVersion=p.parseUShort();check.argument(0===tableVersion,"Unsupported kern table version."),p.skip("uShort",1);var subTableVersion=p.parseUShort();check.argument(0===subTableVersion,"Unsupported kern sub-table version."),p.skip("uShort",2);var nPairs=p.parseUShort();p.skip("uShort",3);for(var i=0;nPairs>i;i+=1){var leftIndex=p.parseUShort(),rightIndex=p.parseUShort(),value=p.parseShort();pairs[leftIndex+","+rightIndex]=value}return pairs}var check=_dereq_("../check"),parse=_dereq_("../parse");exports.parse=parseKernTable},{"../check":2,"../parse":9}],20:[function(_dereq_,module,exports){"use strict";function parseLocaTable(data,start,numGlyphs,shortVersion){for(var p=new parse.Parser(data,start),parseFn=shortVersion?p.parseUShort:p.parseULong,glyphOffsets=[],i=0;numGlyphs+1>i;i+=1){var glyphOffset=parseFn.call(p);shortVersion&&(glyphOffset*=2),glyphOffsets.push(glyphOffset)}return glyphOffsets}var parse=_dereq_("../parse");exports.parse=parseLocaTable},{"../parse":9}],21:[function(_dereq_,module,exports){"use strict";function parseMaxpTable(data,start){var maxp={},p=new parse.Parser(data,start);return maxp.version=p.parseVersion(),maxp.numGlyphs=p.parseUShort(),1===maxp.version&&(maxp.maxPoints=p.parseUShort(),maxp.maxContours=p.parseUShort(),maxp.maxCompositePoints=p.parseUShort(),maxp.maxCompositeContours=p.parseUShort(),maxp.maxZones=p.parseUShort(),maxp.maxTwilightPoints=p.parseUShort(),maxp.maxStorage=p.parseUShort(),maxp.maxFunctionDefs=p.parseUShort(),maxp.maxInstructionDefs=p.parseUShort(),maxp.maxStackElements=p.parseUShort(),maxp.maxSizeOfInstructions=p.parseUShort(),maxp.maxComponentElements=p.parseUShort(),maxp.maxComponentDepth=p.parseUShort()),maxp}function makeMaxpTable(numGlyphs){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:numGlyphs}])}var parse=_dereq_("../parse"),table=_dereq_("../table");exports.parse=parseMaxpTable,exports.make=makeMaxpTable},{"../parse":9,"../table":11}],22:[function(_dereq_,module,exports){"use strict";function parseNameTable(data,start){var name={},p=new parse.Parser(data,start);name.format=p.parseUShort();for(var count=p.parseUShort(),stringOffset=p.offset+p.parseUShort(),unknownCount=0,i=0;count>i;i++){var platformID=p.parseUShort(),encodingID=p.parseUShort(),languageID=p.parseUShort(),nameID=p.parseUShort(),property=nameTableNames[nameID],byteLength=p.parseUShort(),offset=p.parseUShort();if(3===platformID&&1===encodingID&&1033===languageID){for(var codePoints=[],length=byteLength/2,j=0;length>j;j++,offset+=2)codePoints[j]=parse.getShort(data,stringOffset+offset);var str=String.fromCharCode.apply(null,codePoints);property?name[property]=str:(unknownCount++,name["unknown"+unknownCount]=str)}}return 1===name.format&&(name.langTagCount=p.parseUShort()),name}function makeNameRecord(platformID,encodingID,languageID,nameID,length,offset){return new table.Table("NameRecord",[{name:"platformID",type:"USHORT",value:platformID},{name:"encodingID",type:"USHORT",value:encodingID},{name:"languageID",type:"USHORT",value:languageID},{name:"nameID",type:"USHORT",value:nameID},{name:"length",type:"USHORT",value:length},{name:"offset",type:"USHORT",value:offset}])}function addMacintoshNameRecord(t,recordID,s,offset){var stringBytes=encode.STRING(s);return t.records.push(makeNameRecord(1,0,0,recordID,stringBytes.length,offset)),t.strings.push(stringBytes),offset+=stringBytes.length}function addWindowsNameRecord(t,recordID,s,offset){var utf16Bytes=encode.UTF16(s);return t.records.push(makeNameRecord(3,1,1033,recordID,utf16Bytes.length,offset)),t.strings.push(utf16Bytes),offset+=utf16Bytes.length}function makeNameTable(options){var t=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);t.records=[],t.strings=[];var i,s,offset=0;for(i=0;i<nameTableNames.length;i+=1)void 0!==options[nameTableNames[i]]&&(s=options[nameTableNames[i]],offset=addMacintoshNameRecord(t,i,s,offset));for(i=0;i<nameTableNames.length;i+=1)void 0!==options[nameTableNames[i]]&&(s=options[nameTableNames[i]],offset=addWindowsNameRecord(t,i,s,offset));for(t.count=t.records.length,t.stringOffset=6+12*t.count,i=0;i<t.records.length;i+=1)t.fields.push({name:"record_"+i,type:"TABLE",value:t.records[i]});for(i=0;i<t.strings.length;i+=1)t.fields.push({name:"string_"+i,type:"LITERAL",value:t.strings[i]});return t}var encode=_dereq_("../types").encode,parse=_dereq_("../parse"),table=_dereq_("../table"),nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];exports.parse=parseNameTable,exports.make=makeNameTable},{"../parse":9,"../table":11,"../types":26}],23:[function(_dereq_,module,exports){"use strict";function getUnicodeRange(unicode){for(var i=0;i<unicodeRanges.length;i+=1){var range=unicodeRanges[i];if(unicode>=range.begin&&unicode<range.end)return i}return-1}function parseOS2Table(data,start){var os2={},p=new parse.Parser(data,start);os2.version=p.parseUShort(),os2.xAvgCharWidth=p.parseShort(),os2.usWeightClass=p.parseUShort(),os2.usWidthClass=p.parseUShort(),os2.fsType=p.parseUShort(),os2.ySubscriptXSize=p.parseShort(),os2.ySubscriptYSize=p.parseShort(),os2.ySubscriptXOffset=p.parseShort(),os2.ySubscriptYOffset=p.parseShort(),os2.ySuperscriptXSize=p.parseShort(),os2.ySuperscriptYSize=p.parseShort(),os2.ySuperscriptXOffset=p.parseShort(),os2.ySuperscriptYOffset=p.parseShort(),os2.yStrikeoutSize=p.parseShort(),os2.yStrikeoutPosition=p.parseShort(),os2.sFamilyClass=p.parseShort(),os2.panose=[];for(var i=0;10>i;i++)os2.panose[i]=p.parseByte();return os2.ulUnicodeRange1=p.parseULong(),os2.ulUnicodeRange2=p.parseULong(),os2.ulUnicodeRange3=p.parseULong(),os2.ulUnicodeRange4=p.parseULong(),os2.achVendID=String.fromCharCode(p.parseByte(),p.parseByte(),p.parseByte(),p.parseByte()),os2.fsSelection=p.parseUShort(),os2.usFirstCharIndex=p.parseUShort(),os2.usLastCharIndex=p.parseUShort(),os2.sTypoAscender=p.parseShort(),os2.sTypoDescender=p.parseShort(),os2.sTypoLineGap=p.parseShort(),os2.usWinAscent=p.parseUShort(),os2.usWinDescent=p.parseUShort(),os2.version>=1&&(os2.ulCodePageRange1=p.parseULong(),os2.ulCodePageRange2=p.parseULong()),os2.version>=2&&(os2.sxHeight=p.parseShort(),os2.sCapHeight=p.parseShort(),os2.usDefaultChar=p.parseUShort(),os2.usBreakChar=p.parseUShort(),os2.usMaxContent=p.parseUShort()),os2}function makeOS2Table(options){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],options)}var parse=_dereq_("../parse"),table=_dereq_("../table"),unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,
end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];exports.unicodeRanges=unicodeRanges,exports.getUnicodeRange=getUnicodeRange,exports.parse=parseOS2Table,exports.make=makeOS2Table},{"../parse":9,"../table":11}],24:[function(_dereq_,module,exports){"use strict";function parsePostTable(data,start){var i,post={},p=new parse.Parser(data,start);switch(post.version=p.parseVersion(),post.italicAngle=p.parseFixed(),post.underlinePosition=p.parseShort(),post.underlineThickness=p.parseShort(),post.isFixedPitch=p.parseULong(),post.minMemType42=p.parseULong(),post.maxMemType42=p.parseULong(),post.minMemType1=p.parseULong(),post.maxMemType1=p.parseULong(),post.version){case 1:post.names=encoding.standardNames.slice();break;case 2:for(post.numberOfGlyphs=p.parseUShort(),post.glyphNameIndex=new Array(post.numberOfGlyphs),i=0;i<post.numberOfGlyphs;i++)post.glyphNameIndex[i]=p.parseUShort();for(post.names=[],i=0;i<post.numberOfGlyphs;i++)if(post.glyphNameIndex[i]>=encoding.standardNames.length){var nameLength=p.parseChar();post.names.push(p.parseString(nameLength))}break;case 2.5:for(post.numberOfGlyphs=p.parseUShort(),post.offset=new Array(post.numberOfGlyphs),i=0;i<post.numberOfGlyphs;i++)post.offset[i]=p.parseChar()}return post}function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var encoding=_dereq_("../encoding"),parse=_dereq_("../parse"),table=_dereq_("../table");exports.parse=parsePostTable,exports.make=makePostTable},{"../encoding":4,"../parse":9,"../table":11}],25:[function(_dereq_,module,exports){"use strict";function log2(v){return Math.log(v)/Math.log(2)|0}function computeCheckSum(bytes){for(;bytes.length%4!==0;)bytes.push(0);for(var sum=0,i=0;i<bytes.length;i+=4)sum+=(bytes[i]<<24)+(bytes[i+1]<<16)+(bytes[i+2]<<8)+bytes[i+3];return sum%=Math.pow(2,32)}function makeTableRecord(tag,checkSum,offset,length){return new table.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==tag?tag:""},{name:"checkSum",type:"ULONG",value:void 0!==checkSum?checkSum:0},{name:"offset",type:"ULONG",value:void 0!==offset?offset:0},{name:"length",type:"ULONG",value:void 0!==length?length:0}])}function makeSfntTable(tables){var sfnt=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);sfnt.tables=tables,sfnt.numTables=tables.length;var highestPowerOf2=Math.pow(2,log2(sfnt.numTables));sfnt.searchRange=16*highestPowerOf2,sfnt.entrySelector=log2(highestPowerOf2),sfnt.rangeShift=16*sfnt.numTables-sfnt.searchRange;for(var recordFields=[],tableFields=[],offset=sfnt.sizeOf()+makeTableRecord().sizeOf()*sfnt.numTables;offset%4!==0;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0});for(var i=0;i<tables.length;i+=1){var t=tables[i];check.argument(4===t.tableName.length,"Table name"+t.tableName+" is invalid.");var tableLength=t.sizeOf(),tableRecord=makeTableRecord(t.tableName,computeCheckSum(t.encode()),offset,tableLength);for(recordFields.push({name:tableRecord.tag+" Table Record",type:"TABLE",value:tableRecord}),tableFields.push({name:t.tableName+" table",type:"TABLE",value:t}),offset+=tableLength,check.argument(!isNaN(offset),"Something went wrong calculating the offset.");offset%4!==0;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0})}return recordFields.sort(function(r1,r2){return r1.value.tag>r2.value.tag?1:-1}),sfnt.fields=sfnt.fields.concat(recordFields),sfnt.fields=sfnt.fields.concat(tableFields),sfnt}function metricsForChar(font,chars,notFoundMetrics){for(var i=0;i<chars.length;i+=1){var glyphIndex=font.charToGlyphIndex(chars[i]);if(glyphIndex>0){var glyph=font.glyphs.get(glyphIndex);return glyph.getMetrics()}}return notFoundMetrics}function average(vs){for(var sum=0,i=0;i<vs.length;i+=1)sum+=vs[i];return sum/vs.length}function fontToSfntTable(font){for(var firstCharIndex,xMins=[],yMins=[],xMaxs=[],yMaxs=[],advanceWidths=[],leftSideBearings=[],rightSideBearings=[],lastCharIndex=0,ulUnicodeRange1=0,ulUnicodeRange2=0,ulUnicodeRange3=0,ulUnicodeRange4=0,i=0;i<font.glyphs.length;i+=1){var glyph=font.glyphs.get(i),unicode=0|glyph.unicode;(firstCharIndex>unicode||null===firstCharIndex)&&(firstCharIndex=unicode),unicode>lastCharIndex&&(lastCharIndex=unicode);var position=os2.getUnicodeRange(unicode);if(32>position)ulUnicodeRange1|=1<<position;else if(64>position)ulUnicodeRange2|=1<<position-32;else if(96>position)ulUnicodeRange3|=1<<position-64;else{if(!(123>position))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");ulUnicodeRange4|=1<<position-96}if(".notdef"!==glyph.name){var metrics=glyph.getMetrics();xMins.push(metrics.xMin),yMins.push(metrics.yMin),xMaxs.push(metrics.xMax),yMaxs.push(metrics.yMax),leftSideBearings.push(metrics.leftSideBearing),rightSideBearings.push(metrics.rightSideBearing),advanceWidths.push(glyph.advanceWidth)}}var globals={xMin:Math.min.apply(null,xMins),yMin:Math.min.apply(null,yMins),xMax:Math.max.apply(null,xMaxs),yMax:Math.max.apply(null,yMaxs),advanceWidthMax:Math.max.apply(null,advanceWidths),advanceWidthAvg:average(advanceWidths),minLeftSideBearing:Math.min.apply(null,leftSideBearings),maxLeftSideBearing:Math.max.apply(null,leftSideBearings),minRightSideBearing:Math.min.apply(null,rightSideBearings)};globals.ascender=void 0!==font.ascender?font.ascender:globals.yMax,globals.descender=void 0!==font.descender?font.descender:globals.yMin;var headTable=head.make({unitsPerEm:font.unitsPerEm,xMin:globals.xMin,yMin:globals.yMin,xMax:globals.xMax,yMax:globals.yMax}),hheaTable=hhea.make({ascender:globals.ascender,descender:globals.descender,advanceWidthMax:globals.advanceWidthMax,minLeftSideBearing:globals.minLeftSideBearing,minRightSideBearing:globals.minRightSideBearing,xMaxExtent:globals.maxLeftSideBearing+(globals.xMax-globals.xMin),numberOfHMetrics:font.glyphs.length}),maxpTable=maxp.make(font.glyphs.length),os2Table=os2.make({xAvgCharWidth:Math.round(globals.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:firstCharIndex,usLastCharIndex:lastCharIndex,ulUnicodeRange1:ulUnicodeRange1,ulUnicodeRange2:ulUnicodeRange2,ulUnicodeRange3:ulUnicodeRange3,ulUnicodeRange4:ulUnicodeRange4,sTypoAscender:globals.ascender,sTypoDescender:globals.descender,sTypoLineGap:0,usWinAscent:globals.ascender,usWinDescent:-globals.descender,sxHeight:metricsForChar(font,"xyvw",{yMax:0}).yMax,sCapHeight:metricsForChar(font,"HIKLEFJMNTZBDPRAGOQSUVWXY",globals).yMax,usBreakChar:font.hasChar(" ")?32:0}),hmtxTable=hmtx.make(font.glyphs),cmapTable=cmap.make(font.glyphs),fullName=font.familyName+" "+font.styleName,postScriptName=font.familyName.replace(/\s/g,"")+"-"+font.styleName,nameTable=_name.make({copyright:font.copyright,fontFamily:font.familyName,fontSubfamily:font.styleName,uniqueID:font.manufacturer+":"+fullName,fullName:fullName,version:font.version,postScriptName:postScriptName,trademark:font.trademark,manufacturer:font.manufacturer,designer:font.designer,description:font.description,manufacturerURL:font.manufacturerURL,designerURL:font.designerURL,license:font.license,licenseURL:font.licenseURL,preferredFamily:font.familyName,preferredSubfamily:font.styleName}),postTable=post.make(),cffTable=cff.make(font.glyphs,{version:font.version,fullName:fullName,familyName:font.familyName,weightName:font.styleName,postScriptName:postScriptName,unitsPerEm:font.unitsPerEm}),tables=[headTable,hheaTable,maxpTable,os2Table,nameTable,cmapTable,postTable,cffTable,hmtxTable],sfntTable=makeSfntTable(tables),bytes=sfntTable.encode(),checkSum=computeCheckSum(bytes),tableFields=sfntTable.fields,checkSumAdjusted=!1;for(i=0;i<tableFields.length;i+=1)if("head table"===tableFields[i].name){tableFields[i].value.checkSumAdjustment=2981146554-checkSum,checkSumAdjusted=!0;break}if(!checkSumAdjusted)throw new Error("Could not find head table with checkSum to adjust.");return sfntTable}var check=_dereq_("../check"),table=_dereq_("../table"),cmap=_dereq_("./cmap"),cff=_dereq_("./cff"),head=_dereq_("./head"),hhea=_dereq_("./hhea"),hmtx=_dereq_("./hmtx"),maxp=_dereq_("./maxp"),_name=_dereq_("./name"),os2=_dereq_("./os2"),post=_dereq_("./post");exports.computeCheckSum=computeCheckSum,exports.make=makeSfntTable,exports.fontToTable=fontToSfntTable},{"../check":2,"../table":11,"./cff":12,"./cmap":13,"./head":16,"./hhea":17,"./hmtx":18,"./maxp":21,"./name":22,"./os2":23,"./post":24}],26:[function(_dereq_,module,exports){"use strict";function constant(v){return function(){return v}}var check=_dereq_("./check"),LIMIT16=32768,LIMIT32=2147483648,decode={},encode={},sizeOf={};encode.BYTE=function(v){return check.argument(v>=0&&255>=v,"Byte value should be between 0 and 255."),[v]},sizeOf.BYTE=constant(1),encode.CHAR=function(v){return[v.charCodeAt(0)]},sizeOf.BYTE=constant(1),encode.CHARARRAY=function(v){for(var b=[],i=0;i<v.length;i+=1)b.push(v.charCodeAt(i));return b},sizeOf.CHARARRAY=function(v){return v.length},encode.USHORT=function(v){return[v>>8&255,255&v]},sizeOf.USHORT=constant(2),encode.SHORT=function(v){return v>=LIMIT16&&(v=-(2*LIMIT16-v)),[v>>8&255,255&v]},sizeOf.SHORT=constant(2),encode.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},sizeOf.UINT24=constant(3),encode.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.ULONG=constant(4),encode.LONG=function(v){return v>=LIMIT32&&(v=-(2*LIMIT32-v)),[v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.LONG=constant(4),encode.FIXED=encode.ULONG,sizeOf.FIXED=sizeOf.ULONG,encode.FWORD=encode.SHORT,sizeOf.FWORD=sizeOf.SHORT,encode.UFWORD=encode.USHORT,sizeOf.UFWORD=sizeOf.USHORT,encode.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},sizeOf.LONGDATETIME=constant(8),encode.TAG=function(v){return check.argument(4===v.length,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},sizeOf.TAG=constant(4),encode.Card8=encode.BYTE,sizeOf.Card8=sizeOf.BYTE,encode.Card16=encode.USHORT,sizeOf.Card16=sizeOf.USHORT,encode.OffSize=encode.BYTE,sizeOf.OffSize=sizeOf.BYTE,encode.SID=encode.USHORT,sizeOf.SID=sizeOf.USHORT,encode.NUMBER=function(v){return v>=-107&&107>=v?[v+139]:v>=108&&1131>=v?(v-=108,[(v>>8)+247,255&v]):v>=-1131&&-108>=v?(v=-v-108,[(v>>8)+251,255&v]):v>=-32768&&32767>=v?encode.NUMBER16(v):encode.NUMBER32(v)},sizeOf.NUMBER=function(v){return encode.NUMBER(v).length},encode.NUMBER16=function(v){return[28,v>>8&255,255&v]},sizeOf.NUMBER16=constant(2),encode.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.NUMBER32=constant(4),encode.REAL=function(v){var value=v.toString(),m=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(value);if(m){var epsilon=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length));value=(Math.round(v*epsilon)/epsilon).toString()}var i,ii,nibbles="";for(i=0,ii=value.length;ii>i;i+=1){var c=value[i];nibbles+="e"===c?"-"===value[++i]?"c":"b":"."===c?"a":"-"===c?"e":c}nibbles+=1&nibbles.length?"f":"ff";var out=[30];for(i=0,ii=nibbles.length;ii>i;i+=2)out.push(parseInt(nibbles.substr(i,2),16));return out},sizeOf.REAL=function(v){return encode.REAL(v).length},encode.NAME=encode.CHARARRAY,sizeOf.NAME=sizeOf.CHARARRAY,encode.STRING=encode.CHARARRAY,sizeOf.STRING=sizeOf.CHARARRAY,encode.UTF16=function(v){for(var b=[],i=0;i<v.length;i+=1)b.push(0),b.push(v.charCodeAt(i));return b},sizeOf.UTF16=function(v){return 2*v.length},encode.INDEX=function(l){var i,offset=1,offsets=[offset],data=[],dataSize=0;for(i=0;i<l.length;i+=1){var v=encode.OBJECT(l[i]);Array.prototype.push.apply(data,v),dataSize+=v.length,offset+=v.length,offsets.push(offset)}if(0===data.length)return[0,0];var encodedOffsets=[],offSize=1+Math.floor(Math.log(dataSize)/Math.log(2))/8|0,offsetEncoder=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][offSize];for(i=0;i<offsets.length;i+=1){var encodedOffset=offsetEncoder(offsets[i]);Array.prototype.push.apply(encodedOffsets,encodedOffset)}return Array.prototype.concat(encode.Card16(l.length),encode.OffSize(offSize),encodedOffsets,data)},sizeOf.INDEX=function(v){return encode.INDEX(v).length},encode.DICT=function(m){for(var d=[],keys=Object.keys(m),length=keys.length,i=0;length>i;i+=1){var k=parseInt(keys[i],0),v=m[k];d=d.concat(encode.OPERAND(v.value,v.type)),d=d.concat(encode.OPERATOR(k))}return d},sizeOf.DICT=function(m){return encode.DICT(m).length},encode.OPERATOR=function(v){return 1200>v?[v]:[12,v-1200]},encode.OPERAND=function(v,type){var d=[];if(Array.isArray(type))for(var i=0;i<type.length;i+=1)check.argument(v.length===type.length,"Not enough arguments given for type"+type),d=d.concat(encode.OPERAND(v[i],type[i]));else if("SID"===type)d=d.concat(encode.NUMBER(v));else if("offset"===type)d=d.concat(encode.NUMBER32(v));else if("number"===type)d=d.concat(encode.NUMBER(v));else{if("real"!==type)throw new Error("Unknown operand type "+type);d=d.concat(encode.REAL(v))}return d},encode.OP=encode.BYTE,sizeOf.OP=sizeOf.BYTE;var wmm="function"==typeof WeakMap&&new WeakMap;encode.CHARSTRING=function(ops){if(wmm&&wmm.has(ops))return wmm.get(ops);for(var d=[],length=ops.length,i=0;length>i;i+=1){var op=ops[i];d=d.concat(encode[op.type](op.value))}return wmm&&wmm.set(ops,d),d},sizeOf.CHARSTRING=function(ops){return encode.CHARSTRING(ops).length},encode.OBJECT=function(v){var encodingFunction=encode[v.type];return check.argument(void 0!==encodingFunction,"No encoding function for type "+v.type),encodingFunction(v.value)},encode.TABLE=function(table){for(var d=[],length=table.fields.length,i=0;length>i;i+=1){var field=table.fields[i],encodingFunction=encode[field.type];check.argument(void 0!==encodingFunction,"No encoding function for field type "+field.type);var value=table[field.name];void 0===value&&(value=field.value);var bytes=encodingFunction(value);d=d.concat(bytes)}return d},encode.LITERAL=function(v){return v},sizeOf.LITERAL=function(v){return v.length},exports.decode=decode,exports.encode=encode,exports.sizeOf=sizeOf},{"./check":2}],27:[function(_dereq_,module,exports){!function(name,context,definition){"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof define&&define.amd?define(definition):context[name]=definition()}("reqwest",this,function(){function succeed(r){var protocol=protocolRe.exec(r.url);return protocol=protocol&&protocol[1]||window.location.protocol,httpsRe.test(protocol)?twoHundo.test(r.request.status):!!r.request.response}function handleReadyState(r,success,error){return function(){return r._aborted?error(r.request):r._timedOut?error(r.request,"Request is aborted: timeout"):void(r.request&&4==r.request[readyState]&&(r.request.onreadystatechange=noop,succeed(r)?success(r.request):error(r.request)))}}function setHeaders(http,o){var h,headers=o.headers||{};headers.Accept=headers.Accept||defaultHeaders.accept[o.type]||defaultHeaders.accept["*"];var isAFormData="function"==typeof FormData&&o.data instanceof FormData;o.crossOrigin||headers[requestedWith]||(headers[requestedWith]=defaultHeaders.requestedWith),headers[contentType]||isAFormData||(headers[contentType]=o.contentType||defaultHeaders.contentType);for(h in headers)headers.hasOwnProperty(h)&&"setRequestHeader"in http&&http.setRequestHeader(h,headers[h])}function setCredentials(http,o){"undefined"!=typeof o.withCredentials&&"undefined"!=typeof http.withCredentials&&(http.withCredentials=!!o.withCredentials)}function generalCallback(data){lastValue=data}function urlappend(url,s){return url+(/\?/.test(url)?"&":"?")+s}function handleJsonp(o,fn,err,url){var reqId=uniqid++,cbkey=o.jsonpCallback||"callback",cbval=o.jsonpCallbackName||reqwest.getcallbackPrefix(reqId),cbreg=new RegExp("((^|\\?|&)"+cbkey+")=([^&]+)"),match=url.match(cbreg),script=doc.createElement("script"),loaded=0,isIE10=-1!==navigator.userAgent.indexOf("MSIE 10.0");return match?"?"===match[3]?url=url.replace(cbreg,"$1="+cbval):cbval=match[3]:url=urlappend(url,cbkey+"="+cbval),win[cbval]=generalCallback,script.type="text/javascript",script.src=url,script.async=!0,"undefined"==typeof script.onreadystatechange||isIE10||(script.htmlFor=script.id="_reqwest_"+reqId),script.onload=script.onreadystatechange=function(){return script[readyState]&&"complete"!==script[readyState]&&"loaded"!==script[readyState]||loaded?!1:(script.onload=script.onreadystatechange=null,script.onclick&&script.onclick(),fn(lastValue),lastValue=void 0,head.removeChild(script),void(loaded=1))},head.appendChild(script),{abort:function(){script.onload=script.onreadystatechange=null,err({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(script),loaded=1}}}function getRequest(fn,err){var http,o=this.o,method=(o.method||"GET").toUpperCase(),url="string"==typeof o?o:o.url,data=o.processData!==!1&&o.data&&"string"!=typeof o.data?reqwest.toQueryString(o.data):o.data||null,sendWait=!1;return"jsonp"!=o.type&&"GET"!=method||!data||(url=urlappend(url,data),data=null),"jsonp"==o.type?handleJsonp(o,fn,err,url):(http=o.xhr&&o.xhr(o)||xhr(o),http.open(method,url,o.async===!1?!1:!0),setHeaders(http,o),setCredentials(http,o),win[xDomainRequest]&&http instanceof win[xDomainRequest]?(http.onload=fn,http.onerror=err,http.onprogress=function(){},sendWait=!0):http.onreadystatechange=handleReadyState(this,fn,err),o.before&&o.before(http),sendWait?setTimeout(function(){http.send(data)},200):http.send(data),http)}function Reqwest(o,fn){this.o=o,this.fn=fn,init.apply(this,arguments)}function setType(header){return header.match("json")?"json":header.match("javascript")?"js":header.match("text")?"html":header.match("xml")?"xml":void 0}function init(o,fn){function complete(resp){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(resp)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(resp,msg,t){for(resp=self.request,self._responseArgs.resp=resp,self._responseArgs.msg=msg,self._responseArgs.t=t,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(resp,msg,t);complete(resp)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(o,fn){return new Reqwest(o,fn)}function normalize(s){return s?s.replace(/\r?\n/g,"\r\n"):""}function serial(el,cb){var ch,ra,val,i,n=el.name,t=el.tagName.toLowerCase(),optCb=function(o){o&&!o.disabled&&cb(n,normalize(o.attributes.value&&o.attributes.value.specified?o.value:o.text))};if(!el.disabled&&n)switch(t){case"input":/reset|button|image|file/i.test(el.type)||(ch=/checkbox/i.test(el.type),ra=/radio/i.test(el.type),val=el.value,(!(ch||ra)||el.checked)&&cb(n,normalize(ch&&""===val?"on":val)));break;case"textarea":cb(n,normalize(el.value));break;case"select":if("select-one"===el.type.toLowerCase())optCb(el.selectedIndex>=0?el.options[el.selectedIndex]:null);else for(i=0;el.length&&i<el.length;i++)el.options[i].selected&&optCb(el.options[i])}}function eachFormElement(){var e,i,cb=this,serializeSubtags=function(e,tags){var i,j,fa;for(i=0;i<tags.length;i++)for(fa=e[byTag](tags[i]),j=0;j<fa.length;j++)serial(fa[j],cb)};for(i=0;i<arguments.length;i++)e=arguments[i],/input|select|textarea/i.test(e.tagName)&&serial(e,cb),serializeSubtags(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var hash={};return eachFormElement.apply(function(name,value){name in hash?(hash[name]&&!isArray(hash[name])&&(hash[name]=[hash[name]]),hash[name].push(value)):hash[name]=value},arguments),hash}function buildParams(prefix,obj,traditional,add){var name,i,v,rbracket=/\[\]$/;if(isArray(obj))for(i=0;obj&&i<obj.length;i++)v=obj[i],traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add);else if(obj&&"[object Object]"===obj.toString())for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(o){if(o.crossOrigin===!0){var xhr=win[xmlHttpRequest]?new XMLHttpRequest:null;if(xhr&&"withCredentials"in xhr)return xhr;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(data){return data}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(success,fail){return success=success||function(){},fail=fail||function(){},this._fulfilled?this._responseArgs.resp=success(this._responseArgs.resp):this._erred?fail(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(success),this._errorHandlers.push(fail)),this},always:function(fn){return this._fulfilled||this._erred?fn(this._responseArgs.resp):this._completeHandlers.push(fn),this},fail:function(fn){return this._erred?fn(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(fn),this},"catch":function(fn){return this.fail(fn)}},reqwest.serializeArray=function(){var arr=[];return eachFormElement.apply(function(name,value){arr.push({name:name,value:value})},arguments),arr},reqwest.serialize=function(){if(0===arguments.length)return"";var opt,fn,args=Array.prototype.slice.call(arguments,0);return opt=args.pop(),opt&&opt.nodeType&&args.push(opt)&&(opt=null),opt&&(opt=opt.type),fn="map"==opt?serializeHash:"array"==opt?reqwest.serializeArray:serializeQueryString,fn.apply(null,args)},reqwest.toQueryString=function(o,trad){var prefix,i,traditional=trad||!1,s=[],enc=encodeURIComponent,add=function(key,value){value="function"==typeof value?value():null==value?"":value,s[s.length]=enc(key)+"="+enc(value)};if(isArray(o))for(i=0;o&&i<o.length;i++)add(o[i].name,o[i].value);else for(prefix in o)o.hasOwnProperty(prefix)&&buildParams(prefix,o[prefix],traditional,add);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(o,fn){return o&&(o.type&&(o.method=o.type)&&delete o.type,o.dataType&&(o.type=o.dataType),o.jsonpCallback&&(o.jsonpCallbackName=o.jsonpCallback)&&delete o.jsonpCallback,o.jsonp&&(o.jsonpCallback=o.jsonp)),new Reqwest(o,fn)},reqwest.ajaxSetup=function(options){options=options||{};for(var k in options)globalSetupOptions[k]=options[k]},reqwest})},{}],28:[function(_dereq_,module){"use strict";var p5=_dereq_("./core/core");_dereq_("./color/p5.Color"),_dereq_("./core/p5.Element"),_dereq_("./typography/p5.Font"),_dereq_("./core/p5.Graphics"),_dereq_("./core/p5.Renderer2D"),_dereq_("./image/p5.Image"),_dereq_("./math/p5.Vector"),_dereq_("./io/p5.TableRow"),_dereq_("./io/p5.Table"),_dereq_("./io/p5.XML"),_dereq_("./color/creating_reading"),_dereq_("./color/setting"),_dereq_("./core/constants"),_dereq_("./utilities/conversion"),_dereq_("./utilities/array_functions"),_dereq_("./utilities/string_functions"),_dereq_("./core/environment"),_dereq_("./image/image"),_dereq_("./image/loading_displaying"),_dereq_("./image/pixels"),_dereq_("./io/files"),_dereq_("./events/keyboard"),_dereq_("./events/acceleration"),_dereq_("./events/mouse"),_dereq_("./utilities/time_date"),_dereq_("./events/touch"),_dereq_("./math/math"),_dereq_("./math/calculation"),_dereq_("./math/random"),_dereq_("./math/noise"),_dereq_("./math/trigonometry"),_dereq_("./core/rendering"),_dereq_("./core/2d_primitives"),_dereq_("./core/attributes"),_dereq_("./core/curves"),_dereq_("./core/vertex"),_dereq_("./core/structure"),_dereq_("./core/transform"),_dereq_("./typography/attributes"),_dereq_("./typography/loading_displaying"),_dereq_("./webgl/p5.RendererGL"),_dereq_("./webgl/p5.Geometry"),_dereq_("./webgl/p5.RendererGL.Retained"),_dereq_("./webgl/p5.RendererGL.Immediate"),_dereq_("./webgl/primitives"),_dereq_("./webgl/loading"),_dereq_("./webgl/p5.Matrix"),_dereq_("./webgl/material"),_dereq_("./webgl/light"),_dereq_("./webgl/shader"),_dereq_("./webgl/camera"),_dereq_("./webgl/interaction");var _globalInit=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!p5.instance&&new p5};"complete"===document.readyState?_globalInit():window.addEventListener("load",_globalInit,!1),module.exports=p5},{"./color/creating_reading":30,"./color/p5.Color":31,"./color/setting":32,"./core/2d_primitives":33,"./core/attributes":34,"./core/constants":36,"./core/core":37,"./core/curves":38,"./core/environment":39,"./core/p5.Element":41,"./core/p5.Graphics":42,"./core/p5.Renderer2D":44,"./core/rendering":45,"./core/structure":47,"./core/transform":48,"./core/vertex":49,"./events/acceleration":50,"./events/keyboard":51,"./events/mouse":52,"./events/touch":53,"./image/image":55,"./image/loading_displaying":56,"./image/p5.Image":57,"./image/pixels":58,"./io/files":59,"./io/p5.Table":60,"./io/p5.TableRow":61,"./io/p5.XML":62,"./math/calculation":63,"./math/math":64,"./math/noise":65,"./math/p5.Vector":66,"./math/random":68,"./math/trigonometry":69,"./typography/attributes":70,"./typography/loading_displaying":71,"./typography/p5.Font":72,"./utilities/array_functions":73,"./utilities/conversion":74,"./utilities/string_functions":75,"./utilities/time_date":76,"./webgl/camera":77,"./webgl/interaction":78,"./webgl/light":79,"./webgl/loading":80,"./webgl/material":81,"./webgl/p5.Geometry":82,"./webgl/p5.Matrix":83,"./webgl/p5.RendererGL":86,"./webgl/p5.RendererGL.Immediate":84,"./webgl/p5.RendererGL.Retained":85,"./webgl/primitives":87,"./webgl/shader":88}],29:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.ColorConversion={},p5.ColorConversion._hsbaToHSLA=function(hsba){var hue=hsba[0],sat=hsba[1],val=hsba[2],li=(2-sat)*val/2;return 0!==li&&(1===li?sat=0:.5>li?sat/=2-sat:sat=sat*val/(2-2*li)),[hue,sat,li,hsba[3]]},p5.ColorConversion._hsbaToRGBA=function(hsba){var hue=6*hsba[0],sat=hsba[1],val=hsba[2],RGBA=[];if(0===sat)RGBA=[val,val,val,hsba[3]];else{var red,green,blue,sector=Math.floor(hue),tint1=val*(1-sat),tint2=val*(1-sat*(hue-sector)),tint3=val*(1-sat*(1+sector-hue));1===sector?(red=tint2,green=val,blue=tint1):2===sector?(red=tint1,green=val,blue=tint3):3===sector?(red=tint1,green=tint2,blue=val):4===sector?(red=tint3,green=tint1,blue=val):5===sector?(red=val,green=tint1,blue=tint2):(red=val,green=tint3,blue=tint1),RGBA=[red,green,blue,hsba[3]]}return RGBA},p5.ColorConversion._hslaToHSBA=function(hsla){var val,hue=hsla[0],sat=hsla[1],li=hsla[2];return val=.5>li?(1+sat)*li:li+sat-li*sat,sat=2*(val-li)/val,[hue,sat,val,hsla[3]]},p5.ColorConversion._hslaToRGBA=function(hsla){var hue=6*hsla[0],sat=hsla[1],li=hsla[2],RGBA=[];if(0===sat)RGBA=[li,li,li,hsla[3]];else{var val;val=.5>li?(1+sat)*li:li+sat-li*sat;var zest=2*li-val,hzvToRGB=function(hue,zest,val){return 0>hue?hue+=6:hue>=6&&(hue-=6),1>hue?zest+(val-zest)*hue:3>hue?val:4>hue?zest+(val-zest)*(4-hue):zest};RGBA=[hzvToRGB(hue+2,zest,val),hzvToRGB(hue,zest,val),hzvToRGB(hue-2,zest,val),hsla[3]]}return RGBA},p5.ColorConversion._rgbaToHSBA=function(rgba){var hue,sat,red=rgba[0],green=rgba[1],blue=rgba[2],val=Math.max(red,green,blue),chroma=val-Math.min(red,green,blue);return 0===chroma?(hue=0,sat=0):(sat=chroma/val,red===val?hue=(green-blue)/chroma:green===val?hue=2+(blue-red)/chroma:blue===val&&(hue=4+(red-green)/chroma),0>hue?hue+=6:hue>=6&&(hue-=6)),[hue/6,sat,val,rgba[3]]},p5.ColorConversion._rgbaToHSLA=function(rgba){var hue,sat,red=rgba[0],green=rgba[1],blue=rgba[2],val=Math.max(red,green,blue),min=Math.min(red,green,blue),li=val+min,chroma=val-min;return 0===chroma?(hue=0,sat=0):(sat=1>li?chroma/li:chroma/(2-li),red===val?hue=(green-blue)/chroma:green===val?hue=2+(blue-red)/chroma:blue===val&&(hue=4+(red-green)/chroma),0>hue?hue+=6:hue>=6&&(hue-=6)),[hue/6,sat,li/2,rgba[3]]},module.exports=p5.ColorConversion},{"../core/core":37}],30:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),constants=_dereq_("../core/constants");_dereq_("./p5.Color"),p5.prototype.alpha=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getAlpha();throw new Error("Needs p5.Color or pixel array as argument.")},p5.prototype.blue=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getBlue();throw new Error("Needs p5.Color or pixel array as argument.")},p5.prototype.brightness=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getBrightness();throw new Error("Needs p5.Color or pixel array as argument.")},p5.prototype.color=function(){
return arguments[0]instanceof p5.Color?arguments[0]:arguments[0]instanceof Array?this instanceof p5.Renderer?new p5.Color(this,arguments[0]):new p5.Color(this._renderer,arguments[0]):this instanceof p5.Renderer?new p5.Color(this,arguments):new p5.Color(this._renderer,arguments)},p5.prototype.green=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getGreen();throw new Error("Needs p5.Color or pixel array as argument.")},p5.prototype.hue=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getHue();throw new Error("Needs p5.Color or pixel array as argument.")},p5.prototype.lerpColor=function(c1,c2,amt){var l0,l1,l2,l3,fromArray,toArray,mode=this._renderer._colorMode,maxes=this._renderer._colorMaxes;if(mode===constants.RGB)fromArray=c1.levels.map(function(level){return level/255}),toArray=c2.levels.map(function(level){return level/255});else if(mode===constants.HSB)c1._getBrightness(),c2._getBrightness(),fromArray=c1.hsba,toArray=c2.hsba;else{if(mode!==constants.HSL)throw new Error(mode+"cannot be used for interpolation.");c1._getLightness(),c2._getLightness(),fromArray=c1.hsla,toArray=c2.hsla}return amt=Math.max(Math.min(amt,1),0),l0=this.lerp(fromArray[0],toArray[0],amt),l1=this.lerp(fromArray[1],toArray[1],amt),l2=this.lerp(fromArray[2],toArray[2],amt),l3=this.lerp(fromArray[3],toArray[3],amt),l0*=maxes[mode][0],l1*=maxes[mode][1],l2*=maxes[mode][2],l3*=maxes[mode][3],this.color(l0,l1,l2,l3)},p5.prototype.lightness=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getLightness();throw new Error("Needs p5.Color or pixel array as argument.")},p5.prototype.red=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getRed();throw new Error("Needs p5.Color or pixel array as argument.")},p5.prototype.saturation=function(c){if(c instanceof p5.Color||c instanceof Array)return this.color(c)._getSaturation();throw new Error("Needs p5.Color or pixel array as argument.")},module.exports=p5},{"../core/constants":36,"../core/core":37,"./p5.Color":31}],31:[function(_dereq_,module){var p5=_dereq_("../core/core"),constants=_dereq_("../core/constants"),color_conversion=_dereq_("./color_conversion");p5.Color=function(renderer,vals){if(this.mode=renderer._colorMode,this.maxes=renderer._colorMaxes,this.mode!==constants.RGB&&this.mode!==constants.HSL&&this.mode!==constants.HSB)throw new Error(this.mode+" is an invalid colorMode.");return this._array=p5.Color._parseInputs.apply(renderer,vals),this.levels=this._array.map(function(level){return Math.round(255*level)}),this},p5.Color.prototype.toString=function(){var a=this.levels,alpha=this._array[3];return"rgba("+a[0]+","+a[1]+","+a[2]+","+alpha+")"},p5.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},p5.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[constants.RGB][2]},p5.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=color_conversion._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[constants.HSB][2]},p5.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[constants.RGB][1]},p5.Color.prototype._getHue=function(){return this.mode===constants.HSB?(this.hsba||(this.hsba=color_conversion._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[constants.HSB][0]):(this.hsla||(this.hsla=color_conversion._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[constants.HSL][0])},p5.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=color_conversion._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[constants.HSL][2]},p5.Color.prototype._getRed=function(){return this._array[0]*this.maxes[constants.RGB][0]},p5.Color.prototype._getSaturation=function(){return this.mode===constants.HSB?(this.hsba||(this.hsba=color_conversion._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[constants.HSB][1]):(this.hsla||(this.hsla=color_conversion._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[constants.HSL][1])};var namedColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},WHITESPACE=/\s*/,INTEGER=/(\d{1,3})/,DECIMAL=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,PERCENT=new RegExp(DECIMAL.source+"%"),colorPatterns={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",INTEGER.source,",",INTEGER.source,",",INTEGER.source,"\\)$"].join(WHITESPACE.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",PERCENT.source,",",PERCENT.source,",",PERCENT.source,"\\)$"].join(WHITESPACE.source),"i"),RGBA:new RegExp(["^rgba\\(",INTEGER.source,",",INTEGER.source,",",INTEGER.source,",",DECIMAL.source,"\\)$"].join(WHITESPACE.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",PERCENT.source,",",PERCENT.source,",",PERCENT.source,",",DECIMAL.source,"\\)$"].join(WHITESPACE.source),"i"),HSL:new RegExp(["^hsl\\(",INTEGER.source,",",PERCENT.source,",",PERCENT.source,"\\)$"].join(WHITESPACE.source),"i"),HSLA:new RegExp(["^hsla\\(",INTEGER.source,",",PERCENT.source,",",PERCENT.source,",",DECIMAL.source,"\\)$"].join(WHITESPACE.source),"i"),HSB:new RegExp(["^hsb\\(",INTEGER.source,",",PERCENT.source,",",PERCENT.source,"\\)$"].join(WHITESPACE.source),"i"),HSBA:new RegExp(["^hsba\\(",INTEGER.source,",",PERCENT.source,",",PERCENT.source,",",DECIMAL.source,"\\)$"].join(WHITESPACE.source),"i")};p5.Color._parseInputs=function(){var numArgs=arguments.length,mode=this._colorMode,maxes=this._colorMaxes,results=[];if(numArgs>=3)return results[0]=arguments[0]/maxes[mode][0],results[1]=arguments[1]/maxes[mode][1],results[2]=arguments[2]/maxes[mode][2],results[3]="number"==typeof arguments[3]?arguments[3]/maxes[mode][3]:1,results=results.map(function(value){return Math.max(Math.min(value,1),0)}),mode===constants.HSL?color_conversion._hslaToRGBA(results):mode===constants.HSB?color_conversion._hsbaToRGBA(results):results;if(1===numArgs&&"string"==typeof arguments[0]){var str=arguments[0].trim().toLowerCase();if(namedColors[str])return p5.Color._parseInputs.apply(this,[namedColors[str]]);if(colorPatterns.HEX3.test(str))return results=colorPatterns.HEX3.exec(str).slice(1).map(function(color){return parseInt(color+color,16)/255}),results[3]=1,results;if(colorPatterns.HEX6.test(str))return results=colorPatterns.HEX6.exec(str).slice(1).map(function(color){return parseInt(color,16)/255}),results[3]=1,results;if(colorPatterns.RGB.test(str))return results=colorPatterns.RGB.exec(str).slice(1).map(function(color){return color/255}),results[3]=1,results;if(colorPatterns.RGB_PERCENT.test(str))return results=colorPatterns.RGB_PERCENT.exec(str).slice(1).map(function(color){return parseFloat(color)/100}),results[3]=1,results;if(colorPatterns.RGBA.test(str))return results=colorPatterns.RGBA.exec(str).slice(1).map(function(color,idx){return 3===idx?parseFloat(color):color/255});if(colorPatterns.RGBA_PERCENT.test(str))return results=colorPatterns.RGBA_PERCENT.exec(str).slice(1).map(function(color,idx){return 3===idx?parseFloat(color):parseFloat(color)/100});if(colorPatterns.HSL.test(str)?(results=colorPatterns.HSL.exec(str).slice(1).map(function(color,idx){return 0===idx?parseInt(color,10)/360:parseInt(color,10)/100}),results[3]=1):colorPatterns.HSLA.test(str)&&(results=colorPatterns.HSLA.exec(str).slice(1).map(function(color,idx){return 0===idx?parseInt(color,10)/360:3===idx?parseFloat(color):parseInt(color,10)/100})),results.length)return color_conversion._hslaToRGBA(results);if(colorPatterns.HSB.test(str)?(results=colorPatterns.HSB.exec(str).slice(1).map(function(color,idx){return 0===idx?parseInt(color,10)/360:parseInt(color,10)/100}),results[3]=1):colorPatterns.HSBA.test(str)&&(results=colorPatterns.HSBA.exec(str).slice(1).map(function(color,idx){return 0===idx?parseInt(color,10)/360:3===idx?parseFloat(color):parseInt(color,10)/100})),results.length)return color_conversion._hsbaToRGBA(results);results=[1,1,1,1]}else{if(1!==numArgs&&2!==numArgs||"number"!=typeof arguments[0])throw new Error(arguments+"is not a valid color representation.");results[0]=arguments[0]/maxes[mode][2],results[1]=arguments[0]/maxes[mode][2],results[2]=arguments[0]/maxes[mode][2],results[3]="number"==typeof arguments[1]?arguments[1]/maxes[mode][3]:1,results=results.map(function(value){return Math.max(Math.min(value,1),0)})}return results},module.exports=p5.Color},{"../core/constants":36,"../core/core":37,"./color_conversion":29}],32:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),constants=_dereq_("../core/constants");_dereq_("./p5.Color"),p5.prototype.background=function(){return arguments[0]instanceof p5.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},p5.prototype.clear=function(){return this._renderer.clear(),this},p5.prototype.colorMode=function(){if(arguments[0]===constants.RGB||arguments[0]===constants.HSB||arguments[0]===constants.HSL){this._renderer._colorMode=arguments[0];var maxes=this._renderer._colorMaxes[this._renderer._colorMode];2===arguments.length?(maxes[0]=arguments[1],maxes[1]=arguments[1],maxes[2]=arguments[1],maxes[3]=arguments[1]):4===arguments.length?(maxes[0]=arguments[1],maxes[1]=arguments[2],maxes[2]=arguments[3]):5===arguments.length&&(maxes[0]=arguments[1],maxes[1]=arguments[2],maxes[2]=arguments[3],maxes[3]=arguments[4])}return this},p5.prototype.fill=function(){return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),this._renderer.fill.apply(this._renderer,arguments),this},p5.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},p5.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},p5.prototype.stroke=function(){return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),this._renderer.stroke.apply(this._renderer,arguments),this},module.exports=p5},{"../core/constants":36,"../core/core":37,"./p5.Color":31}],33:[function(_dereq_,module){"use strict";var p5=_dereq_("./core"),constants=_dereq_("./constants"),canvas=_dereq_("./canvas");_dereq_("./error_helpers"),p5.prototype.arc=function(x,y,w,h,start,stop,mode){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===constants.DEGREES&&(start=this.radians(start),stop=this.radians(stop));0>start;)start+=constants.TWO_PI;for(;0>stop;)stop+=constants.TWO_PI;return start%=constants.TWO_PI,stop%=constants.TWO_PI,stop===start&&(stop+=constants.TWO_PI),start=start<=constants.HALF_PI?Math.atan(w/h*Math.tan(start)):start>constants.HALF_PI&&start<=3*constants.HALF_PI?Math.atan(w/h*Math.tan(start))+constants.PI:Math.atan(w/h*Math.tan(start))+constants.TWO_PI,stop=stop<=constants.HALF_PI?Math.atan(w/h*Math.tan(stop)):stop>constants.HALF_PI&&stop<=3*constants.HALF_PI?Math.atan(w/h*Math.tan(stop))+constants.PI:Math.atan(w/h*Math.tan(stop))+constants.TWO_PI,start>stop&&(stop+=constants.TWO_PI),w=Math.abs(w),h=Math.abs(h),this._renderer.arc(x,y,w,h,start,stop,mode),this},p5.prototype.ellipse=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];if(3===args.length&&args.push(args[2]),args[2]<0&&(args[2]=Math.abs(args[2])),args[3]<0&&(args[3]=Math.abs(args[3])),!this._renderer._doStroke&&!this._renderer._doFill)return this;var vals=canvas.modeAdjust(args[0],args[1],args[2],args[3],this._renderer._ellipseMode);return args[0]=vals.x,args[1]=vals.y,args[2]=vals.w,args[3]=vals.h,this._renderer.ellipse(args),this},p5.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return this._renderer.isP3D?this._renderer.line(args[0],args[1],args[2],args[3],args[4],args[5]):this._renderer.line(args[0],args[1],args[2],args[3]),this},p5.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return this._renderer.isP3D?this._renderer.point(args[0],args[1],args[2]):this._renderer.point(args[0],args[1]),this},p5.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return this._renderer.isP3D?this._renderer.quad(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9],args[10],args[11]):this._renderer.quad(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]),this},p5.prototype.rect=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];if(this._renderer._doStroke||this._renderer._doFill){var vals=canvas.modeAdjust(args[0],args[1],args[2],args[3],this._renderer._rectMode);return args[0]=vals.x,args[1]=vals.y,args[2]=vals.w,args[3]=vals.h,this._renderer.rect(args),this}},p5.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return this._renderer.triangle(args),this},module.exports=p5},{"./canvas":35,"./constants":36,"./core":37,"./error_helpers":40}],34:[function(_dereq_,module){"use strict";var p5=_dereq_("./core"),constants=_dereq_("./constants");p5.prototype.ellipseMode=function(m){return(m===constants.CORNER||m===constants.CORNERS||m===constants.RADIUS||m===constants.CENTER)&&(this._renderer._ellipseMode=m),this},p5.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},p5.prototype.rectMode=function(m){return(m===constants.CORNER||m===constants.CORNERS||m===constants.RADIUS||m===constants.CENTER)&&(this._renderer._rectMode=m),this},p5.prototype.smooth=function(){return this._renderer.smooth(),this},p5.prototype.strokeCap=function(cap){return(cap===constants.ROUND||cap===constants.SQUARE||cap===constants.PROJECT)&&this._renderer.strokeCap(cap),this},p5.prototype.strokeJoin=function(join){return(join===constants.ROUND||join===constants.BEVEL||join===constants.MITER)&&this._renderer.strokeJoin(join),this},p5.prototype.strokeWeight=function(w){return this._renderer.strokeWeight(w),this},module.exports=p5},{"./constants":36,"./core":37}],35:[function(_dereq_,module){var constants=_dereq_("./constants");module.exports={modeAdjust:function(a,b,c,d,mode){return mode===constants.CORNER?{x:a,y:b,w:c,h:d}:mode===constants.CORNERS?{x:a,y:b,w:c-a,h:d-b}:mode===constants.RADIUS?{x:a-c,y:b-d,w:2*c,h:2*d}:mode===constants.CENTER?{x:a-.5*c,y:b-.5*d,w:c,h:d}:void 0},arcModeAdjust:function(a,b,c,d,mode){return mode===constants.CORNER?{x:a+.5*c,y:b+.5*d,w:c,h:d}:mode===constants.CORNERS?{x:a,y:b,w:c+a,h:d+b}:mode===constants.RADIUS?{x:a,y:b,w:2*c,h:2*d}:mode===constants.CENTER?{x:a,y:b,w:c,h:d}:void 0}}},{"./constants":36}],36:[function(_dereq_,module){var PI=Math.PI;module.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:PI/2,PI:PI,QUARTER_PI:PI/4,TAU:2*PI,TWO_PI:2*PI,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:0,LINES:1,LINE_STRIP:3,LINE_LOOP:2,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],37:[function(_dereq_,module){"use strict";_dereq_("./shim");var constants=_dereq_("./constants"),p5=function(sketch,node,sync){2===arguments.length&&"boolean"==typeof node&&(sync=node,node=void 0),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=node,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._events.wheel=null,this._loadingScreenId="p5_loading",window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode));var userPreload=this.preload||window.preload;if(userPreload){var loadingScreen=document.getElementById(this._loadingScreenId);if(!loadingScreen){loadingScreen=document.createElement("div"),loadingScreen.innerHTML="Loading...",loadingScreen.style.position="absolute",loadingScreen.id=this._loadingScreenId;var node=this._userNode||document.body;node.appendChild(loadingScreen)}for(var method in this._preloadMethods){this._preloadMethods[method]=this._preloadMethods[method]||p5;var obj=this._preloadMethods[method];(obj===p5.prototype||obj===p5)&&(obj=this._isGlobal?window:this),this._registeredPreloadMethods[method]=obj[method],obj[method]=this._wrapPreload(obj,method)}userPreload(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var context=this._isGlobal?window:this;if(0===context._preloadCount){var loadingScreen=document.getElementById(context._loadingScreenId);loadingScreen&&loadingScreen.parentNode.removeChild(loadingScreen),context._setup(),context._runFrames(),context._draw()}},this._decrementPreload=function(){var context=this._isGlobal?window:this;context._setProperty("_preloadCount",context._preloadCount-1),context._runIfPreloadsAreDone()},this._wrapPreload=function(obj,fnName){return function(){this._incrementPreload();for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return args.push(this._decrementPreload.bind(this)),this._registeredPreloadMethods[fnName].apply(obj,args)}.bind(this)},this._incrementPreload=function(){var context=this._isGlobal?window:this;context._setProperty("_preloadCount",context._preloadCount+1)},this._setup=function(){this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var context=this._isGlobal?window:this;if("function"==typeof context.preload)for(var f in this._preloadMethods)context[f]=this._preloadMethods[f][f],context[f]&&this&&(context[f]=context[f].bind(this));"function"==typeof context.setup&&context.setup();for(var canvases=document.getElementsByTagName("canvas"),i=0;i<canvases.length;i++){var k=canvases[i];"true"===k.dataset.hidden&&(k.style.visibility="",delete k.dataset.hidden)}this._setupDone=!0}.bind(this),this._draw=function(){var now=window.performance.now(),time_since_last=now-this._lastFrameTime,target_time_between_frames=1e3/this._targetFrameRate,epsilon=5;(!this._loop||time_since_last>=target_time_between_frames-epsilon)&&(this._setProperty("frameCount",this.frameCount+1),this.redraw(),this._updateMouseCoords(),this._frameRate=1e3/(now-this._lastFrameTime),this._lastFrameTime=now),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(prop,value){this[prop]=value,this._isGlobal&&(window[prop]=value)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var ev in this._events)window.removeEventListener(ev,this._events[ev]);for(var i=0;i<this._elements.length;i++){var e=this._elements[i];e.elt.parentNode&&e.elt.parentNode.removeChild(e.elt);for(var elt_ev in e._events)e.elt.removeEventListener(elt_ev,e._events[elt_ev])}var self=this;if(this._registeredMethods.remove.forEach(function(f){"undefined"!=typeof f&&f.call(self)}),this._isGlobal){for(var p in p5.prototype)try{delete window[p]}catch(x){window[p]=void 0}for(var p2 in this)if(this.hasOwnProperty(p2))try{delete window[p2]}catch(x){window[p2]=void 0}}}}.bind(this),this._registeredMethods.init.forEach(function(f){"undefined"!=typeof f&&f.call(this)},this);var friendlyBindGlobal=this._createFriendlyGlobalFunctionBinder();if(sketch)sketch(this);else{this._isGlobal=!0,p5.instance=this;for(var p in p5.prototype)if("function"==typeof p5.prototype[p]){var ev=p.substring(2);this._events.hasOwnProperty(ev)||(Math.hasOwnProperty(p)&&Math[p]===p5.prototype[p]?friendlyBindGlobal(p,p5.prototype[p]):friendlyBindGlobal(p,p5.prototype[p].bind(this)))}else friendlyBindGlobal(p,p5.prototype[p]);for(var p2 in this)this.hasOwnProperty(p2)&&friendlyBindGlobal(p2,this[p2])}for(var e in this._events){var f=this["_on"+e];if(f){var m=f.bind(this);window.addEventListener(e,m),this._events[e]=m}}var focusHandler=function(){this._setProperty("focused",!0)}.bind(this),blurHandler=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",focusHandler),window.addEventListener("blur",blurHandler),this.registerMethod("remove",function(){window.removeEventListener("focus",focusHandler),window.removeEventListener("blur",blurHandler)}),sync?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};p5.instance=null,p5.disableFriendlyErrors=!1;for(var k in constants)p5.prototype[k]=constants[k];p5.prototype._preloadMethods={loadJSON:p5.prototype,loadImage:p5.prototype,loadStrings:p5.prototype,loadXML:p5.prototype,loadShape:p5.prototype,loadTable:p5.prototype,loadFont:p5.prototype,loadModel:p5.prototype},p5.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},p5.prototype._registeredPreloadMethods={},p5.prototype.registerPreloadMethod=function(fnString,obj){p5.prototype._preloadMethods.hasOwnProperty(fnString)||(p5.prototype._preloadMethods[fnString]=obj)},p5.prototype.registerMethod=function(name,m){p5.prototype._registeredMethods.hasOwnProperty(name)||(p5.prototype._registeredMethods[name]=[]),p5.prototype._registeredMethods[name].push(m)},p5.prototype._createFriendlyGlobalFunctionBinder=function(options){options=options||{};var globalObject=options.globalObject||window,log=options.log||console.log.bind(console),propsToForciblyOverwrite={print:!0};return function(prop,value){if(p5.disableFriendlyErrors||"undefined"!=typeof IS_MINIFIED||"function"!=typeof value||prop in p5.prototype._preloadMethods)globalObject[prop]=value;else try{if(prop in globalObject&&!(prop in propsToForciblyOverwrite))throw new Error('global "'+prop+'" already exists');Object.defineProperty(globalObject,prop,{configurable:!0,enumerable:!0,get:function(){return value},set:function(newValue){Object.defineProperty(globalObject,prop,{configurable:!0,enumerable:!0,value:newValue,writable:!0}),log('You just changed the value of "'+prop+"\", which was a p5 function. This could cause problems later if you're not careful.")}})}catch(e){log('p5 had problems creating the global function "'+prop+'", possibly because your code is already using that name as a variable. You may want to rename your variable to something else.'),globalObject[prop]=value}}},module.exports=p5},{"./constants":36,"./shim":46}],38:[function(_dereq_,module){"use strict";var p5=_dereq_("./core");_dereq_("./error_helpers");var bezierDetail=20,curveDetail=20;p5.prototype.bezier=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return this._renderer._doStroke||this._renderer._doFill?(this._renderer.isP3D?(args.push(bezierDetail),this._renderer.bezier(args)):this._renderer.bezier(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]),this):this},p5.prototype.bezierDetail=function(d){return bezierDetail=d,this},p5.prototype.bezierPoint=function(a,b,c,d,t){var adjustedT=1-t;return Math.pow(adjustedT,3)*a+3*Math.pow(adjustedT,2)*t*b+3*adjustedT*Math.pow(t,2)*c+Math.pow(t,3)*d},p5.prototype.bezierTangent=function(a,b,c,d,t){var adjustedT=1-t;return 3*d*Math.pow(t,2)-3*c*Math.pow(t,2)+6*c*adjustedT*t-6*b*adjustedT*t+3*b*Math.pow(adjustedT,2)-3*a*Math.pow(adjustedT,2)},p5.prototype.curve=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return this._renderer._doStroke?(this._renderer.isP3D?(args.push(curveDetail),this._renderer.curve(args)):this._renderer.curve(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]),this):this},p5.prototype.curveDetail=function(d){return curveDetail=d,this},p5.prototype.curveTightness=function(t){this._renderer._curveTightness=t},p5.prototype.curvePoint=function(a,b,c,d,t){var t3=t*t*t,t2=t*t,f1=-.5*t3+t2-.5*t,f2=1.5*t3-2.5*t2+1,f3=-1.5*t3+2*t2+.5*t,f4=.5*t3-.5*t2;return a*f1+b*f2+c*f3+d*f4},p5.prototype.curveTangent=function(a,b,c,d,t){var t2=t*t,f1=-3*t2/2+2*t-.5,f2=9*t2/2-5*t,f3=-9*t2/2+4*t+.5,f4=3*t2/2-t;return a*f1+b*f2+c*f3+d*f4},module.exports=p5},{"./core":37,"./error_helpers":40}],39:[function(_dereq_,module){"use strict";function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}function launchFullscreen(element){var enabled=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!enabled)throw new Error("Fullscreen not enabled in this browser.");element.requestFullscreen?element.requestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen?element.webkitRequestFullscreen():element.msRequestFullscreen&&element.msRequestFullscreen()}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var p5=_dereq_("./core"),C=_dereq_("./constants"),standardCursors=[C.ARROW,C.CROSS,C.HAND,C.MOVE,C.TEXT,C.WAIT];p5.prototype._frameRate=0,p5.prototype._lastFrameTime=window.performance.now(),p5.prototype._targetFrameRate=60;var _windowPrint=window.print;p5.prototype.print=window.console&&console.log?function(args){try{if(0===arguments.length)_windowPrint();else if(arguments.length>1)console.log.apply(console,arguments);else{var newArgs=JSON.parse(JSON.stringify(args));console.log(newArgs)}}catch(err){console.log(args)}}:function(){},p5.prototype.frameCount=0,p5.prototype.focused=document.hasFocus(),p5.prototype.cursor=function(type,x,y){var cursor="auto",canvas=this._curElement.elt;if(standardCursors.indexOf(type)>-1)cursor=type;else if("string"==typeof type){var coords="";x&&y&&"number"==typeof x&&"number"==typeof y&&(coords=x+" "+y),cursor="http://"!==type.substring(0,6)?"url("+type+") "+coords+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(type)?"url("+type+") "+coords+", auto":type}canvas.style.cursor=cursor},p5.prototype.frameRate=function(fps){return"number"!=typeof fps||0>=fps?this._frameRate:(this._setProperty("_targetFrameRate",fps),this._runFrames(),this)},p5.prototype.getFrameRate=function(){return this.frameRate()},p5.prototype.setFrameRate=function(fps){return this.frameRate(fps)},p5.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},p5.prototype.displayWidth=screen.width,p5.prototype.displayHeight=screen.height,p5.prototype.windowWidth=getWindowWidth(),p5.prototype.windowHeight=getWindowHeight(),p5.prototype._onresize=function(e){this._setProperty("windowWidth",getWindowWidth()),this._setProperty("windowHeight",getWindowHeight());var executeDefault,context=this._isGlobal?window:this;"function"==typeof context.windowResized&&(executeDefault=context.windowResized(e),void 0===executeDefault||executeDefault||e.preventDefault())},p5.prototype.width=0,p5.prototype.height=0,p5.prototype.fullscreen=function(val){return"undefined"==typeof val?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(val?launchFullscreen(document.documentElement):exitFullscreen())},p5.prototype.pixelDensity=function(val){
return"number"!=typeof val?this._pixelDensity:(this._pixelDensity=val,void this.resizeCanvas(this.width,this.height,!0))},p5.prototype.displayDensity=function(){return window.devicePixelRatio},p5.prototype.getURL=function(){return location.href},p5.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(v){return""!==v})},p5.prototype.getURLParams=function(){for(var m,re=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,v={};null!=(m=re.exec(location.search));)m.index===re.lastIndex&&re.lastIndex++,v[m[1]]=m[2];return v},module.exports=p5},{"./constants":36,"./core":37}],40:[function(_dereq_,module){"use strict";function report(message,func,color){doFriendlyWelcome&&(friendlyWelcome(),doFriendlyWelcome=!1),"undefined"===getType(color)?color="#B40033":"number"===getType(color)&&(color=typeColors[color])}function friendlyWelcome(){var astrixBgColor="transparent",astrixTxtColor="#ED225D",welcomeBgColor="#ED225D",welcomeTextColor="white";console.log("%c    _ \n /\\| |/\\ \n \\ ` ' /  \n / , . \\  \n \\/|_|\\/ \n\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using “p5.min.js”.","background-color:"+astrixBgColor+";color:"+astrixTxtColor+";","background-color:"+welcomeBgColor+";color:"+welcomeTextColor+";")}function defineMisusedAtTopLevelCode(){var uniqueNamesFound={},getSymbols=function(obj){return Object.getOwnPropertyNames(obj).filter(function(name){return"_"===name[0]?!1:name in uniqueNamesFound?!1:(uniqueNamesFound[name]=!0,!0)}).map(function(name){var type;return type="function"==typeof obj[name]?"function":name===name.toUpperCase()?"constant":"variable",{name:name,type:type}})};misusedAtTopLevelCode=[].concat(getSymbols(p5.prototype),getSymbols(_dereq_("./constants"))),misusedAtTopLevelCode.sort(function(a,b){return b.name.length-a.name.length})}function helpForMisusedAtTopLevelCode(e,log){log||(log=console.log.bind(console)),misusedAtTopLevelCode||defineMisusedAtTopLevelCode(),misusedAtTopLevelCode.some(function(symbol){return e.message&&null!==e.message.match("\\W?"+symbol.name+"\\W")?(log("%cDid you just try to use p5.js's "+symbol.name+("function"===symbol.type?"() ":" ")+symbol.type+"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: "+FAQ_URL,"color: #B40033"),!0):void 0})}for(var p5=_dereq_("./core"),doFriendlyWelcome=!1,class2type={},toString=class2type.toString,names=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],n=0;n<names.length;n++)class2type["[object "+names[n]+"]"]=names[n].toLowerCase();var getType=function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},FILE_LOAD=3,typeColors=["#2D7BB6","#EE9900","#4DB200","#C83C00"],errorCases={0:{fileType:"image",method:"loadImage",message:" hosting the image online,"},1:{fileType:"XML file",method:"loadXML"},2:{fileType:"table file",method:"loadTable"},3:{fileType:"text file",method:"loadStrings"},4:{fileType:"font",method:"loadFont",message:" hosting the font online,"}};p5._friendlyFileLoadError=function(errorType,filePath){var errorInfo=errorCases[errorType],message="It looks like there was a problem loading your "+errorInfo.fileType+". Try checking if the file path%c ["+filePath+"] %cis correct,"+(errorInfo.message||"")+" or running a local server.";report(message,errorInfo.method,FILE_LOAD)};var misusedAtTopLevelCode=null,FAQ_URL="https://github.com/processing/p5.js/wiki/Frequently-Asked-Questions#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";p5.prototype._helpForMisusedAtTopLevelCode=helpForMisusedAtTopLevelCode,"complete"!==document.readyState&&(window.addEventListener("error",helpForMisusedAtTopLevelCode,!1),window.addEventListener("load",function(){window.removeEventListener("error",helpForMisusedAtTopLevelCode,!1)})),module.exports=p5},{"./constants":36,"./core":37}],41:[function(_dereq_,module){function attachListener(ev,fxn,ctx){var f=fxn.bind(ctx);ctx.elt.addEventListener(ev,f,!1),ctx._events[ev]=f}var p5=_dereq_("./core");p5.Element=function(elt,pInst){this.elt=elt,this._pInst=pInst,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},p5.Element.prototype.parent=function(p){return 0===arguments.length?this.elt.parentNode:("string"==typeof p?("#"===p[0]&&(p=p.substring(1)),p=document.getElementById(p)):p instanceof p5.Element&&(p=p.elt),p.appendChild(this.elt),this)},p5.Element.prototype.id=function(id){return 0===arguments.length?this.elt.id:(this.elt.id=id,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},p5.Element.prototype["class"]=function(c){return 0===arguments.length?this.elt.className:(this.elt.className=c,this)},p5.Element.prototype.mousePressed=function(fxn){return attachListener("mousedown",fxn,this),attachListener("touchstart",fxn,this),this},p5.Element.prototype.mouseWheel=function(fxn){return attachListener("wheel",fxn,this),this},p5.Element.prototype.mouseReleased=function(fxn){return attachListener("mouseup",fxn,this),attachListener("touchend",fxn,this),this},p5.Element.prototype.mouseClicked=function(fxn){return attachListener("click",fxn,this),this},p5.Element.prototype.mouseMoved=function(fxn){return attachListener("mousemove",fxn,this),attachListener("touchmove",fxn,this),this},p5.Element.prototype.mouseOver=function(fxn){return attachListener("mouseover",fxn,this),this},p5.Element.prototype.changed=function(fxn){return attachListener("change",fxn,this),this},p5.Element.prototype.input=function(fxn){return attachListener("input",fxn,this),this},p5.Element.prototype.mouseOut=function(fxn){return attachListener("mouseout",fxn,this),this},p5.Element.prototype.touchStarted=function(fxn){return attachListener("touchstart",fxn,this),attachListener("mousedown",fxn,this),this},p5.Element.prototype.touchMoved=function(fxn){return attachListener("touchmove",fxn,this),attachListener("mousemove",fxn,this),this},p5.Element.prototype.touchEnded=function(fxn){return attachListener("touchend",fxn,this),attachListener("mouseup",fxn,this),this},p5.Element.prototype.dragOver=function(fxn){return attachListener("dragover",fxn,this),this},p5.Element.prototype.dragLeave=function(fxn){return attachListener("dragleave",fxn,this),this},p5.Element.prototype.drop=function(callback,fxn){function makeLoader(theFile){var p5file=new p5.File(theFile);return function(e){p5file.data=e.target.result,callback(p5file)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(attachListener("dragover",function(evt){evt.stopPropagation(),evt.preventDefault()},this),attachListener("dragleave",function(evt){evt.stopPropagation(),evt.preventDefault()},this),arguments.length>1&&attachListener("drop",fxn,this),attachListener("drop",function(evt){evt.stopPropagation(),evt.preventDefault();for(var files=evt.dataTransfer.files,i=0;i<files.length;i++){var f=files[i],reader=new FileReader;reader.onload=makeLoader(f),f.type.indexOf("text")>-1?reader.readAsText(f):reader.readAsDataURL(f)}},this)):console.log("The File APIs are not fully supported in this browser."),this},p5.Element.prototype._setProperty=function(prop,value){this[prop]=value},module.exports=p5.Element},{"./core":37}],42:[function(_dereq_,module){var p5=_dereq_("./core"),constants=_dereq_("./constants");p5.Graphics=function(w,h,renderer,pInst){var r=renderer||constants.P2D,c=document.createElement("canvas"),node=this._userNode||document.body;node.appendChild(c),p5.Element.call(this,c,pInst,!1),this._styles=[],this.width=w,this.height=h,this._pixelDensity=pInst._pixelDensity,this._renderer=r===constants.WEBGL?new p5.RendererGL(c,this,!1):new p5.Renderer2D(c,this,!1),this._renderer.resize(w,h),this._renderer._applyDefaults(),pInst._elements.push(this);for(var p in p5.prototype)this[p]||(this[p]="function"==typeof p5.prototype[p]?p5.prototype[p].bind(this):p5.prototype[p]);return this},p5.Graphics.prototype=Object.create(p5.Element.prototype),module.exports=p5.Graphics},{"./constants":36,"./core":37}],43:[function(_dereq_,module){function calculateOffset(object){var currentLeft=0,currentTop=0;if(object.offsetParent){do currentLeft+=object.offsetLeft,currentTop+=object.offsetTop;while(object=object.offsetParent)}else currentLeft+=object.offsetLeft,currentTop+=object.offsetTop;return[currentLeft,currentTop]}var p5=_dereq_("./core"),constants=_dereq_("../core/constants");p5.Renderer=function(elt,pInst,isMainCanvas){p5.Element.call(this,elt,pInst),this.canvas=elt,this._pInst=pInst,isMainCanvas?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=constants.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=constants.CORNER,this._ellipseMode=constants.CENTER,this._curveTightness=0,this._imageMode=constants.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=constants.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},p5.Renderer.prototype=Object.create(p5.Element.prototype),p5.Renderer.prototype.resize=function(w,h){this.width=w,this.height=h,this.elt.width=w*this._pInst._pixelDensity,this.elt.height=h*this._pInst._pixelDensity,this.elt.style.width=w+"px",this.elt.style.height=h+"px",this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},p5.Renderer.prototype.textLeading=function(l){return arguments.length&&arguments[0]?(this._setProperty("_textLeading",l),this):this._textLeading},p5.Renderer.prototype.textSize=function(s){return arguments.length&&arguments[0]?(this._setProperty("_textSize",s),this._setProperty("_textLeading",s*constants._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},p5.Renderer.prototype.textStyle=function(s){return arguments.length&&arguments[0]?((s===constants.NORMAL||s===constants.ITALIC||s===constants.BOLD)&&this._setProperty("_textStyle",s),this._applyTextProperties()):this._textStyle},p5.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},p5.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},p5.Renderer.prototype._applyDefaults=function(){return this},p5.Renderer.prototype._isOpenType=function(f){return f=f||this._textFont,"object"==typeof f&&f.font&&f.font.supported},p5.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var text=document.createElement("span");text.style.fontFamily=this._textFont,text.style.fontSize=this._textSize+"px",text.innerHTML="ABCjgq|";var block=document.createElement("div");block.style.display="inline-block",block.style.width="1px",block.style.height="0px";var container=document.createElement("div");container.appendChild(text),container.appendChild(block),container.style.height="0px",container.style.overflow="hidden",document.body.appendChild(container),block.style.verticalAlign="baseline";var blockOffset=calculateOffset(block),textOffset=calculateOffset(text),ascent=blockOffset[1]-textOffset[1];block.style.verticalAlign="bottom",blockOffset=calculateOffset(block),textOffset=calculateOffset(text);var height=blockOffset[1]-textOffset[1],descent=height-ascent;return document.body.removeChild(container),this._setProperty("_textAscent",ascent),this._setProperty("_textDescent",descent),this},module.exports=p5.Renderer},{"../core/constants":36,"./core":37}],44:[function(_dereq_,module){var p5=_dereq_("./core"),canvas=_dereq_("./canvas"),constants=_dereq_("./constants"),filters=_dereq_("../image/filters");_dereq_("./p5.Renderer");var styleEmpty="rgba(0,0,0,0)";p5.Renderer2D=function(elt,pInst,isMainCanvas){return p5.Renderer.call(this,elt,pInst,isMainCanvas),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},p5.Renderer2D.prototype=Object.create(p5.Renderer.prototype),p5.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=constants._DEFAULT_FILL,this.drawingContext.strokeStyle=constants._DEFAULT_STROKE,this.drawingContext.lineCap=constants.ROUND,this.drawingContext.font="normal 12px sans-serif"},p5.Renderer2D.prototype.resize=function(w,h){p5.Renderer.prototype.resize.call(this,w,h),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},p5.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof p5.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var curFill=this.drawingContext.fillStyle,color=this._pInst.color.apply(this,arguments),newFill=color.toString();this.drawingContext.fillStyle=newFill,this.drawingContext.fillRect(0,0,this.width,this.height),this.drawingContext.fillStyle=curFill}this.drawingContext.restore()},p5.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},p5.Renderer2D.prototype.fill=function(){var ctx=this.drawingContext,color=this._pInst.color.apply(this,arguments);ctx.fillStyle=color.toString()},p5.Renderer2D.prototype.stroke=function(){var ctx=this.drawingContext,color=this._pInst.color.apply(this,arguments);ctx.strokeStyle=color.toString()},p5.Renderer2D.prototype.image=function(img,sx,sy,sWidth,sHeight,dx,dy,dWidth,dHeight){var cnv;try{this._tint&&(p5.MediaElement&&img instanceof p5.MediaElement&&img.loadPixels(),img.canvas&&(cnv=this._getTintedImageCanvas(img))),cnv||(cnv=img.canvas||img.elt),this.drawingContext.drawImage(cnv,sx,sy,sWidth,sHeight,dx,dy,dWidth,dHeight)}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}},p5.Renderer2D.prototype._getTintedImageCanvas=function(img){if(!img.canvas)return img;var pixels=filters._toPixels(img.canvas),tmpCanvas=document.createElement("canvas");tmpCanvas.width=img.canvas.width,tmpCanvas.height=img.canvas.height;for(var tmpCtx=tmpCanvas.getContext("2d"),id=tmpCtx.createImageData(img.canvas.width,img.canvas.height),newPixels=id.data,i=0;i<pixels.length;i+=4){var r=pixels[i],g=pixels[i+1],b=pixels[i+2],a=pixels[i+3];newPixels[i]=r*this._tint[0]/255,newPixels[i+1]=g*this._tint[1]/255,newPixels[i+2]=b*this._tint[2]/255,newPixels[i+3]=a*this._tint[3]/255}return tmpCtx.putImageData(id,0,0),tmpCanvas},p5.Renderer2D.prototype.blendMode=function(mode){this.drawingContext.globalCompositeOperation=mode},p5.Renderer2D.prototype.blend=function(){var currBlend=this.drawingContext.globalCompositeOperation,blendMode=arguments[arguments.length-1],copyArgs=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=blendMode,this._pInst?this._pInst.copy.apply(this._pInst,copyArgs):this.copy.apply(this,copyArgs),this.drawingContext.globalCompositeOperation=currBlend},p5.Renderer2D.prototype.copy=function(){var srcImage,sx,sy,sw,sh,dx,dy,dw,dh;if(9===arguments.length)srcImage=arguments[0],sx=arguments[1],sy=arguments[2],sw=arguments[3],sh=arguments[4],dx=arguments[5],dy=arguments[6],dw=arguments[7],dh=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");srcImage=this._pInst,sx=arguments[0],sy=arguments[1],sw=arguments[2],sh=arguments[3],dx=arguments[4],dy=arguments[5],dw=arguments[6],dh=arguments[7]}p5.Renderer2D._copyHelper(srcImage,sx,sy,sw,sh,dx,dy,dw,dh)},p5.Renderer2D._copyHelper=function(srcImage,sx,sy,sw,sh,dx,dy,dw,dh){srcImage.loadPixels();var s=srcImage.canvas.width/srcImage.width;this.drawingContext.drawImage(srcImage.canvas,s*sx,s*sy,s*sw,s*sh,dx,dy,dw,dh)},p5.Renderer2D.prototype.get=function(x,y,w,h){if(void 0===x&&void 0===y&&void 0===w&&void 0===h?(x=0,y=0,w=this.width,h=this.height):void 0===w&&void 0===h&&(w=1,h=1),0>x+w||0>y+h||x>this.width||y>this.height)return[0,0,0,255];var ctx=this._pInst||this;ctx.loadPixels();var pd=ctx._pixelDensity;x=Math.floor(x),y=Math.floor(y),w=Math.floor(w),h=Math.floor(h);var sx=x*pd,sy=y*pd;if(1===w&&1===h){var imageData=this.drawingContext.getImageData(sx,sy,1,1).data;return[imageData[0],imageData[1],imageData[2],imageData[3]]}var dw=Math.min(w,ctx.width),dh=Math.min(h,ctx.height),sw=dw*pd,sh=dh*pd,region=new p5.Image(dw,dh);return region.canvas.getContext("2d").drawImage(this.canvas,sx,sy,sw,sh,0,0,dw,dh),region},p5.Renderer2D.prototype.loadPixels=function(){var pd=this._pixelDensity||this._pInst._pixelDensity,w=this.width*pd,h=this.height*pd,imageData=this.drawingContext.getImageData(0,0,w,h);this._pInst?(this._pInst._setProperty("imageData",imageData),this._pInst._setProperty("pixels",imageData.data)):(this._setProperty("imageData",imageData),this._setProperty("pixels",imageData.data))},p5.Renderer2D.prototype.set=function(x,y,imgOrCol){if(x=Math.floor(x),y=Math.floor(y),imgOrCol instanceof p5.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(imgOrCol.canvas,x,y),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var ctx=this._pInst||this,r=0,g=0,b=0,a=0,idx=4*(y*ctx._pixelDensity*this.width*ctx._pixelDensity+x*ctx._pixelDensity);if(ctx.imageData||ctx.loadPixels.call(ctx),"number"==typeof imgOrCol)idx<ctx.pixels.length&&(r=imgOrCol,g=imgOrCol,b=imgOrCol,a=255);else if(imgOrCol instanceof Array){if(imgOrCol.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");idx<ctx.pixels.length&&(r=imgOrCol[0],g=imgOrCol[1],b=imgOrCol[2],a=imgOrCol[3])}else imgOrCol instanceof p5.Color&&idx<ctx.pixels.length&&(r=imgOrCol.levels[0],g=imgOrCol.levels[1],b=imgOrCol.levels[2],a=imgOrCol.levels[3]);for(var i=0;i<ctx._pixelDensity;i++)for(var j=0;j<ctx._pixelDensity;j++)idx=4*((y*ctx._pixelDensity+j)*this.width*ctx._pixelDensity+(x*ctx._pixelDensity+i)),ctx.pixels[idx]=r,ctx.pixels[idx+1]=g,ctx.pixels[idx+2]=b,ctx.pixels[idx+3]=a}},p5.Renderer2D.prototype.updatePixels=function(x,y,w,h){var pd=this._pixelDensity||this._pInst._pixelDensity;void 0===x&&void 0===y&&void 0===w&&void 0===h&&(x=0,y=0,w=this.width,h=this.height),w*=pd,h*=pd,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,x,y,0,0,w,h):this.drawingContext.putImageData(this.imageData,x,y,0,0,w,h)},p5.Renderer2D.prototype._acuteArcToBezier=function(start,size){var alpha=size/2,cos_alpha=Math.cos(alpha),sin_alpha=Math.sin(alpha),cot_alpha=1/Math.tan(alpha),phi=start+alpha,cos_phi=Math.cos(phi),sin_phi=Math.sin(phi),lambda=(4-cos_alpha)/3,mu=sin_alpha+(cos_alpha-lambda)*cot_alpha;return{ax:Math.cos(start),ay:Math.sin(start),bx:lambda*cos_phi+mu*sin_phi,by:lambda*sin_phi-mu*cos_phi,cx:lambda*cos_phi-mu*sin_phi,cy:lambda*sin_phi+mu*cos_phi,dx:Math.cos(start+size),dy:Math.sin(start+size)}},p5.Renderer2D.prototype.arc=function(x,y,w,h,start,stop,mode){for(var ctx=this.drawingContext,vals=canvas.arcModeAdjust(x,y,w,h,this._ellipseMode),rx=vals.w/2,ry=vals.h/2,epsilon=1e-5,arcToDraw=0,curves=[];stop-start>epsilon;)arcToDraw=Math.min(stop-start,constants.HALF_PI),curves.push(this._acuteArcToBezier(start,arcToDraw)),start+=arcToDraw;return this._doFill&&(ctx.beginPath(),curves.forEach(function(curve,index){0===index&&ctx.moveTo(vals.x+curve.ax*rx,vals.y+curve.ay*ry),ctx.bezierCurveTo(vals.x+curve.bx*rx,vals.y+curve.by*ry,vals.x+curve.cx*rx,vals.y+curve.cy*ry,vals.x+curve.dx*rx,vals.y+curve.dy*ry)}),(mode===constants.PIE||null==mode)&&ctx.lineTo(vals.x,vals.y),ctx.closePath(),ctx.fill()),this._doStroke&&(ctx.beginPath(),curves.forEach(function(curve,index){0===index&&ctx.moveTo(vals.x+curve.ax*rx,vals.y+curve.ay*ry),ctx.bezierCurveTo(vals.x+curve.bx*rx,vals.y+curve.by*ry,vals.x+curve.cx*rx,vals.y+curve.cy*ry,vals.x+curve.dx*rx,vals.y+curve.dy*ry)}),mode===constants.PIE?(ctx.lineTo(vals.x,vals.y),ctx.closePath()):mode===constants.CHORD&&ctx.closePath(),ctx.stroke()),this},p5.Renderer2D.prototype.ellipse=function(args){var ctx=this.drawingContext,doFill=this._doFill,doStroke=this._doStroke,x=args[0],y=args[1],w=args[2],h=args[3];if(doFill&&!doStroke){if(ctx.fillStyle===styleEmpty)return this}else if(!doFill&&doStroke&&ctx.strokeStyle===styleEmpty)return this;var kappa=.5522847498,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;ctx.beginPath(),ctx.moveTo(x,ym),ctx.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),ctx.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),ctx.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),ctx.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym),ctx.closePath(),doFill&&ctx.fill(),doStroke&&ctx.stroke()},p5.Renderer2D.prototype.line=function(x1,y1,x2,y2){var ctx=this.drawingContext;return this._doStroke?ctx.strokeStyle===styleEmpty?this:(ctx.lineWidth%2===1&&ctx.translate(.5,.5),ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke(),ctx.lineWidth%2===1&&ctx.translate(-.5,-.5),this):this},p5.Renderer2D.prototype.point=function(x,y){var ctx=this.drawingContext,s=ctx.strokeStyle,f=ctx.fillStyle;return this._doStroke?ctx.strokeStyle===styleEmpty?this:(x=Math.round(x),y=Math.round(y),ctx.fillStyle=s,ctx.lineWidth>1?(ctx.beginPath(),ctx.arc(x,y,ctx.lineWidth/2,0,constants.TWO_PI,!1),ctx.fill()):ctx.fillRect(x,y,1,1),void(ctx.fillStyle=f)):this},p5.Renderer2D.prototype.quad=function(x1,y1,x2,y2,x3,y3,x4,y4){var ctx=this.drawingContext,doFill=this._doFill,doStroke=this._doStroke;if(doFill&&!doStroke){if(ctx.fillStyle===styleEmpty)return this}else if(!doFill&&doStroke&&ctx.strokeStyle===styleEmpty)return this;return ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.lineTo(x3,y3),ctx.lineTo(x4,y4),ctx.closePath(),doFill&&ctx.fill(),doStroke&&ctx.stroke(),this},p5.Renderer2D.prototype.rect=function(args){var x=args[0],y=args[1],w=args[2],h=args[3],tl=args[4],tr=args[5],br=args[6],bl=args[7],ctx=this.drawingContext,doFill=this._doFill,doStroke=this._doStroke;if(doFill&&!doStroke){if(ctx.fillStyle===styleEmpty)return this}else if(!doFill&&doStroke&&ctx.strokeStyle===styleEmpty)return this;if(this._doStroke&&ctx.lineWidth%2===1&&ctx.translate(.5,.5),ctx.beginPath(),"undefined"==typeof tl)ctx.rect(x,y,w,h);else{"undefined"==typeof tr&&(tr=tl),"undefined"==typeof br&&(br=tr),"undefined"==typeof bl&&(bl=br);var hw=w/2,hh=h/2;2*tl>w&&(tl=hw),2*tl>h&&(tl=hh),2*tr>w&&(tr=hw),2*tr>h&&(tr=hh),2*br>w&&(br=hw),2*br>h&&(br=hh),2*bl>w&&(bl=hw),2*bl>h&&(bl=hh),ctx.beginPath(),ctx.moveTo(x+tl,y),ctx.arcTo(x+w,y,x+w,y+h,tr),ctx.arcTo(x+w,y+h,x,y+h,br),ctx.arcTo(x,y+h,x,y,bl),ctx.arcTo(x,y,x+w,y,tl),ctx.closePath()}return this._doFill&&ctx.fill(),this._doStroke&&ctx.stroke(),this._doStroke&&ctx.lineWidth%2===1&&ctx.translate(-.5,-.5),this},p5.Renderer2D.prototype.triangle=function(args){var ctx=this.drawingContext,doFill=this._doFill,doStroke=this._doStroke,x1=args[0],y1=args[1],x2=args[2],y2=args[3],x3=args[4],y3=args[5];if(doFill&&!doStroke){if(ctx.fillStyle===styleEmpty)return this}else if(!doFill&&doStroke&&ctx.strokeStyle===styleEmpty)return this;ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.lineTo(x3,y3),ctx.closePath(),doFill&&ctx.fill(),doStroke&&ctx.stroke()},p5.Renderer2D.prototype.endShape=function(mode,vertices,isCurve,isBezier,isQuadratic,isContour,shapeKind){if(0===vertices.length)return this;if(!this._doStroke&&!this._doFill)return this;var v,closeShape=mode===constants.CLOSE;closeShape&&!isContour&&vertices.push(vertices[0]);var i,j,numVerts=vertices.length;if(!isCurve||shapeKind!==constants.POLYGON&&null!==shapeKind)if(!isBezier||shapeKind!==constants.POLYGON&&null!==shapeKind)if(!isQuadratic||shapeKind!==constants.POLYGON&&null!==shapeKind)if(shapeKind===constants.POINTS)for(i=0;numVerts>i;i++)v=vertices[i],this._doStroke&&this._pInst.stroke(v[6]),this._pInst.point(v[0],v[1]);else if(shapeKind===constants.LINES)for(i=0;numVerts>i+1;i+=2)v=vertices[i],this._doStroke&&this._pInst.stroke(vertices[i+1][6]),this._pInst.line(v[0],v[1],vertices[i+1][0],vertices[i+1][1]);else if(shapeKind===constants.TRIANGLES)for(i=0;numVerts>i+2;i+=3)v=vertices[i],this.drawingContext.beginPath(),this.drawingContext.moveTo(v[0],v[1]),this.drawingContext.lineTo(vertices[i+1][0],vertices[i+1][1]),this.drawingContext.lineTo(vertices[i+2][0],vertices[i+2][1]),this.drawingContext.lineTo(v[0],v[1]),this._doFill&&(this._pInst.fill(vertices[i+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(vertices[i+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(shapeKind===constants.TRIANGLE_STRIP)for(i=0;numVerts>i+1;i++)v=vertices[i],this.drawingContext.beginPath(),this.drawingContext.moveTo(vertices[i+1][0],vertices[i+1][1]),this.drawingContext.lineTo(v[0],v[1]),this._doStroke&&this._pInst.stroke(vertices[i+1][6]),this._doFill&&this._pInst.fill(vertices[i+1][5]),numVerts>i+2&&(this.drawingContext.lineTo(vertices[i+2][0],vertices[i+2][1]),this._doStroke&&this._pInst.stroke(vertices[i+2][6]),this._doFill&&this._pInst.fill(vertices[i+2][5])),this._doFillStrokeClose();else if(shapeKind===constants.TRIANGLE_FAN){if(numVerts>2)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(vertices[0][0],vertices[0][1]),this.drawingContext.lineTo(vertices[1][0],vertices[1][1]),this.drawingContext.lineTo(vertices[2][0],vertices[2][1]),this._doFill&&this._pInst.fill(vertices[2][5]),this._doStroke&&this._pInst.stroke(vertices[2][6]),this._doFillStrokeClose(),i=3;numVerts>i;i++)v=vertices[i],this.drawingContext.beginPath(),this.drawingContext.moveTo(vertices[0][0],vertices[0][1]),this.drawingContext.lineTo(vertices[i-1][0],vertices[i-1][1]),this.drawingContext.lineTo(v[0],v[1]),this._doFill&&this._pInst.fill(v[5]),this._doStroke&&this._pInst.stroke(v[6]),this._doFillStrokeClose()}else if(shapeKind===constants.QUADS)for(i=0;numVerts>i+3;i+=4){for(v=vertices[i],this.drawingContext.beginPath(),this.drawingContext.moveTo(v[0],v[1]),j=1;4>j;j++)this.drawingContext.lineTo(vertices[i+j][0],vertices[i+j][1]);this.drawingContext.lineTo(v[0],v[1]),this._doFill&&this._pInst.fill(vertices[i+3][5]),this._doStroke&&this._pInst.stroke(vertices[i+3][6]),this._doFillStrokeClose()}else if(shapeKind===constants.QUAD_STRIP){if(numVerts>3)for(i=0;numVerts>i+1;i+=2)v=vertices[i],this.drawingContext.beginPath(),numVerts>i+3?(this.drawingContext.moveTo(vertices[i+2][0],vertices[i+2][1]),this.drawingContext.lineTo(v[0],v[1]),this.drawingContext.lineTo(vertices[i+1][0],vertices[i+1][1]),this.drawingContext.lineTo(vertices[i+3][0],vertices[i+3][1]),this._doFill&&this._pInst.fill(vertices[i+3][5]),this._doStroke&&this._pInst.stroke(vertices[i+3][6])):(this.drawingContext.moveTo(v[0],v[1]),this.drawingContext.lineTo(vertices[i+1][0],vertices[i+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(vertices[0][0],vertices[0][1]),i=1;numVerts>i;i++)v=vertices[i],v.isVert&&(v.moveTo?this.drawingContext.moveTo(v[0],v[1]):this.drawingContext.lineTo(v[0],v[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),i=0;numVerts>i;i++)vertices[i].isVert?vertices[i].moveTo?this.drawingContext.moveTo([0],vertices[i][1]):this.drawingContext.lineTo(vertices[i][0],vertices[i][1]):this.drawingContext.quadraticCurveTo(vertices[i][0],vertices[i][1],vertices[i][2],vertices[i][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),i=0;numVerts>i;i++)vertices[i].isVert?vertices[i].moveTo?this.drawingContext.moveTo(vertices[i][0],vertices[i][1]):this.drawingContext.lineTo(vertices[i][0],vertices[i][1]):this.drawingContext.bezierCurveTo(vertices[i][0],vertices[i][1],vertices[i][2],vertices[i][3],vertices[i][4],vertices[i][5]);this._doFillStrokeClose()}else if(numVerts>3){var b=[],s=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(vertices[1][0],vertices[1][1]),i=1;numVerts>i+2;i++)v=vertices[i],b[0]=[v[0],v[1]],b[1]=[v[0]+(s*vertices[i+1][0]-s*vertices[i-1][0])/6,v[1]+(s*vertices[i+1][1]-s*vertices[i-1][1])/6],b[2]=[vertices[i+1][0]+(s*vertices[i][0]-s*vertices[i+2][0])/6,vertices[i+1][1]+(s*vertices[i][1]-s*vertices[i+2][1])/6],b[3]=[vertices[i+1][0],vertices[i+1][1]],this.drawingContext.bezierCurveTo(b[1][0],b[1][1],b[2][0],b[2][1],b[3][0],b[3][1]);closeShape&&this.drawingContext.lineTo(vertices[i+1][0],vertices[i+1][1]),this._doFillStrokeClose()}return isCurve=!1,isBezier=!1,isQuadratic=!1,isContour=!1,closeShape&&vertices.pop(),this},p5.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},p5.Renderer2D.prototype.smooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},p5.Renderer2D.prototype.strokeCap=function(cap){return(cap===constants.ROUND||cap===constants.SQUARE||cap===constants.PROJECT)&&(this.drawingContext.lineCap=cap),this},p5.Renderer2D.prototype.strokeJoin=function(join){return(join===constants.ROUND||join===constants.BEVEL||join===constants.MITER)&&(this.drawingContext.lineJoin=join),this},p5.Renderer2D.prototype.strokeWeight=function(w){return this.drawingContext.lineWidth="undefined"==typeof w||0===w?1e-4:w,this},p5.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle},p5.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle},p5.Renderer2D.prototype.bezier=function(x1,y1,x2,y2,x3,y3,x4,y4){return this._pInst.beginShape(),this._pInst.vertex(x1,y1),this._pInst.bezierVertex(x2,y2,x3,y3,x4,y4),this._pInst.endShape(),this},p5.Renderer2D.prototype.curve=function(x1,y1,x2,y2,x3,y3,x4,y4){return this._pInst.beginShape(),this._pInst.curveVertex(x1,y1),this._pInst.curveVertex(x2,y2),this._pInst.curveVertex(x3,y3),this._pInst.curveVertex(x4,y4),this._pInst.endShape(),this},p5.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},p5.Renderer2D.prototype.applyMatrix=function(n00,n01,n02,n10,n11,n12){this.drawingContext.transform(n00,n01,n02,n10,n11,n12)},p5.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},p5.Renderer2D.prototype.rotate=function(r){this.drawingContext.rotate(r)},p5.Renderer2D.prototype.scale=function(x,y){return this.drawingContext.scale(x,y),this},p5.Renderer2D.prototype.shearX=function(angle){return this._pInst._angleMode===constants.DEGREES&&(angle=this._pInst.degrees(angle)),this.drawingContext.transform(1,0,this._pInst.tan(angle),1,0,0),this},p5.Renderer2D.prototype.shearY=function(angle){return this._pInst._angleMode===constants.DEGREES&&(angle=this._pInst.degrees(angle)),this.drawingContext.transform(1,this._pInst.tan(angle),0,1,0,0),this},p5.Renderer2D.prototype.translate=function(x,y){return this.drawingContext.translate(x,y),this},p5.Renderer2D.prototype.text=function(str,x,y,maxWidth,maxHeight){var cars,n,ii,jj,line,testLine,testWidth,words,totalHeight,baselineHacked,p=this._pInst,finalMaxHeight=Number.MAX_VALUE;if(this._doFill||this._doStroke){
if("string"!=typeof str&&(str=str.toString()),str=str.replace(/(\t)/g,"  "),cars=str.split("\n"),"undefined"!=typeof maxWidth){for(totalHeight=0,ii=0;ii<cars.length;ii++)for(line="",words=cars[ii].split(" "),n=0;n<words.length;n++)testLine=line+words[n]+" ",testWidth=this.textWidth(testLine),testWidth>maxWidth?(line=words[n]+" ",totalHeight+=p.textLeading()):line=testLine;switch(this._rectMode===constants.CENTER&&(x-=maxWidth/2,y-=maxHeight/2),this.drawingContext.textAlign){case constants.CENTER:x+=maxWidth/2;break;case constants.RIGHT:x+=maxWidth}if("undefined"!=typeof maxHeight){switch(this.drawingContext.textBaseline){case constants.BOTTOM:y+=maxHeight-totalHeight;break;case constants._CTX_MIDDLE:y+=(maxHeight-totalHeight)/2;break;case constants.BASELINE:baselineHacked=!0,this.drawingContext.textBaseline=constants.TOP}finalMaxHeight=y+maxHeight-p.textAscent()}for(ii=0;ii<cars.length;ii++){for(line="",words=cars[ii].split(" "),n=0;n<words.length;n++)testLine=line+words[n]+" ",testWidth=this.textWidth(testLine),testWidth>maxWidth&&line.length>0?(this._renderText(p,line,x,y,finalMaxHeight),line=words[n]+" ",y+=p.textLeading()):line=testLine;this._renderText(p,line,x,y,finalMaxHeight),y+=p.textLeading()}}else{var offset=0,vAlign=p.textAlign().vertical;for(vAlign===constants.CENTER?offset=(cars.length-1)*p.textLeading()/2:vAlign===constants.BOTTOM&&(offset=(cars.length-1)*p.textLeading()),jj=0;jj<cars.length;jj++)this._renderText(p,cars[jj],x,y-offset,finalMaxHeight),y+=p.textLeading()}return baselineHacked&&(this.drawingContext.textBaseline=constants.BASELINE),p}},p5.Renderer2D.prototype._renderText=function(p,line,x,y,maxY){return y>=maxY?void 0:(p.push(),this._isOpenType()?this._textFont._renderPath(line,x,y,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(line,x,y),this._doFill&&(this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:constants._DEFAULT_TEXT_FILL,this.drawingContext.fillText(line,x,y))),p.pop(),p)},p5.Renderer2D.prototype.textWidth=function(s){return this._isOpenType()?this._textFont._textWidth(s,this._textSize):this.drawingContext.measureText(s).width},p5.Renderer2D.prototype.textAlign=function(h,v){if(arguments.length)return(h===constants.LEFT||h===constants.RIGHT||h===constants.CENTER)&&(this.drawingContext.textAlign=h),(v===constants.TOP||v===constants.BOTTOM||v===constants.CENTER||v===constants.BASELINE)&&(this.drawingContext.textBaseline=v===constants.CENTER?constants._CTX_MIDDLE:v),this._pInst;var valign=this.drawingContext.textBaseline;return valign===constants._CTX_MIDDLE&&(valign=constants.CENTER),{horizontal:this.drawingContext.textAlign,vertical:valign}},p5.Renderer2D.prototype._applyTextProperties=function(){var font,p=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),font=this._textFont,this._isOpenType()&&(font=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+font,p},p5.Renderer2D.prototype.push=function(){this.drawingContext.save()},p5.Renderer2D.prototype.pop=function(){this.drawingContext.restore()},module.exports=p5.Renderer2D},{"../image/filters":54,"./canvas":35,"./constants":36,"./core":37,"./p5.Renderer":43}],45:[function(_dereq_,module){var p5=_dereq_("./core"),constants=_dereq_("./constants");_dereq_("./p5.Graphics"),_dereq_("./p5.Renderer2D"),_dereq_("../webgl/p5.RendererGL");var defaultId="defaultCanvas0";p5.prototype.createCanvas=function(w,h,renderer){var isDefault,c,r=renderer||constants.P2D;if(arguments[3]&&(isDefault="boolean"==typeof arguments[3]?arguments[3]:!1),r===constants.WEBGL)c=document.getElementById(defaultId),c&&c.parentNode.removeChild(c),c=document.createElement("canvas"),c.id=defaultId;else if(isDefault){c=document.createElement("canvas");for(var i=0;document.getElementById("defaultCanvas"+i);)i++;defaultId="defaultCanvas"+i,c.id=defaultId}else c=this.canvas;return this._setupDone||(c.dataset.hidden=!0,c.style.visibility="hidden"),this._userNode?this._userNode.appendChild(c):document.body.appendChild(c),r===constants.WEBGL?(this._setProperty("_renderer",new p5.RendererGL(c,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty("_renderer",new p5.Renderer2D(c,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(w,h),this._renderer._applyDefaults(),isDefault&&this._elements.push(this._renderer),this._renderer},p5.prototype.resizeCanvas=function(w,h,noRedraw){if(this._renderer){var props={};for(var key in this.drawingContext){var val=this.drawingContext[key];"object"!=typeof val&&"function"!=typeof val&&(props[key]=val)}this._renderer.resize(w,h);for(var savedKey in props)this.drawingContext[savedKey]=props[savedKey];noRedraw||this.redraw()}},p5.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},p5.prototype.createGraphics=function(w,h,renderer){return new p5.Graphics(w,h,renderer,this)},p5.prototype.blendMode=function(mode){if(mode!==constants.BLEND&&mode!==constants.DARKEST&&mode!==constants.LIGHTEST&&mode!==constants.DIFFERENCE&&mode!==constants.MULTIPLY&&mode!==constants.EXCLUSION&&mode!==constants.SCREEN&&mode!==constants.REPLACE&&mode!==constants.OVERLAY&&mode!==constants.HARD_LIGHT&&mode!==constants.SOFT_LIGHT&&mode!==constants.DODGE&&mode!==constants.BURN&&mode!==constants.ADD&&mode!==constants.NORMAL)throw new Error("Mode "+mode+" not recognized.");this._renderer.blendMode(mode)},module.exports=p5},{"../webgl/p5.RendererGL":86,"./constants":36,"./core":37,"./p5.Graphics":42,"./p5.Renderer2D":44}],46:[function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var load_date=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-load_date}}(),function(){"use strict";"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1})}()},{}],47:[function(_dereq_,module){"use strict";var p5=_dereq_("./core");p5.prototype.exit=function(){throw"exit() not implemented, see remove()"},p5.prototype.noLoop=function(){this._loop=!1},p5.prototype.loop=function(){this._loop=!0,this._draw()},p5.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_strokeSet:this._renderer._strokeSet,_doFill:this._renderer._doFill,_fillSet:this._renderer._fillSet,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},p5.prototype.pop=function(){this._renderer.pop();var lastS=this._styles.pop();for(var prop in lastS)this._renderer[prop]=lastS[prop]},p5.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},p5.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},p5.prototype.redraw=function(){this.resetMatrix(),this._renderer.isP3D&&this._renderer._update();var numberOfRedraws=1;if(1===arguments.length)try{parseInt(arguments[0])>1&&(numberOfRedraws=parseInt(arguments[0]))}catch(error){}var userSetup=this.setup||window.setup,userDraw=this.draw||window.draw;if("function"==typeof userDraw){"undefined"==typeof userSetup&&this.scale(this._pixelDensity,this._pixelDensity);for(var self=this,callMethod=function(f){f.call(self)},idxRedraw=0;numberOfRedraws>idxRedraw;idxRedraw++)this._registeredMethods.pre.forEach(callMethod),userDraw(),this._registeredMethods.post.forEach(callMethod)}},p5.prototype.size=function(){var s="size() is not a valid p5 function, to set the size of the ";throw s+="drawing canvas, please use createCanvas() instead"},module.exports=p5},{"./core":37}],48:[function(_dereq_,module){"use strict";var p5=_dereq_("./core"),constants=_dereq_("./constants");p5.prototype.applyMatrix=function(n00,n01,n02,n10,n11,n12){return this._renderer.applyMatrix(n00,n01,n02,n10,n11,n12),this},p5.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},p5.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},p5.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},p5.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},p5.prototype.rotate=function(){for(var r,args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return this._angleMode===constants.DEGREES?r=this.radians(args[0]):this._angleMode===constants.RADIANS&&(r=args[0]),args.length>1?this._renderer.rotate(r,args[1]):this._renderer.rotate(r),this},p5.prototype.rotateX=function(rad){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateX(rad),this},p5.prototype.rotateY=function(rad){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateY(rad),this},p5.prototype.rotateZ=function(rad){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateZ(rad),this},p5.prototype.scale=function(){for(var x,y,z,args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return args[0]instanceof p5.Vector?(x=args[0].x,y=args[0].y,z=args[0].z):args[0]instanceof Array?(x=args[0][0],y=args[0][1],z=args[0][2]||1):1===args.length?x=y=z=args[0]:(x=args[0],y=args[1],z=args[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,x,y,z):this._renderer.scale.call(this._renderer,x,y),this},p5.prototype.shearX=function(angle){return this._angleMode===constants.DEGREES&&(angle=this.radians(angle)),this._renderer.shearX(angle),this},p5.prototype.shearY=function(angle){return this._angleMode===constants.DEGREES&&(angle=this.radians(angle)),this._renderer.shearY(angle),this},p5.prototype.translate=function(x,y,z){return this._renderer.isP3D?this._renderer.translate(x,y,z):this._renderer.translate(x,y),this},module.exports=p5},{"./constants":36,"./core":37}],49:[function(_dereq_,module){"use strict";var p5=_dereq_("./core"),constants=_dereq_("./constants"),shapeKind=null,vertices=[],contourVertices=[],isBezier=!1,isCurve=!1,isQuadratic=!1,isContour=!1,isFirstContour=!0;p5.prototype.beginContour=function(){return contourVertices=[],isContour=!0,this},p5.prototype.beginShape=function(kind){return shapeKind=kind===constants.POINTS||kind===constants.LINES||kind===constants.TRIANGLES||kind===constants.TRIANGLE_FAN||kind===constants.TRIANGLE_STRIP||kind===constants.QUADS||kind===constants.QUAD_STRIP?kind:null,this._renderer.isP3D?this._renderer.beginShape(kind):(vertices=[],contourVertices=[]),this},p5.prototype.bezierVertex=function(){if(0===vertices.length)throw"vertex() must be used once before calling bezierVertex()";isBezier=!0;for(var vert=[],i=0;i<arguments.length;i++)vert[i]=arguments[i];return vert.isVert=!1,isContour?contourVertices.push(vert):vertices.push(vert),this},p5.prototype.curveVertex=function(x,y){return isCurve=!0,this.vertex(x,y),this},p5.prototype.endContour=function(){var vert=contourVertices[0].slice();vert.isVert=contourVertices[0].isVert,vert.moveTo=!1,contourVertices.push(vert),isFirstContour&&(vertices.push(vertices[0]),isFirstContour=!1);for(var i=0;i<contourVertices.length;i++)vertices.push(contourVertices[i]);return this},p5.prototype.endShape=function(mode){if(this._renderer.isP3D)this._renderer.endShape(mode,isCurve,isBezier,isQuadratic,isContour,shapeKind);else{if(0===vertices.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var closeShape=mode===constants.CLOSE;closeShape&&!isContour&&vertices.push(vertices[0]),this._renderer.endShape(mode,vertices,isCurve,isBezier,isQuadratic,isContour,shapeKind),isCurve=!1,isBezier=!1,isQuadratic=!1,isContour=!1,isFirstContour=!0,closeShape&&vertices.pop()}return this},p5.prototype.quadraticVertex=function(cx,cy,x3,y3){if(this._contourInited){var pt={};return pt.x=cx,pt.y=cy,pt.x3=x3,pt.y3=y3,pt.type=constants.QUADRATIC,this._contourVertices.push(pt),this}if(!(vertices.length>0))throw"vertex() must be used once before calling quadraticVertex()";isQuadratic=!0;for(var vert=[],i=0;i<arguments.length;i++)vert[i]=arguments[i];return vert.isVert=!1,isContour?contourVertices.push(vert):vertices.push(vert),this},p5.prototype.vertex=function(x,y,moveTo){if(this._renderer.isP3D)this._renderer.vertex(x,y,moveTo);else{var vert=[];vert.isVert=!0,vert[0]=x,vert[1]=y,vert[2]=0,vert[3]=0,vert[4]=0,vert[5]=this._renderer._getFill(),vert[6]=this._renderer._getStroke(),moveTo&&(vert.moveTo=moveTo),isContour?(0===contourVertices.length&&(vert.moveTo=!0),contourVertices.push(vert)):vertices.push(vert)}return this},module.exports=p5},{"./constants":36,"./core":37}],50:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.deviceOrientation=void 0,p5.prototype.accelerationX=0,p5.prototype.accelerationY=0,p5.prototype.accelerationZ=0,p5.prototype.pAccelerationX=0,p5.prototype.pAccelerationY=0,p5.prototype.pAccelerationZ=0,p5.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},p5.prototype.rotationX=0,p5.prototype.rotationY=0,p5.prototype.rotationZ=0,p5.prototype.pRotationX=0,p5.prototype.pRotationY=0,p5.prototype.pRotationZ=0;var pRotateDirectionX,pRotateDirectionY,pRotateDirectionZ,startAngleX=0,startAngleY=0,startAngleZ=0,rotateDirectionX="clockwise",rotateDirectionY="clockwise",rotateDirectionZ="clockwise";p5.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},p5.prototype.turnAxis=void 0;var move_threshold=.5,shake_threshold=30;p5.prototype.setMoveThreshold=function(val){"number"==typeof val&&(move_threshold=val)},p5.prototype.setShakeThreshold=function(val){"number"==typeof val&&(shake_threshold=val)},p5.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},p5.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},p5.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var deviceMoved=this.deviceMoved||window.deviceMoved;"function"==typeof deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>move_threshold||Math.abs(this.accelerationY-this.pAccelerationY)>move_threshold||Math.abs(this.accelerationZ-this.pAccelerationZ)>move_threshold)&&deviceMoved();var deviceTurned=this.deviceTurned||window.deviceTurned;if("function"==typeof deviceTurned){var wRX=this.rotationX+180,wPRX=this.pRotationX+180,wSAX=startAngleX+180;wRX-wPRX>0&&270>wRX-wPRX||-270>wRX-wPRX?rotateDirectionX="clockwise":(0>wRX-wPRX||wRX-wPRX>270)&&(rotateDirectionX="counter-clockwise"),rotateDirectionX!==pRotateDirectionX&&(wSAX=wRX),Math.abs(wRX-wSAX)>90&&Math.abs(wRX-wSAX)<270&&(wSAX=wRX,this._setProperty("turnAxis","X"),deviceTurned()),pRotateDirectionX=rotateDirectionX,startAngleX=wSAX-180;var wRY=this.rotationY+180,wPRY=this.pRotationY+180,wSAY=startAngleY+180;wRY-wPRY>0&&270>wRY-wPRY||-270>wRY-wPRY?rotateDirectionY="clockwise":(0>wRY-wPRY||wRY-this.pRotationY>270)&&(rotateDirectionY="counter-clockwise"),rotateDirectionY!==pRotateDirectionY&&(wSAY=wRY),Math.abs(wRY-wSAY)>90&&Math.abs(wRY-wSAY)<270&&(wSAY=wRY,this._setProperty("turnAxis","Y"),deviceTurned()),pRotateDirectionY=rotateDirectionY,startAngleY=wSAY-180,this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?rotateDirectionZ="clockwise":(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270)&&(rotateDirectionZ="counter-clockwise"),rotateDirectionZ!==pRotateDirectionZ&&(startAngleZ=this.rotationZ),Math.abs(this.rotationZ-startAngleZ)>90&&Math.abs(this.rotationZ-startAngleZ)<270&&(startAngleZ=this.rotationZ,this._setProperty("turnAxis","Z"),deviceTurned()),pRotateDirectionZ=rotateDirectionZ,this._setProperty("turnAxis",void 0)}var deviceShaken=this.deviceShaken||window.deviceShaken;if("function"==typeof deviceShaken){var accelerationChangeX,accelerationChangeY;null!==this.pAccelerationX&&(accelerationChangeX=Math.abs(this.accelerationX-this.pAccelerationX),accelerationChangeY=Math.abs(this.accelerationY-this.pAccelerationY)),accelerationChangeX+accelerationChangeY>shake_threshold&&deviceShaken()}},module.exports=p5},{"../core/core":37}],51:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),downKeys={};p5.prototype.isKeyPressed=!1,p5.prototype.keyIsPressed=!1,p5.prototype.key="",p5.prototype.keyCode=0,p5.prototype._onkeydown=function(e){if(!downKeys[e.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),downKeys[e.which]=!0;var key=String.fromCharCode(e.which);key||(key=e.which),this._setProperty("key",key);var keyPressed=this.keyPressed||window.keyPressed;if("function"==typeof keyPressed&&!e.charCode){var executeDefault=keyPressed(e);executeDefault===!1&&e.preventDefault()}}},p5.prototype._onkeyup=function(e){var keyReleased=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodeTyped",null),downKeys[e.which]=!1;var key=String.fromCharCode(e.which);if(key||(key=e.which),this._setProperty("key",key),this._setProperty("keyCode",e.which),"function"==typeof keyReleased){var executeDefault=keyReleased(e);executeDefault===!1&&e.preventDefault()}},p5.prototype._onkeypress=function(e){if(e.which!==this._lastKeyCodeTyped){this._setProperty("keyCode",e.which),this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",String.fromCharCode(e.which));var keyTyped=this.keyTyped||window.keyTyped;if("function"==typeof keyTyped){var executeDefault=keyTyped(e);executeDefault===!1&&e.preventDefault()}}},p5.prototype._onblur=function(){downKeys={}},p5.prototype.keyIsDown=function(code){return downKeys[code]},module.exports=p5},{"../core/core":37}],52:[function(_dereq_,module){"use strict";function getMousePos(canvas,w,h,evt){evt&&!evt.clientX&&(evt.touches?evt=evt.touches[0]:evt.changedTouches&&(evt=evt.changedTouches[0]));var rect=canvas.getBoundingClientRect(),sx=canvas.scrollWidth/w,sy=canvas.scrollHeight/h;return{x:(evt.clientX-rect.left)/sx,y:(evt.clientY-rect.top)/sy,winX:evt.clientX,winY:evt.clientY,id:evt.identifier}}var p5=_dereq_("../core/core"),constants=_dereq_("../core/constants");p5.prototype._hasMouseInteracted=!1,p5.prototype.mouseX=0,p5.prototype.mouseY=0,p5.prototype.pmouseX=0,p5.prototype.pmouseY=0,p5.prototype.winMouseX=0,p5.prototype.winMouseY=0,p5.prototype.pwinMouseX=0,p5.prototype.pwinMouseY=0,p5.prototype.mouseButton=0,p5.prototype.mouseIsPressed=!1,p5.prototype.isMousePressed=!1,p5.prototype._updateNextMouseCoords=function(e){if(null!==this._curElement){var mousePos=getMousePos(this._curElement.elt,this.width,this.height,e);this._setProperty("mouseX",mousePos.x),this._setProperty("mouseY",mousePos.y),this._setProperty("winMouseX",mousePos.winX),this._setProperty("winMouseY",mousePos.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},p5.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY)},p5.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",constants.CENTER):2===e.button?this._setProperty("mouseButton",constants.RIGHT):this._setProperty("mouseButton",constants.LEFT)},p5.prototype._onmousemove=function(e){var executeDefault,context=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.isMousePressed?"function"==typeof context.mouseDragged?(executeDefault=context.mouseDragged(e),executeDefault===!1&&e.preventDefault()):"function"==typeof context.touchMoved&&(executeDefault=context.touchMoved(e),executeDefault===!1&&e.preventDefault()):"function"==typeof context.mouseMoved&&(executeDefault=context.mouseMoved(e),executeDefault===!1&&e.preventDefault())},p5.prototype._onmousedown=function(e){var executeDefault,context=this._isGlobal?window:this;this._setProperty("isMousePressed",!0),this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof context.mousePressed?(executeDefault=context.mousePressed(e),executeDefault===!1&&e.preventDefault()):"function"==typeof context.touchStarted&&(executeDefault=context.touchStarted(e),executeDefault===!1&&e.preventDefault())},p5.prototype._onmouseup=function(e){var executeDefault,context=this._isGlobal?window:this;this._setProperty("isMousePressed",!1),this._setProperty("mouseIsPressed",!1),"function"==typeof context.mouseReleased?(executeDefault=context.mouseReleased(e),executeDefault===!1&&e.preventDefault()):"function"==typeof context.touchEnded&&(executeDefault=context.touchEnded(e),executeDefault===!1&&e.preventDefault())},p5.prototype._ondragend=p5.prototype._onmouseup,p5.prototype._ondragover=p5.prototype._onmousemove,p5.prototype._onclick=function(e){var context=this._isGlobal?window:this;if("function"==typeof context.mouseClicked){var executeDefault=context.mouseClicked(e);executeDefault===!1&&e.preventDefault()}},p5.prototype._onwheel=function(e){var context=this._isGlobal?window:this;if("function"==typeof context.mouseWheel){e.delta=e.deltaY;var executeDefault=context.mouseWheel(e);executeDefault===!1&&e.preventDefault()}},module.exports=p5},{"../core/constants":36,"../core/core":37}],53:[function(_dereq_,module){"use strict";function getTouchInfo(canvas,w,h,e,i){i=i||0;var rect=canvas.getBoundingClientRect(),sx=canvas.scrollWidth/w,sy=canvas.scrollHeight/h,touch=e.touches[i]||e.changedTouches[i];return{x:(touch.clientX-rect.left)/sx,y:(touch.clientY-rect.top)/sy,winX:touch.clientX,winY:touch.clientY,id:touch.identifier}}var p5=_dereq_("../core/core");p5.prototype.touches=[],p5.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var touches=[],i=0;i<e.touches.length;i++)touches[i]=getTouchInfo(this._curElement.elt,this.width,this.height,e,i);this._setProperty("touches",touches)}},p5.prototype._ontouchstart=function(e){var executeDefault,context=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof context.touchStarted?(executeDefault=context.touchStarted(e),executeDefault===!1&&e.preventDefault()):"function"==typeof context.mousePressed&&(executeDefault=context.mousePressed(e),executeDefault===!1&&e.preventDefault())},p5.prototype._ontouchmove=function(e){var executeDefault,context=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof context.touchMoved?(executeDefault=context.touchMoved(e),executeDefault===!1&&e.preventDefault()):"function"==typeof context.mouseDragged&&(executeDefault=context.mouseDragged(e),executeDefault===!1&&e.preventDefault())},p5.prototype._ontouchend=function(e){this._updateTouchCoords(e),this._updateNextMouseCoords(e),0===this.touches.length&&this._setProperty("touchIsDown",!1);var executeDefault,context=this._isGlobal?window:this;"function"==typeof context.touchEnded?(executeDefault=context.touchEnded(e),executeDefault===!1&&e.preventDefault()):"function"==typeof context.mouseReleased&&(executeDefault=context.mouseReleased(e),executeDefault===!1&&e.preventDefault())},module.exports=p5},{"../core/core":37}],54:[function(_dereq_,module){"use strict";function buildBlurKernel(r){var radius=3.5*r|0;if(radius=1>radius?1:248>radius?radius:248,blurRadius!==radius){blurRadius=radius,blurKernelSize=1+blurRadius<<1,blurKernel=new Int32Array(blurKernelSize),blurMult=new Array(blurKernelSize);for(var l=0;blurKernelSize>l;l++)blurMult[l]=new Int32Array(256);for(var bk,bki,bm,bmi,i=1,radiusi=radius-1;radius>i;i++){blurKernel[radius+i]=blurKernel[radiusi]=bki=radiusi*radiusi,bm=blurMult[radius+i],bmi=blurMult[radiusi--];for(var j=0;256>j;j++)bm[j]=bmi[j]=bki*j}bk=blurKernel[radius]=radius*radius,bm=blurMult[radius];for(var k=0;256>k;k++)bm[k]=bk*k}}function blurARGB(canvas,radius){for(var pixels=Filters._toPixels(canvas),width=canvas.width,height=canvas.height,numPackedPixels=width*height,argb=new Int32Array(numPackedPixels),j=0;numPackedPixels>j;j++)argb[j]=Filters._getARGB(pixels,j);var sum,cr,cg,cb,ca,read,ri,ym,ymi,bk0,a2=new Int32Array(numPackedPixels),r2=new Int32Array(numPackedPixels),g2=new Int32Array(numPackedPixels),b2=new Int32Array(numPackedPixels),yi=0;buildBlurKernel(radius);var x,y,i,bm;for(y=0;height>y;y++){for(x=0;width>x;x++){if(cb=cg=cr=ca=sum=0,read=x-blurRadius,0>read)bk0=-read,read=0;else{if(read>=width)break;bk0=0}for(i=bk0;blurKernelSize>i&&!(read>=width);i++){var c=argb[read+yi];bm=blurMult[i],ca+=bm[(-16777216&c)>>>24],cr+=bm[(16711680&c)>>16],cg+=bm[(65280&c)>>8],cb+=bm[255&c],sum+=blurKernel[i],read++}ri=yi+x,a2[ri]=ca/sum,r2[ri]=cr/sum,g2[ri]=cg/sum,b2[ri]=cb/sum}yi+=width}for(yi=0,ym=-blurRadius,ymi=ym*width,y=0;height>y;y++){for(x=0;width>x;x++){if(cb=cg=cr=ca=sum=0,0>ym)bk0=ri=-ym,read=x;else{if(ym>=height)break;bk0=0,ri=ym,read=x+ymi}for(i=bk0;blurKernelSize>i&&!(ri>=height);i++)bm=blurMult[i],ca+=bm[a2[read]],cr+=bm[r2[read]],cg+=bm[g2[read]],cb+=bm[b2[read]],sum+=blurKernel[i],ri++,read+=width;argb[x+yi]=ca/sum<<24|cr/sum<<16|cg/sum<<8|cb/sum}yi+=width,ymi+=width,ym++}Filters._setPixels(pixels,argb)}var Filters={};Filters._toPixels=function(canvas){return canvas instanceof ImageData?canvas.data:canvas.getContext("2d").getImageData(0,0,canvas.width,canvas.height).data},Filters._getARGB=function(data,i){var offset=4*i;return data[offset+3]<<24&4278190080|data[offset]<<16&16711680|data[offset+1]<<8&65280|255&data[offset+2]},Filters._setPixels=function(pixels,data){for(var offset=0,i=0,al=pixels.length;al>i;i++)offset=4*i,pixels[offset+0]=(16711680&data[i])>>>16,pixels[offset+1]=(65280&data[i])>>>8,pixels[offset+2]=255&data[i],pixels[offset+3]=(4278190080&data[i])>>>24},Filters._toImageData=function(canvas){return canvas instanceof ImageData?canvas:canvas.getContext("2d").getImageData(0,0,canvas.width,canvas.height)},Filters._createImageData=function(width,height){return Filters._tmpCanvas=document.createElement("canvas"),Filters._tmpCtx=Filters._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(width,height)},Filters.apply=function(canvas,func,filterParam){var ctx=canvas.getContext("2d"),imageData=ctx.getImageData(0,0,canvas.width,canvas.height),newImageData=func(imageData,filterParam);newImageData instanceof ImageData?ctx.putImageData(newImageData,0,0,0,0,canvas.width,canvas.height):ctx.putImageData(imageData,0,0,0,0,canvas.width,canvas.height)},Filters.threshold=function(canvas,level){var pixels=Filters._toPixels(canvas);void 0===level&&(level=.5);for(var thresh=Math.floor(255*level),i=0;i<pixels.length;i+=4){var val,r=pixels[i],g=pixels[i+1],b=pixels[i+2],gray=.2126*r+.7152*g+.0722*b;val=gray>=thresh?255:0,pixels[i]=pixels[i+1]=pixels[i+2]=val}},Filters.gray=function(canvas){for(var pixels=Filters._toPixels(canvas),i=0;i<pixels.length;i+=4){var r=pixels[i],g=pixels[i+1],b=pixels[i+2],gray=.2126*r+.7152*g+.0722*b;pixels[i]=pixels[i+1]=pixels[i+2]=gray}},Filters.opaque=function(canvas){for(var pixels=Filters._toPixels(canvas),i=0;i<pixels.length;i+=4)pixels[i+3]=255;return pixels},Filters.invert=function(canvas){for(var pixels=Filters._toPixels(canvas),i=0;i<pixels.length;i+=4)pixels[i]=255-pixels[i],pixels[i+1]=255-pixels[i+1],pixels[i+2]=255-pixels[i+2]},Filters.posterize=function(canvas,level){var pixels=Filters._toPixels(canvas);if(2>level||level>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var levels1=level-1,i=0;i<pixels.length;i+=4){var rlevel=pixels[i],glevel=pixels[i+1],blevel=pixels[i+2];pixels[i]=255*(rlevel*level>>8)/levels1,pixels[i+1]=255*(glevel*level>>8)/levels1,pixels[i+2]=255*(blevel*level>>8)/levels1}},Filters.dilate=function(canvas){for(var currRowIdx,maxRowIdx,colOrig,colOut,currLum,idxRight,idxLeft,idxUp,idxDown,colRight,colLeft,colUp,colDown,lumRight,lumLeft,lumUp,lumDown,pixels=Filters._toPixels(canvas),currIdx=0,maxIdx=pixels.length?pixels.length/4:0,out=new Int32Array(maxIdx);maxIdx>currIdx;)for(currRowIdx=currIdx,maxRowIdx=currIdx+canvas.width;maxRowIdx>currIdx;)colOrig=colOut=Filters._getARGB(pixels,currIdx),idxLeft=currIdx-1,idxRight=currIdx+1,idxUp=currIdx-canvas.width,idxDown=currIdx+canvas.width,currRowIdx>idxLeft&&(idxLeft=currIdx),idxRight>=maxRowIdx&&(idxRight=currIdx),0>idxUp&&(idxUp=0),idxDown>=maxIdx&&(idxDown=currIdx),colUp=Filters._getARGB(pixels,idxUp),colLeft=Filters._getARGB(pixels,idxLeft),colDown=Filters._getARGB(pixels,idxDown),colRight=Filters._getARGB(pixels,idxRight),currLum=77*(colOrig>>16&255)+151*(colOrig>>8&255)+28*(255&colOrig),lumLeft=77*(colLeft>>16&255)+151*(colLeft>>8&255)+28*(255&colLeft),lumRight=77*(colRight>>16&255)+151*(colRight>>8&255)+28*(255&colRight),lumUp=77*(colUp>>16&255)+151*(colUp>>8&255)+28*(255&colUp),lumDown=77*(colDown>>16&255)+151*(colDown>>8&255)+28*(255&colDown),lumLeft>currLum&&(colOut=colLeft,currLum=lumLeft),lumRight>currLum&&(colOut=colRight,currLum=lumRight),lumUp>currLum&&(colOut=colUp,currLum=lumUp),lumDown>currLum&&(colOut=colDown,currLum=lumDown),out[currIdx++]=colOut;Filters._setPixels(pixels,out)},Filters.erode=function(canvas){for(var currRowIdx,maxRowIdx,colOrig,colOut,currLum,idxRight,idxLeft,idxUp,idxDown,colRight,colLeft,colUp,colDown,lumRight,lumLeft,lumUp,lumDown,pixels=Filters._toPixels(canvas),currIdx=0,maxIdx=pixels.length?pixels.length/4:0,out=new Int32Array(maxIdx);maxIdx>currIdx;)for(currRowIdx=currIdx,maxRowIdx=currIdx+canvas.width;maxRowIdx>currIdx;)colOrig=colOut=Filters._getARGB(pixels,currIdx),idxLeft=currIdx-1,idxRight=currIdx+1,idxUp=currIdx-canvas.width,idxDown=currIdx+canvas.width,currRowIdx>idxLeft&&(idxLeft=currIdx),idxRight>=maxRowIdx&&(idxRight=currIdx),0>idxUp&&(idxUp=0),idxDown>=maxIdx&&(idxDown=currIdx),colUp=Filters._getARGB(pixels,idxUp),colLeft=Filters._getARGB(pixels,idxLeft),colDown=Filters._getARGB(pixels,idxDown),colRight=Filters._getARGB(pixels,idxRight),currLum=77*(colOrig>>16&255)+151*(colOrig>>8&255)+28*(255&colOrig),lumLeft=77*(colLeft>>16&255)+151*(colLeft>>8&255)+28*(255&colLeft),lumRight=77*(colRight>>16&255)+151*(colRight>>8&255)+28*(255&colRight),lumUp=77*(colUp>>16&255)+151*(colUp>>8&255)+28*(255&colUp),lumDown=77*(colDown>>16&255)+151*(colDown>>8&255)+28*(255&colDown),currLum>lumLeft&&(colOut=colLeft,currLum=lumLeft),currLum>lumRight&&(colOut=colRight,currLum=lumRight),currLum>lumUp&&(colOut=colUp,currLum=lumUp),currLum>lumDown&&(colOut=colDown,currLum=lumDown),out[currIdx++]=colOut;Filters._setPixels(pixels,out)};var blurRadius,blurKernelSize,blurKernel,blurMult;Filters.blur=function(canvas,radius){blurARGB(canvas,radius);

},module.exports=Filters},{}],55:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),frames=[];p5.prototype.createImage=function(width,height){return new p5.Image(width,height)},p5.prototype.saveCanvas=function(){var cnv,filename,extension;if(3===arguments.length?(cnv=arguments[0],filename=arguments[1],extension=arguments[2]):2===arguments.length?"object"==typeof arguments[0]?(cnv=arguments[0],filename=arguments[1]):(filename=arguments[0],extension=arguments[1]):1===arguments.length&&("object"==typeof arguments[0]?cnv=arguments[0]:filename=arguments[0]),cnv instanceof p5.Element&&(cnv=cnv.elt),cnv instanceof HTMLCanvasElement||(cnv=null),extension||(extension=p5.prototype._checkFileExtension(filename,extension)[1],""===extension&&(extension="png")),cnv||this._curElement&&this._curElement.elt&&(cnv=this._curElement.elt),p5.prototype._isSafari()){var aText="Hello, Safari user!\n";aText+="Now capturing a screenshot...\n",aText+="To save this image,\n",aText+="go to File --> Save As.\n",alert(aText),window.location.href=cnv.toDataURL()}else{var mimeType;if("undefined"==typeof extension)extension="png",mimeType="image/png";else switch(extension){case"png":mimeType="image/png";break;case"jpeg":mimeType="image/jpeg";break;case"jpg":mimeType="image/jpeg";break;default:mimeType="image/png"}var downloadMime="image/octet-stream",imageData=cnv.toDataURL(mimeType);imageData=imageData.replace(mimeType,downloadMime),p5.prototype.downloadFile(imageData,filename,extension)}},p5.prototype.saveFrames=function(fName,ext,_duration,_fps,callback){var duration=_duration||3;duration=p5.prototype.constrain(duration,0,15),duration=1e3*duration;var fps=_fps||15;fps=p5.prototype.constrain(fps,0,22);var count=0,makeFrame=p5.prototype._makeFrame,cnv=this._curElement.elt,frameFactory=setInterval(function(){makeFrame(fName+count,ext,cnv),count++},1e3/fps);setTimeout(function(){if(clearInterval(frameFactory),callback)callback(frames);else for(var i=0;i<frames.length;i++){var f=frames[i];p5.prototype.downloadFile(f.imageData,f.filename,f.ext)}frames=[]},duration+.01)},p5.prototype._makeFrame=function(filename,extension,_cnv){var cnv;cnv=this?this._curElement.elt:_cnv;var mimeType;if(extension)switch(extension.toLowerCase()){case"png":mimeType="image/png";break;case"jpeg":mimeType="image/jpeg";break;case"jpg":mimeType="image/jpeg";break;default:mimeType="image/png"}else extension="png",mimeType="image/png";var downloadMime="image/octet-stream",imageData=cnv.toDataURL(mimeType);imageData=imageData.replace(mimeType,downloadMime);var thisFrame={};thisFrame.imageData=imageData,thisFrame.filename=filename,thisFrame.ext=extension,frames.push(thisFrame)},module.exports=p5},{"../core/core":37}],56:[function(_dereq_,module){"use strict";function _sAssign(sVal,iVal){return sVal>0&&iVal>sVal?sVal:iVal}var p5=_dereq_("../core/core"),Filters=_dereq_("./filters"),canvas=_dereq_("../core/canvas"),constants=_dereq_("../core/constants");_dereq_("../core/error_helpers"),p5.prototype.loadImage=function(path,successCallback,failureCallback){var img=new Image,pImg=new p5.Image(1,1,this),decrementPreload=p5._getDecrementPreload.apply(this,arguments);return img.onload=function(){pImg.width=pImg.canvas.width=img.width,pImg.height=pImg.canvas.height=img.height,pImg.drawingContext.drawImage(img,0,0),"function"==typeof successCallback&&successCallback(pImg),decrementPreload&&successCallback!==decrementPreload&&decrementPreload()},img.onerror=function(e){p5._friendlyFileLoadError(0,img.src),"function"==typeof failureCallback&&failureCallback!==decrementPreload&&failureCallback(e)},0!==path.indexOf("data:image/")&&(img.crossOrigin="Anonymous"),img.src=path,pImg},p5.prototype.image=function(img,dx,dy,dWidth,dHeight,sx,sy,sWidth,sHeight){var defW=img.width,defH=img.height;if(img.elt&&img.elt.videoWidth&&!img.canvas){var actualW=img.elt.videoWidth,actualH=img.elt.videoHeight;defW=img.elt.videoWidth,defH=img.elt.width*actualH/actualW}var _dx=dx,_dy=dy,_dw=dWidth||defW,_dh=dHeight||defH,_sx=sx||0,_sy=sy||0,_sw=sWidth||defW,_sh=sHeight||defH;_sw=_sAssign(_sw,defW),_sh=_sAssign(_sh,defH);var pd=1;img.elt&&img.elt.videoWidth&&img.elt.style.width&&!img.canvas?pd=img.elt.videoWidth/parseInt(img.elt.style.width,10):img.elt&&img.elt.width&&img.elt.style.width&&(pd=img.elt.width/parseInt(img.elt.style.width,10)),_sx*=pd,_sy*=pd,_sh*=pd,_sw*=pd;var vals=canvas.modeAdjust(_dx,_dy,_dw,_dh,this._renderer._imageMode);this._renderer.image(img,_sx,_sy,_sw,_sh,vals.x,vals.y,vals.w,vals.h)},p5.prototype.tint=function(){var c=this.color.apply(this,arguments);this._renderer._tint=c.levels},p5.prototype.noTint=function(){this._renderer._tint=null},p5.prototype._getTintedImageCanvas=function(img){if(!img.canvas)return img;var pixels=Filters._toPixels(img.canvas),tmpCanvas=document.createElement("canvas");tmpCanvas.width=img.canvas.width,tmpCanvas.height=img.canvas.height;for(var tmpCtx=tmpCanvas.getContext("2d"),id=tmpCtx.createImageData(img.canvas.width,img.canvas.height),newPixels=id.data,i=0;i<pixels.length;i+=4){var r=pixels[i],g=pixels[i+1],b=pixels[i+2],a=pixels[i+3];newPixels[i]=r*this._renderer._tint[0]/255,newPixels[i+1]=g*this._renderer._tint[1]/255,newPixels[i+2]=b*this._renderer._tint[2]/255,newPixels[i+3]=a*this._renderer._tint[3]/255}return tmpCtx.putImageData(id,0,0),tmpCanvas},p5.prototype.imageMode=function(m){(m===constants.CORNER||m===constants.CORNERS||m===constants.CENTER)&&(this._renderer._imageMode=m)},module.exports=p5},{"../core/canvas":35,"../core/constants":36,"../core/core":37,"../core/error_helpers":40,"./filters":54}],57:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),Filters=_dereq_("./filters");p5.Image=function(width,height){this.width=width,this.height=height,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),this._pixelDensity=1,this.isTexture=!1,this.pixels=[]},p5.Image.prototype._setProperty=function(prop,value){this[prop]=value},p5.Image.prototype.loadPixels=function(){p5.Renderer2D.prototype.loadPixels.call(this)},p5.Image.prototype.updatePixels=function(x,y,w,h){p5.Renderer2D.prototype.updatePixels.call(this,x,y,w,h)},p5.Image.prototype.get=function(x,y,w,h){return p5.Renderer2D.prototype.get.call(this,x,y,w,h)},p5.Image.prototype.set=function(x,y,imgOrCol){p5.Renderer2D.prototype.set.call(this,x,y,imgOrCol)},p5.Image.prototype.resize=function(width,height){0===width&&0===height?(width=this.canvas.width,height=this.canvas.height):0===width?width=this.canvas.width*height/this.canvas.height:0===height&&(height=this.canvas.height*width/this.canvas.width),width=Math.floor(width),height=Math.floor(height);var tempCanvas=document.createElement("canvas");tempCanvas.width=width,tempCanvas.height=height,tempCanvas.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,tempCanvas.width,tempCanvas.height),this.canvas.width=this.width=width,this.canvas.height=this.height=height,this.drawingContext.drawImage(tempCanvas,0,0,width,height,0,0,width,height),this.pixels.length>0&&this.loadPixels()},p5.Image.prototype.copy=function(){p5.prototype.copy.apply(this,arguments)},p5.Image.prototype.mask=function(p5Image){void 0===p5Image&&(p5Image=this);var currBlend=this.drawingContext.globalCompositeOperation,scaleFactor=1;p5Image instanceof p5.Renderer&&(scaleFactor=p5Image._pInst._pixelDensity);var copyArgs=[p5Image,0,0,scaleFactor*p5Image.width,scaleFactor*p5Image.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",p5.Image.prototype.copy.apply(this,copyArgs),this.drawingContext.globalCompositeOperation=currBlend},p5.Image.prototype.filter=function(operation,value){Filters.apply(this.canvas,Filters[operation.toLowerCase()],value)},p5.Image.prototype.blend=function(){p5.prototype.blend.apply(this,arguments)},p5.Image.prototype.save=function(filename,extension){var mimeType;if(extension)switch(extension.toLowerCase()){case"png":mimeType="image/png";break;case"jpeg":mimeType="image/jpeg";break;case"jpg":mimeType="image/jpeg";break;default:mimeType="image/png"}else extension="png",mimeType="image/png";var downloadMime="image/octet-stream",imageData=this.canvas.toDataURL(mimeType);imageData=imageData.replace(mimeType,downloadMime),p5.prototype.downloadFile(imageData,filename,extension)},module.exports=p5.Image},{"../core/core":37,"./filters":54}],58:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),Filters=_dereq_("./filters");_dereq_("../color/p5.Color"),p5.prototype.pixels=[],p5.prototype.blend=function(){this._renderer?this._renderer.blend.apply(this._renderer,arguments):p5.Renderer2D.prototype.blend.apply(this,arguments)},p5.prototype.copy=function(){p5.Renderer2D._copyHelper.apply(this,arguments)},p5.prototype.filter=function(operation,value){void 0!==this.canvas?Filters.apply(this.canvas,Filters[operation.toLowerCase()],value):Filters.apply(this.elt,Filters[operation.toLowerCase()],value)},p5.prototype.get=function(x,y,w,h){return this._renderer.get(x,y,w,h)},p5.prototype.loadPixels=function(){this._renderer.loadPixels()},p5.prototype.set=function(x,y,imgOrCol){this._renderer.set(x,y,imgOrCol)},p5.prototype.updatePixels=function(x,y,w,h){0!==this.pixels.length&&this._renderer.updatePixels(x,y,w,h)},module.exports=p5},{"../color/p5.Color":31,"../core/core":37,"./filters":54}],59:[function(_dereq_,module){"use strict";function makeObject(row,headers){var ret={};if(headers=headers||[],"undefined"==typeof headers)for(var j=0;j<row.length;j++)headers[j.toString()]=j;for(var i=0;i<headers.length;i++){var key=headers[i],val=row[i];ret[key]=val}return ret}function escapeHelper(content){return content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function _checkFileExtension(filename,extension){extension&&extension!==!0&&"true"!==extension||(extension=""),filename||(filename="untitled");var ext="";return filename&&filename.indexOf(".")>-1&&(ext=filename.split(".").pop()),extension&&ext!==extension&&(ext=extension,filename=filename+"."+ext),[filename,ext]}function destroyClickedElement(event){document.body.removeChild(event.target)}var p5=_dereq_("../core/core"),reqwest=_dereq_("reqwest"),opentype=_dereq_("opentype.js");_dereq_("../core/error_helpers"),p5._getDecrementPreload=function(){var decrementPreload=arguments[arguments.length-1];return(window.preload||this&&this.preload)&&"function"==typeof decrementPreload?decrementPreload:null},p5.prototype.loadFont=function(path,onSuccess,onError){var p5Font=new p5.Font(this),decrementPreload=p5._getDecrementPreload.apply(this,arguments);return opentype.load(path,function(err,font){if(err)return"undefined"!=typeof onError&&onError!==decrementPreload?onError(err):(p5._friendlyFileLoadError(4,path),void console.error(err,path));p5Font.font=font,"undefined"!=typeof onSuccess&&onSuccess(p5Font),decrementPreload&&onSuccess!==decrementPreload&&decrementPreload();var fontFamily,newStyle,validFontTypes=["ttf","otf","woff","woff2"],fileNoPath=path.split("\\").pop().split("/").pop(),lastDotIdx=fileNoPath.lastIndexOf("."),fileExt=1>lastDotIdx?null:fileNoPath.substr(lastDotIdx+1);validFontTypes.indexOf(fileExt)>-1&&(fontFamily=fileNoPath.substr(0,lastDotIdx),newStyle=document.createElement("style"),newStyle.appendChild(document.createTextNode("\n@font-face {\nfont-family: "+fontFamily+";\nsrc: url("+path+");\n}\n")),document.head.appendChild(newStyle))}),p5Font},p5.prototype.createInput=function(){throw"not yet implemented"},p5.prototype.createReader=function(){throw"not yet implemented"},p5.prototype.loadBytes=function(){throw"not yet implemented"},p5.prototype.loadJSON=function(){for(var errorCallback,path=arguments[0],callback=arguments[1],decrementPreload=p5._getDecrementPreload.apply(this,arguments),ret={},t="json",i=2;i<arguments.length;i++){var arg=arguments[i];"string"==typeof arg?("jsonp"===arg||"json"===arg)&&(t=arg):"function"==typeof arg&&(errorCallback=arg)}return reqwest({url:path,type:t,crossOrigin:!0,error:function(resp){errorCallback?errorCallback(resp):console.log(resp.statusText)},success:function(resp){for(var k in resp)ret[k]=resp[k];"undefined"!=typeof callback&&callback(resp),decrementPreload&&callback!==decrementPreload&&decrementPreload()}}),ret},p5.prototype.loadStrings=function(path,callback,errorCallback){var ret=[],req=new XMLHttpRequest,decrementPreload=p5._getDecrementPreload.apply(this,arguments);return req.addEventListener("error",function(resp){errorCallback?errorCallback(resp):console.log(resp.responseText)}),req.open("GET",path,!0),req.onreadystatechange=function(){if(4===req.readyState)if(200===req.status){var arr=req.responseText.match(/[^\r\n]+/g);for(var k in arr)ret[k]=arr[k];"undefined"!=typeof callback&&callback(ret),decrementPreload&&callback!==decrementPreload&&decrementPreload()}else errorCallback?errorCallback(req):console.log(req.statusText)},req.send(null),ret},p5.prototype.loadTable=function(path){for(var callback=null,options=[],header=!1,sep=",",separatorSet=!1,decrementPreload=p5._getDecrementPreload.apply(this,arguments),i=1;i<arguments.length;i++)if("function"==typeof arguments[i]&&arguments[i]!==decrementPreload)callback=arguments[i];else if("string"==typeof arguments[i])if(options.push(arguments[i]),"header"===arguments[i]&&(header=!0),"csv"===arguments[i]){if(separatorSet)throw new Error("Cannot set multiple separator types.");sep=",",separatorSet=!0}else if("tsv"===arguments[i]){if(separatorSet)throw new Error("Cannot set multiple separator types.");sep="	",separatorSet=!0}var t=new p5.Table;return reqwest({url:path,crossOrigin:!0,type:"csv"}).then(function(resp){resp=resp.responseText;for(var currentChar,state={},PRE_TOKEN=0,MID_TOKEN=1,POST_TOKEN=2,POST_RECORD=4,QUOTE='"',CR="\r",LF="\n",records=[],offset=0,currentRecord=null,recordBegin=function(){state.escaped=!1,currentRecord=[],tokenBegin()},recordEnd=function(){state.currentState=POST_RECORD,records.push(currentRecord),currentRecord=null},tokenBegin=function(){state.currentState=PRE_TOKEN,state.token=""},tokenEnd=function(){currentRecord.push(state.token),tokenBegin()};;){if(currentChar=resp[offset++],null==currentChar){if(state.escaped)throw new Error("Unclosed quote in file.");if(currentRecord){tokenEnd(),recordEnd();break}}if(null===currentRecord&&recordBegin(),state.currentState===PRE_TOKEN){if(currentChar===QUOTE){state.escaped=!0,state.currentState=MID_TOKEN;continue}state.currentState=MID_TOKEN}state.currentState===MID_TOKEN&&state.escaped?currentChar===QUOTE?resp[offset]===QUOTE?(state.token+=QUOTE,offset++):(state.escaped=!1,state.currentState=POST_TOKEN):state.token+=currentChar:currentChar===CR?(resp[offset]===LF&&offset++,tokenEnd(),recordEnd()):currentChar===LF?(tokenEnd(),recordEnd()):currentChar===sep?tokenEnd():state.currentState===MID_TOKEN&&(state.token+=currentChar)}if(header)t.columns=records.shift();else for(i=0;i<records[0].length;i++)t.columns[i]="null";var row;for(i=0;i<records.length&&(i!==records.length-1||1!==records[i].length||"undefined"!==records[i][0]);i++)row=new p5.TableRow,row.arr=records[i],row.obj=makeObject(records[i],t.columns),t.addRow(row);null!==callback&&callback(t),decrementPreload&&callback!==decrementPreload&&decrementPreload()}).fail(function(){p5._friendlyFileLoadError(2,path),"function"==typeof callback&&callback!==decrementPreload&&callback(!1)}),t},p5.prototype.parseXML=function(two){var i,one=new p5.XML;if(two.children.length){for(i=0;i<two.children.length;i++){var node=parseXML(two.children[i]);one.addChild(node)}one.setName(two.nodeName),one._setCont(two.textContent),one._setAttributes(two);for(var j=0;j<one.children.length;j++)one.children[j].parent=one;return one}return one.setName(two.nodeName),one._setCont(two.textContent),one._setAttributes(two),one},p5.prototype.loadXML=function(path,callback,errorCallback){var ret={},decrementPreload=p5._getDecrementPreload.apply(this,arguments);return reqwest({url:path,type:"xml",crossOrigin:!0,error:function(resp){errorCallback?errorCallback(resp):console.log(resp.statusText)}}).then(function(resp){var xml=parseXML(resp.documentElement);for(var key in xml)ret[key]=xml[key];"undefined"!=typeof callback&&callback(ret),decrementPreload&&callback!==decrementPreload&&decrementPreload()}),ret},p5.prototype.selectFolder=function(){throw"not yet implemented"},p5.prototype.selectInput=function(){throw"not yet implemented"},p5.prototype.httpGet=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];args.push("GET"),p5.prototype.httpDo.apply(this,args)},p5.prototype.httpPost=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];args.push("POST"),p5.prototype.httpDo.apply(this,args)},p5.prototype.httpDo=function(){if("object"==typeof arguments[0])reqwest(arguments[0]);else{for(var callback,errorCallback,method="GET",path=arguments[0],data={},type="",i=1;i<arguments.length;i++){var a=arguments[i];"string"==typeof a?"GET"===a||"POST"===a||"PUT"===a||"DELETE"===a?method=a:type=a:"object"==typeof a?data=a:"function"==typeof a&&(callback?errorCallback=a:callback=a)}""===type&&(type=-1!==path.indexOf("json")?"json":-1!==path.indexOf("xml")?"xml":"text"),reqwest({url:path,method:method,data:data,type:type,crossOrigin:!0,success:function(resp){"undefined"!=typeof callback&&callback("text"===type?resp.response:resp)},error:function(resp){errorCallback?errorCallback(resp):console.log(resp.statusText)}})}},window.URL=window.URL||window.webkitURL,p5.prototype._pWriters=[],p5.prototype.beginRaw=function(){throw"not yet implemented"},p5.prototype.beginRecord=function(){throw"not yet implemented"},p5.prototype.createOutput=function(){throw"not yet implemented"},p5.prototype.createWriter=function(name,extension){var newPW;for(var i in p5.prototype._pWriters)if(p5.prototype._pWriters[i].name===name)return newPW=new p5.PrintWriter(name+window.millis(),extension),p5.prototype._pWriters.push(newPW),newPW;return newPW=new p5.PrintWriter(name,extension),p5.prototype._pWriters.push(newPW),newPW},p5.prototype.endRaw=function(){throw"not yet implemented"},p5.prototype.endRecord=function(){throw"not yet implemented"},p5.PrintWriter=function(filename,extension){var self=this;this.name=filename,this.content="",this.print=function(data){this.content+=data},this.print=function(data){this.content+=data+"\n"},this.flush=function(){this.content=""},this.close=function(){var arr=[];arr.push(this.content),p5.prototype.writeFile(arr,filename,extension);for(var i in p5.prototype._pWriters)p5.prototype._pWriters[i].name===this.name&&p5.prototype._pWriters.splice(i,1);self.flush(),self={}}},p5.prototype.saveBytes=function(){throw"not yet implemented"},p5.prototype.save=function(){var args=arguments,cnv=this._curElement.elt;if(0===args.length)return void p5.prototype.saveCanvas(cnv);if(args[0]instanceof p5.Renderer||args[0]instanceof p5.Graphics)return void p5.prototype.saveCanvas(args[0].elt,args[1],args[2]);if(1===args.length&&"string"==typeof args[0])p5.prototype.saveCanvas(cnv,args[0]);else{var extension=_checkFileExtension(args[1],args[2])[1];switch(extension){case"json":return void p5.prototype.saveJSON(args[0],args[1],args[2]);case"txt":return void p5.prototype.saveStrings(args[0],args[1],args[2]);default:args[0]instanceof Array?p5.prototype.saveStrings(args[0],args[1],args[2]):args[0]instanceof p5.Table?p5.prototype.saveTable(args[0],args[1],args[2],args[3]):args[0]instanceof p5.Image?p5.prototype.saveCanvas(args[0].canvas,args[1]):args[0]instanceof p5.SoundFile&&p5.prototype.saveSound(args[0],args[1],args[2],args[3])}}},p5.prototype.saveJSON=function(json,filename,opt){var stringify;stringify=opt?JSON.stringify(json):JSON.stringify(json,void 0,2),console.log(stringify),this.saveStrings(stringify.split("\n"),filename,"json")},p5.prototype.saveJSONObject=p5.prototype.saveJSON,p5.prototype.saveJSONArray=p5.prototype.saveJSON,p5.prototype.saveStream=function(){throw"not yet implemented"},p5.prototype.saveStrings=function(list,filename,extension){for(var ext=extension||"txt",pWriter=this.createWriter(filename,ext),i=0;i<list.length;i++)pWriter.print(i<list.length-1?list[i]:list[i]);pWriter.close(),pWriter.flush()},p5.prototype.saveXML=function(){throw"not yet implemented"},p5.prototype.selectOutput=function(){throw"not yet implemented"},p5.prototype.saveTable=function(table,filename,options){var pWriter=this.createWriter(filename,options),header=table.columns,sep=",";if("tsv"===options&&(sep="	"),"html"!==options){if("0"!==header[0])for(var h=0;h<header.length;h++)pWriter.print(h<header.length-1?header[h]+sep:header[h]);for(var i=0;i<table.rows.length;i++){var j;for(j=0;j<table.rows[i].arr.length;j++)pWriter.print(j<table.rows[i].arr.length-1?table.rows[i].arr[j]+sep:i<table.rows.length-1?table.rows[i].arr[j]:table.rows[i].arr[j])}}else{pWriter.print("<html>"),pWriter.print("<head>");var str='  <meta http-equiv="content-type" content';if(str+='="text/html;charset=utf-8" />',pWriter.print(str),pWriter.print("</head>"),pWriter.print("<body>"),pWriter.print("  <table>"),"0"!==header[0]){pWriter.print("    <tr>");for(var k=0;k<header.length;k++){var e=escapeHelper(header[k]);pWriter.print("      <td>"+e),pWriter.print("      </td>")}pWriter.print("    </tr>")}for(var row=0;row<table.rows.length;row++){pWriter.print("    <tr>");for(var col=0;col<table.columns.length;col++){var entry=table.rows[row].getString(col),htmlEntry=escapeHelper(entry);pWriter.print("      <td>"+htmlEntry),pWriter.print("      </td>")}pWriter.print("    </tr>")}pWriter.print("  </table>"),pWriter.print("</body>"),pWriter.print("</html>")}pWriter.close(),pWriter.flush()},p5.prototype.writeFile=function(dataToDownload,filename,extension){var type="application/octet-stream";p5.prototype._isSafari()&&(type="text/plain");var blob=new Blob(dataToDownload,{type:type}),href=window.URL.createObjectURL(blob);p5.prototype.downloadFile(href,filename,extension)},p5.prototype.downloadFile=function(href,fName,extension){var fx=_checkFileExtension(fName,extension),filename=fx[0],ext=fx[1],a=document.createElement("a");if(a.href=href,a.download=filename,a.onclick=destroyClickedElement,a.style.display="none",document.body.appendChild(a),p5.prototype._isSafari()){var aText="Hello, Safari user! To download this file...\n";aText+="1. Go to File --> Save As.\n",aText+='2. Choose "Page Source" as the Format.\n',aText+='3. Name it with this extension: ."'+ext+'"',alert(aText)}a.click(),href=null},p5.prototype._checkFileExtension=_checkFileExtension,p5.prototype._isSafari=function(){var x=Object.prototype.toString.call(window.HTMLElement);return x.indexOf("Constructor")>0},module.exports=p5},{"../core/core":37,"../core/error_helpers":40,"opentype.js":8,reqwest:27}],60:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.Table=function(){this.columns=[],this.rows=[]},p5.Table.prototype.addRow=function(row){var r=row||new p5.TableRow;if("undefined"==typeof r.arr||"undefined"==typeof r.obj)throw"invalid TableRow: "+r;return r.table=this,this.rows.push(r),r},p5.Table.prototype.removeRow=function(id){this.rows[id].table=null;var chunk=this.rows.splice(id+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(chunk)},p5.Table.prototype.getRow=function(r){return this.rows[r]},p5.Table.prototype.getRows=function(){return this.rows},p5.Table.prototype.findRow=function(value,column){if("string"==typeof column){for(var i=0;i<this.rows.length;i++)if(this.rows[i].obj[column]===value)return this.rows[i]}else for(var j=0;j<this.rows.length;j++)if(this.rows[j].arr[column]===value)return this.rows[j];return null},p5.Table.prototype.findRows=function(value,column){var ret=[];if("string"==typeof column)for(var i=0;i<this.rows.length;i++)this.rows[i].obj[column]===value&&ret.push(this.rows[i]);else for(var j=0;j<this.rows.length;j++)this.rows[j].arr[column]===value&&ret.push(this.rows[j]);return ret},p5.Table.prototype.matchRow=function(regexp,column){if("number"==typeof column){for(var j=0;j<this.rows.length;j++)if(this.rows[j].arr[column].match(regexp))return this.rows[j]}else for(var i=0;i<this.rows.length;i++)if(this.rows[i].obj[column].match(regexp))return this.rows[i];return null},p5.Table.prototype.matchRows=function(regexp,column){var ret=[];if("number"==typeof column)for(var j=0;j<this.rows.length;j++)this.rows[j].arr[column].match(regexp)&&ret.push(this.rows[j]);else for(var i=0;i<this.rows.length;i++)this.rows[i].obj[column].match(regexp)&&ret.push(this.rows[i]);return ret},p5.Table.prototype.getColumn=function(value){var ret=[];if("string"==typeof value)for(var i=0;i<this.rows.length;i++)ret.push(this.rows[i].obj[value]);else for(var j=0;j<this.rows.length;j++)ret.push(this.rows[j].arr[value]);return ret},p5.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},p5.Table.prototype.addColumn=function(title){var t=title||null;this.columns.push(t)},p5.Table.prototype.getColumnCount=function(){return this.columns.length},p5.Table.prototype.getRowCount=function(){return this.rows.length},p5.Table.prototype.removeTokens=function(chars,column){for(var escape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},charArray=[],i=0;i<chars.length;i++)charArray.push(escape(chars.charAt(i)));var regex=new RegExp(charArray.join("|"),"g");if("undefined"==typeof column)for(var c=0;c<this.columns.length;c++)for(var d=0;d<this.rows.length;d++){var s=this.rows[d].arr[c];s=s.replace(regex,""),this.rows[d].arr[c]=s,this.rows[d].obj[this.columns[c]]=s}else if("string"==typeof column)for(var j=0;j<this.rows.length;j++){var val=this.rows[j].obj[column];val=val.replace(regex,""),this.rows[j].obj[column]=val;var pos=this.columns.indexOf(column);this.rows[j].arr[pos]=val}else for(var k=0;k<this.rows.length;k++){var str=this.rows[k].arr[column];str=str.replace(regex,""),this.rows[k].arr[column]=str,this.rows[k].obj[this.columns[column]]=str}},p5.Table.prototype.trim=function(column){var regex=new RegExp(" ","g");if("undefined"==typeof column)for(var c=0;c<this.columns.length;c++)for(var d=0;d<this.rows.length;d++){var s=this.rows[d].arr[c];s=s.replace(regex,""),this.rows[d].arr[c]=s,this.rows[d].obj[this.columns[c]]=s}else if("string"==typeof column)for(var j=0;j<this.rows.length;j++){var val=this.rows[j].obj[column];val=val.replace(regex,""),this.rows[j].obj[column]=val;var pos=this.columns.indexOf(column);this.rows[j].arr[pos]=val}else for(var k=0;k<this.rows.length;k++){var str=this.rows[k].arr[column];str=str.replace(regex,""),this.rows[k].arr[column]=str,this.rows[k].obj[this.columns[column]]=str}},p5.Table.prototype.removeColumn=function(c){var cString,cNumber;"string"==typeof c?(cString=c,cNumber=this.columns.indexOf(c),console.log("string")):(cNumber=c,cString=this.columns[c]);var chunk=this.columns.splice(cNumber+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(chunk);for(var i=0;i<this.rows.length;i++){var tempR=this.rows[i].arr,chip=tempR.splice(cNumber+1,tempR.length);tempR.pop(),this.rows[i].arr=tempR.concat(chip),delete this.rows[i].obj[cString]}},p5.Table.prototype.set=function(row,column,value){this.rows[row].set(column,value)},p5.Table.prototype.setNum=function(row,column,value){this.rows[row].setNum(column,value)},p5.Table.prototype.setString=function(row,column,value){this.rows[row].setString(column,value)},p5.Table.prototype.get=function(row,column){return this.rows[row].get(column)},p5.Table.prototype.getNum=function(row,column){return this.rows[row].getNum(column)},p5.Table.prototype.getString=function(row,column){return this.rows[row].getString(column)},p5.Table.prototype.getObject=function(headerColumn){for(var obj,cPos,index,tableObject={},i=0;i<this.rows.length;i++)if(obj=this.rows[i].obj,"string"==typeof headerColumn){if(cPos=this.columns.indexOf(headerColumn),!(cPos>=0))throw'This table has no column named "'+headerColumn+'"';index=obj[headerColumn],tableObject[index]=obj}else tableObject[i]=this.rows[i].obj;return tableObject},p5.Table.prototype.getArray=function(){for(var tableArray=[],i=0;i<this.rows.length;i++)tableArray.push(this.rows[i].arr);return tableArray},module.exports=p5.Table},{"../core/core":37}],61:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.TableRow=function(str,separator){var arr=[],obj={};str&&(separator=separator||",",arr=str.split(separator));for(var i=0;i<arr.length;i++){var key=i,val=arr[i];obj[key]=val}this.arr=arr,this.obj=obj,this.table=null},p5.TableRow.prototype.set=function(column,value){if("string"==typeof column){var cPos=this.table.columns.indexOf(column);if(!(cPos>=0))throw'This table has no column named "'+column+'"';this.obj[column]=value,this.arr[cPos]=value}else{if(!(column<this.table.columns.length))throw"Column #"+column+" is out of the range of this table";this.arr[column]=value;var cTitle=this.table.columns[column];this.obj[cTitle]=value}},p5.TableRow.prototype.setNum=function(column,value){var floatVal=parseFloat(value,10);this.set(column,floatVal)},p5.TableRow.prototype.setString=function(column,value){var stringVal=value.toString();this.set(column,stringVal)},p5.TableRow.prototype.get=function(column){return"string"==typeof column?this.obj[column]:this.arr[column]},p5.TableRow.prototype.getNum=function(column){var ret;if(ret="string"==typeof column?parseFloat(this.obj[column],10):parseFloat(this.arr[column],10),"NaN"===ret.toString())throw"Error: "+this.obj[column]+" is NaN (Not a Number)";return ret},p5.TableRow.prototype.getString=function(column){return"string"==typeof column?this.obj[column].toString():this.arr[column].toString()},module.exports=p5.TableRow},{"../core/core":37}],62:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.XML=function(){this.name=null,this.attributes={},this.children=[],this.parent=null,this.content=null},p5.XML.prototype.getParent=function(){return this.parent},p5.XML.prototype.getName=function(){return this.name},p5.XML.prototype.setName=function(name){this.name=name},p5.XML.prototype.hasChildren=function(){return this.children.length>0},p5.XML.prototype.listChildren=function(){return this.children.map(function(c){return c.name})},p5.XML.prototype.getChildren=function(param){return param?this.children.filter(function(c){return c.name===param}):this.children},p5.XML.prototype.getChild=function(param){return"string"==typeof param?this.children.find(function(c){return c.name===param}):this.children[param]},p5.XML.prototype.addChild=function(node){node instanceof p5.XML&&this.children.push(node)},p5.XML.prototype.removeChild=function(param){var ind=-1;if("string"==typeof param){for(var i=0;i<this.children.length;i++)if(this.children[i].name===param){ind=i;break}}else ind=param;-1!==ind&&this.children.splice(ind,1)},p5.XML.prototype.getAttributeCount=function(){return Object.keys(this.attributes).length},p5.XML.prototype.listAttributes=function(){return Object.keys(this.attributes)},p5.XML.prototype.hasAttribute=function(name){return this.attributes[name]?!0:!1},p5.XML.prototype.getNumber=function(name,defaultValue){return Number(this.attributes[name])||defaultValue||0},p5.XML.prototype.getString=function(name,defaultValue){return String(this.attributes[name])||defaultValue||null},p5.XML.prototype.setAttribute=function(name,value){this.attributes[name]&&(this.attributes[name]=value)},p5.XML.prototype.getContent=function(defaultValue){return this.content||defaultValue||null},p5.XML.prototype.setContent=function(content){this.children.length||(this.content=content)},p5.XML.prototype._setCont=function(content){var str;str=content,str=str.replace(/\s\s+/g,","),this.content=str},p5.XML.prototype._setAttributes=function(node){var i,att={};for(i=0;i<node.attributes.length;i++)att[node.attributes[i].nodeName]=node.attributes[i].nodeValue;this.attributes=att},module.exports=p5.XML},{"../core/core":37}],63:[function(_dereq_,module){"use strict";function hypot(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);

for(var length=arguments.length,args=[],max=0,i=0;length>i;i++){var n=arguments[i];if(n=+n,n===1/0||n===-(1/0))return 1/0;n=Math.abs(n),n>max&&(max=n),args[i]=n}0===max&&(max=1);for(var sum=0,compensation=0,j=0;length>j;j++){var m=args[j]/max,summand=m*m-compensation,preliminary=sum+summand;compensation=preliminary-sum-summand,sum=preliminary}return Math.sqrt(sum)*max}var p5=_dereq_("../core/core");p5.prototype.abs=Math.abs,p5.prototype.ceil=Math.ceil,p5.prototype.constrain=function(n,low,high){return Math.max(Math.min(n,high),low)},p5.prototype.dist=function(x1,y1,z1,x2,y2,z2){return 4===arguments.length?hypot(z1-x1,x2-y1):6===arguments.length?hypot(x2-x1,y2-y1,z2-z1):void 0},p5.prototype.exp=Math.exp,p5.prototype.floor=Math.floor,p5.prototype.lerp=function(start,stop,amt){return amt*(stop-start)+start},p5.prototype.log=Math.log,p5.prototype.mag=function(x,y){return hypot(x,y)},p5.prototype.map=function(n,start1,stop1,start2,stop2){return(n-start1)/(stop1-start1)*(stop2-start2)+start2},p5.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)},p5.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)},p5.prototype.norm=function(n,start,stop){return this.map(n,start,stop,0,1)},p5.prototype.pow=Math.pow,p5.prototype.round=Math.round,p5.prototype.sq=function(n){return n*n},p5.prototype.sqrt=Math.sqrt,module.exports=p5},{"../core/core":37}],64:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.createVector=function(x,y,z){return this instanceof p5?new p5.Vector(this,arguments):new p5.Vector(x,y,z)},module.exports=p5},{"../core/core":37}],65:[function(_dereq_,module){"use strict";var perlin,p5=_dereq_("../core/core"),PERLIN_YWRAPB=4,PERLIN_YWRAP=1<<PERLIN_YWRAPB,PERLIN_ZWRAPB=8,PERLIN_ZWRAP=1<<PERLIN_ZWRAPB,PERLIN_SIZE=4095,perlin_octaves=4,perlin_amp_falloff=.5,scaled_cosine=function(i){return.5*(1-Math.cos(i*Math.PI))};p5.prototype.noise=function(x,y,z){if(y=y||0,z=z||0,null==perlin){perlin=new Array(PERLIN_SIZE+1);for(var i=0;PERLIN_SIZE+1>i;i++)perlin[i]=Math.random()}0>x&&(x=-x),0>y&&(y=-y),0>z&&(z=-z);for(var rxf,ryf,n1,n2,n3,xi=Math.floor(x),yi=Math.floor(y),zi=Math.floor(z),xf=x-xi,yf=y-yi,zf=z-zi,r=0,ampl=.5,o=0;perlin_octaves>o;o++){var of=xi+(yi<<PERLIN_YWRAPB)+(zi<<PERLIN_ZWRAPB);rxf=scaled_cosine(xf),ryf=scaled_cosine(yf),n1=perlin[of&PERLIN_SIZE],n1+=rxf*(perlin[of+1&PERLIN_SIZE]-n1),n2=perlin[of+PERLIN_YWRAP&PERLIN_SIZE],n2+=rxf*(perlin[of+PERLIN_YWRAP+1&PERLIN_SIZE]-n2),n1+=ryf*(n2-n1),of+=PERLIN_ZWRAP,n2=perlin[of&PERLIN_SIZE],n2+=rxf*(perlin[of+1&PERLIN_SIZE]-n2),n3=perlin[of+PERLIN_YWRAP&PERLIN_SIZE],n3+=rxf*(perlin[of+PERLIN_YWRAP+1&PERLIN_SIZE]-n3),n2+=ryf*(n3-n2),n1+=scaled_cosine(zf)*(n2-n1),r+=n1*ampl,ampl*=perlin_amp_falloff,xi<<=1,xf*=2,yi<<=1,yf*=2,zi<<=1,zf*=2,xf>=1&&(xi++,xf--),yf>=1&&(yi++,yf--),zf>=1&&(zi++,zf--)}return r},p5.prototype.noiseDetail=function(lod,falloff){lod>0&&(perlin_octaves=lod),falloff>0&&(perlin_amp_falloff=falloff)},p5.prototype.noiseSeed=function(seed){var lcg=function(){var seed,z,m=4294967296,a=1664525,c=1013904223;return{setSeed:function(val){z=seed=(null==val?Math.random()*m:val)>>>0},getSeed:function(){return seed},rand:function(){return z=(a*z+c)%m,z/m}}}();lcg.setSeed(seed),perlin=new Array(PERLIN_SIZE+1);for(var i=0;PERLIN_SIZE+1>i;i++)perlin[i]=lcg.rand()},module.exports=p5},{"../core/core":37}],66:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),polarGeometry=_dereq_("./polargeometry"),constants=_dereq_("../core/constants");p5.Vector=function(){var x,y,z;arguments[0]instanceof p5?(this.p5=arguments[0],x=arguments[1][0]||0,y=arguments[1][1]||0,z=arguments[1][2]||0):(x=arguments[0]||0,y=arguments[1]||0,z=arguments[2]||0),this.x=x,this.y=y,this.z=z},p5.Vector.prototype.toString=function(){return"p5.Vector Object : ["+this.x+", "+this.y+", "+this.z+"]"},p5.Vector.prototype.set=function(x,y,z){return x instanceof p5.Vector?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0,this):x instanceof Array?(this.x=x[0]||0,this.y=x[1]||0,this.z=x[2]||0,this):(this.x=x||0,this.y=y||0,this.z=z||0,this)},p5.Vector.prototype.copy=function(){return this.p5?new p5.Vector(this.p5,[this.x,this.y,this.z]):new p5.Vector(this.x,this.y,this.z)},p5.Vector.prototype.add=function(x,y,z){return x instanceof p5.Vector?(this.x+=x.x||0,this.y+=x.y||0,this.z+=x.z||0,this):x instanceof Array?(this.x+=x[0]||0,this.y+=x[1]||0,this.z+=x[2]||0,this):(this.x+=x||0,this.y+=y||0,this.z+=z||0,this)},p5.Vector.prototype.sub=function(x,y,z){return x instanceof p5.Vector?(this.x-=x.x||0,this.y-=x.y||0,this.z-=x.z||0,this):x instanceof Array?(this.x-=x[0]||0,this.y-=x[1]||0,this.z-=x[2]||0,this):(this.x-=x||0,this.y-=y||0,this.z-=z||0,this)},p5.Vector.prototype.mult=function(n){return this.x*=n||0,this.y*=n||0,this.z*=n||0,this},p5.Vector.prototype.div=function(n){return this.x/=n,this.y/=n,this.z/=n,this},p5.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},p5.Vector.prototype.magSq=function(){var x=this.x,y=this.y,z=this.z;return x*x+y*y+z*z},p5.Vector.prototype.dot=function(x,y,z){return x instanceof p5.Vector?this.dot(x.x,x.y,x.z):this.x*(x||0)+this.y*(y||0)+this.z*(z||0)},p5.Vector.prototype.cross=function(v){var x=this.y*v.z-this.z*v.y,y=this.z*v.x-this.x*v.z,z=this.x*v.y-this.y*v.x;return this.p5?new p5.Vector(this.p5,[x,y,z]):new p5.Vector(x,y,z)},p5.Vector.prototype.dist=function(v){var d=v.copy().sub(this);return d.mag()},p5.Vector.prototype.normalize=function(){return 0===this.mag()?this:this.div(this.mag())},p5.Vector.prototype.limit=function(max){var mSq=this.magSq();return mSq>max*max&&(this.div(Math.sqrt(mSq)),this.mult(max)),this},p5.Vector.prototype.setMag=function(n){return this.normalize().mult(n)},p5.Vector.prototype.heading=function(){var h=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===constants.RADIANS?h:polarGeometry.radiansToDegrees(h):h},p5.Vector.prototype.rotate=function(a){var newHeading=this.heading()+a;this.p5&&this.p5._angleMode===constants.DEGREES&&(newHeading=polarGeometry.degreesToRadians(newHeading));var mag=this.mag();return this.x=Math.cos(newHeading)*mag,this.y=Math.sin(newHeading)*mag,this},p5.Vector.prototype.lerp=function(x,y,z,amt){return x instanceof p5.Vector?this.lerp(x.x,x.y,x.z,y):(this.x+=(x-this.x)*amt||0,this.y+=(y-this.y)*amt||0,this.z+=(z-this.z)*amt||0,this)},p5.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},p5.Vector.prototype.equals=function(x,y,z){var a,b,c;return x instanceof p5.Vector?(a=x.x||0,b=x.y||0,c=x.z||0):x instanceof Array?(a=x[0]||0,b=x[1]||0,c=x[2]||0):(a=x||0,b=y||0,c=z||0),this.x===a&&this.y===b&&this.z===c},p5.Vector.fromAngle=function(angle){return this.p5&&this.p5._angleMode===constants.DEGREES&&(angle=polarGeometry.degreesToRadians(angle)),this.p5?new p5.Vector(this.p5,[Math.cos(angle),Math.sin(angle),0]):new p5.Vector(Math.cos(angle),Math.sin(angle),0)},p5.Vector.random2D=function(){var angle;return angle=this.p5?this.p5.random(this.p5._angleMode===constants.DEGREES?360:constants.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(angle)},p5.Vector.random3D=function(){var angle,vz;this.p5?(angle=this.p5.random(0,constants.TWO_PI),vz=this.p5.random(-1,1)):(angle=Math.random()*Math.PI*2,vz=2*Math.random()-1);var vx=Math.sqrt(1-vz*vz)*Math.cos(angle),vy=Math.sqrt(1-vz*vz)*Math.sin(angle);return this.p5?new p5.Vector(this.p5,[vx,vy,vz]):new p5.Vector(vx,vy,vz)},p5.Vector.add=function(v1,v2,target){return target?target.set(v1):target=v1.copy(),target.add(v2),target},p5.Vector.sub=function(v1,v2,target){return target?target.set(v1):target=v1.copy(),target.sub(v2),target},p5.Vector.mult=function(v,n,target){return target?target.set(v):target=v.copy(),target.mult(n),target},p5.Vector.div=function(v,n,target){return target?target.set(v):target=v.copy(),target.div(n),target},p5.Vector.dot=function(v1,v2){return v1.dot(v2)},p5.Vector.cross=function(v1,v2){return v1.cross(v2)},p5.Vector.dist=function(v1,v2){return v1.dist(v2)},p5.Vector.lerp=function(v1,v2,amt,target){return target?target.set(v1):target=v1.copy(),target.lerp(v2,amt),target},p5.Vector.angleBetween=function(v1,v2){var angle=Math.acos(v1.dot(v2)/(v1.mag()*v2.mag()));return this.p5&&this.p5._angleMode===constants.DEGREES&&(angle=polarGeometry.radiansToDegrees(angle)),angle},p5.Vector.mag=function(vecT){var x=vecT.x,y=vecT.y,z=vecT.z,magSq=x*x+y*y+z*z;return Math.sqrt(magSq)},module.exports=p5.Vector},{"../core/constants":36,"../core/core":37,"./polargeometry":67}],67:[function(_dereq_,module){module.exports={degreesToRadians:function(x){return 2*Math.PI*x/360},radiansToDegrees:function(x){return 360*x/(2*Math.PI)}}},{}],68:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),seeded=!1,previous=!1,y2=0,lcg=function(){var seed,z,m=4294967296,a=1664525,c=1013904223;return{setSeed:function(val){z=seed=(null==val?Math.random()*m:val)>>>0},getSeed:function(){return seed},rand:function(){return z=(a*z+c)%m,z/m}}}();p5.prototype.randomSeed=function(seed){lcg.setSeed(seed),seeded=!0,previous=!1},p5.prototype.random=function(min,max){var rand;if(rand=seeded?lcg.rand():Math.random(),"undefined"==typeof min)return rand;if("undefined"==typeof max)return min instanceof Array?min[Math.floor(rand*min.length)]:rand*min;if(min>max){var tmp=min;min=max,max=tmp}return rand*(max-min)+min},p5.prototype.randomGaussian=function(mean,sd){var y1,x1,x2,w;if(previous)y1=y2,previous=!1;else{do x1=this.random(2)-1,x2=this.random(2)-1,w=x1*x1+x2*x2;while(w>=1);w=Math.sqrt(-2*Math.log(w)/w),y1=x1*w,y2=x2*w,previous=!0}var m=mean||0,s=sd||1;return y1*s+m},module.exports=p5},{"../core/core":37}],69:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),polarGeometry=_dereq_("./polargeometry"),constants=_dereq_("../core/constants");p5.prototype._angleMode=constants.RADIANS,p5.prototype.acos=function(ratio){return this._angleMode===constants.RADIANS?Math.acos(ratio):polarGeometry.radiansToDegrees(Math.acos(ratio))},p5.prototype.asin=function(ratio){return this._angleMode===constants.RADIANS?Math.asin(ratio):polarGeometry.radiansToDegrees(Math.asin(ratio))},p5.prototype.atan=function(ratio){return this._angleMode===constants.RADIANS?Math.atan(ratio):polarGeometry.radiansToDegrees(Math.atan(ratio))},p5.prototype.atan2=function(y,x){return this._angleMode===constants.RADIANS?Math.atan2(y,x):polarGeometry.radiansToDegrees(Math.atan2(y,x))},p5.prototype.cos=function(angle){return Math.cos(this._angleMode===constants.RADIANS?angle:this.radians(angle))},p5.prototype.sin=function(angle){return Math.sin(this._angleMode===constants.RADIANS?angle:this.radians(angle))},p5.prototype.tan=function(angle){return Math.tan(this._angleMode===constants.RADIANS?angle:this.radians(angle))},p5.prototype.degrees=function(angle){return polarGeometry.radiansToDegrees(angle)},p5.prototype.radians=function(angle){return polarGeometry.degreesToRadians(angle)},p5.prototype.angleMode=function(mode){(mode===constants.DEGREES||mode===constants.RADIANS)&&(this._angleMode=mode)},module.exports=p5},{"../core/constants":36,"../core/core":37,"./polargeometry":67}],70:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.textAlign=function(){return this._renderer.textAlign.apply(this._renderer,arguments)},p5.prototype.textLeading=function(){return this._renderer.textLeading.apply(this._renderer,arguments)},p5.prototype.textSize=function(){return this._renderer.textSize.apply(this._renderer,arguments)},p5.prototype.textStyle=function(){return this._renderer.textStyle.apply(this._renderer,arguments)},p5.prototype.textWidth=function(theText){return 0===theText.length?0:this._renderer.textWidth.apply(this._renderer,arguments)},p5.prototype.textAscent=function(){return this._renderer.textAscent()},p5.prototype.textDescent=function(){return this._renderer.textDescent()},p5.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},module.exports=p5},{"../core/core":37}],71:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),constants=_dereq_("../core/constants");_dereq_("../core/error_helpers"),p5.prototype.text=function(){return this._renderer._doFill||this._renderer._doStroke?this._renderer.text.apply(this._renderer,arguments):this},p5.prototype.textFont=function(theFont,theSize){if(arguments.length){if(!theFont)throw Error("null font passed to textFont");return this._renderer._setProperty("_textFont",theFont),theSize&&(this._renderer._setProperty("_textSize",theSize),this._renderer._setProperty("_textLeading",theSize*constants._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this},module.exports=p5},{"../core/constants":36,"../core/core":37,"../core/error_helpers":40}],72:[function(_dereq_,module){"use strict";function pathToPoints(cmds,options){for(var opts=parseOpts(options,{sampleFactor:.1,simplifyThreshold:0}),len=pointAtLength(cmds,0,1),t=len/(len*opts.sampleFactor),pts=[],i=0;len>i;i+=t)pts.push(pointAtLength(cmds,i));return opts.simplifyThreshold&&simplify(pts,opts.simplifyThreshold),pts}function simplify(pts,angle){angle="undefined"==typeof angle?0:angle;for(var num=0,i=pts.length-1;pts.length>3&&i>=0;--i)collinear(at(pts,i-1),at(pts,i),at(pts,i+1),angle)&&(pts.splice(i%pts.length,1),num++);return num}function splitPaths(cmds){for(var current,paths=[],i=0;i<cmds.length;i++)"M"===cmds[i].type&&(current&&paths.push(current),current=[]),current.push(cmdToArr(cmds[i]));return paths.push(current),paths}function cmdToArr(cmd){var arr=[cmd.type];return"M"===cmd.type||"L"===cmd.type?arr.push(cmd.x,cmd.y):"C"===cmd.type?arr.push(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type&&arr.push(cmd.x1,cmd.y1,cmd.x,cmd.y),arr}function parseOpts(options,defaults){if("object"!=typeof options)options=defaults;else for(var key in defaults)"undefined"==typeof options[key]&&(options[key]=defaults[key]);return options}function at(v,i){var s=v.length;return v[0>i?i%s+s:i%s]}function collinear(a,b,c,thresholdAngle){if(!thresholdAngle)return 0===areaTriangle(a,b,c);"undefined"==typeof collinear.tmpPoint1&&(collinear.tmpPoint1=[],collinear.tmpPoint2=[]);var ab=collinear.tmpPoint1,bc=collinear.tmpPoint2;ab.x=b.x-a.x,ab.y=b.y-a.y,bc.x=c.x-b.x,bc.y=c.y-b.y;var dot=ab.x*bc.x+ab.y*bc.y,magA=Math.sqrt(ab.x*ab.x+ab.y*ab.y),magB=Math.sqrt(bc.x*bc.x+bc.y*bc.y),angle=Math.acos(dot/(magA*magB));return thresholdAngle>angle}function areaTriangle(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=Math.pow(t1,3),t12=Math.pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+3*t12*t*c1x+3*t1*t*t*c2x+t3*p2x,y=t13*p1y+3*t12*t*c1y+3*t1*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=90-180*Math.atan2(mx-nx,my-ny)/Math.PI;return(mx>nx||ny>my)&&(alpha+=180),{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha}}function getPointAtSegmentLength(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){return null==length?bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y):findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTatLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))}function pointAtLength(path,length,istotal){path=path2curve(path);for(var x,y,p,l,point,sp="",subpaths={},len=0,i=0,ii=path.length;ii>i;i++){if(p=path[i],"M"===p[0])x=+p[1],y=+p[2];else{if(l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]),len+l>length&&!istotal)return point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len),{x:point.x,y:point.y,alpha:point.alpha};len+=l,x=+p[5],y=+p[6]}sp+=p.shift()+p}return subpaths.end=sp,point=istotal?len:findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1),point.alpha&&(point={x:point.x,y:point.y,alpha:point.alpha}),point}function pathToAbsolute(pathArray){var res=[],x=0,y=0,mx=0,my=0,start=0;"M"===pathArray[0][0]&&(x=+pathArray[0][1],y=+pathArray[0][2],mx=x,my=y,start++,res[0]=["M",x,y]);for(var dots,r,pa,crz=3===pathArray.length&&"M"===pathArray[0][0]&&"R"===pathArray[1][0].toUpperCase()&&"Z"===pathArray[2][0].toUpperCase(),i=start,ii=pathArray.length;ii>i;i++){if(res.push(r=[]),pa=pathArray[i],pa[0]!==String.prototype.toUpperCase.call(pa[0]))switch(r[0]=String.prototype.toUpperCase.call(pa[0]),r[0]){case"A":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],r[6]=+(pa[6]+x),r[7]=+(pa[7]+y);break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":dots=[x,y].concat(pa.slice(1));for(var j=2,jj=dots.length;jj>j;j++)dots[j]=+dots[j]+x,dots[++j]=+dots[j]+y;res.pop(),res=res.concat(catmullRom2bezier(dots,crz));break;case"M":mx=+pa[1]+x,my=+pa[2]+y;break;default:for(j=1,jj=pa.length;jj>j;j++)r[j]=+pa[j]+(j%2?x:y)}else if("R"===pa[0])dots=[x,y].concat(pa.slice(1)),res.pop(),res=res.concat(catmullRom2bezier(dots,crz)),r=["R"].concat(pa.slice(-2));else for(var k=0,kk=pa.length;kk>k;k++)r[k]=pa[k];switch(r[0]){case"Z":x=mx,y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2],my=r[r.length-1];break;default:x=r[r.length-2],y=r[r.length-1]}}return res}function path2curve(path,path2){for(var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=(function(path,d,pcom){var nx,ny,tq={T:1,Q:1};if(!path)return["C",d.x,d.y,d.x,d.y,d.x,d.y];switch(path[0]in tq||(d.qx=d.qy=null),path[0]){case"M":d.X=path[1],d.Y=path[2];break;case"A":path=["C"].concat(a2c.apply(0,[d.x,d.y].concat(path.slice(1))));break;case"S":"C"===pcom||"S"===pcom?(nx=2*d.x-d.bx,ny=2*d.y-d.by):(nx=d.x,ny=d.y),path=["C",nx,ny].concat(path.slice(1));break;case"T":"Q"===pcom||"T"===pcom?(d.qx=2*d.x-d.qx,d.qy=2*d.y-d.qy):(d.qx=d.x,d.qy=d.y),path=["C"].concat(q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1],d.qy=path[2],path=["C"].concat(q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"].concat(l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"].concat(l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"].concat(l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"].concat(l2c(d.x,d.y,d.X,d.Y))}return path}),fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();for(var pi=pp[i];pi.length;)pcoms1[i]="A",p2&&(pcoms2[i]="A"),pp.splice(i++,0,["C"].concat(pi.splice(0,6)));pp.splice(i,1),ii=Math.max(p.length,p2&&p2.length||0)}},fixM=function(path1,path2,a1,a2,i){path1&&path2&&"M"===path1[i][0]&&"M"!==path2[i][0]&&(path2.splice(i,0,["M",a2.x,a2.y]),a1.bx=0,a1.by=0,a1.x=path1[i][1],a1.y=path1[i][2],ii=Math.max(p.length,p2&&p2.length||0))},pcoms1=[],pcoms2=[],pfirst="",pcom="",i=0,ii=Math.max(p.length,p2&&p2.length||0);ii>i;i++){p[i]&&(pfirst=p[i][0]),"C"!==pfirst&&(pcoms1[i]=pfirst,i&&(pcom=pcoms1[i-1])),p[i]=processPath(p[i],attrs,pcom),"A"!==pcoms1[i]&&"C"===pfirst&&(pcoms1[i]="C"),fixArc(p,i),p2&&(p2[i]&&(pfirst=p2[i][0]),"C"!==pfirst&&(pcoms2[i]=pfirst,i&&(pcom=pcoms2[i-1])),p2[i]=processPath(p2[i],attrs2,pcom),"A"!==pcoms2[i]&&"C"===pfirst&&(pcoms2[i]="C"),fixArc(p2,i)),fixM(p,p2,attrs,attrs2,i),fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2],attrs.y=seg[seglen-1],attrs.bx=parseFloat(seg[seglen-4])||attrs.x,attrs.by=parseFloat(seg[seglen-3])||attrs.y,attrs2.bx=p2&&(parseFloat(seg2[seg2len-4])||attrs2.x),attrs2.by=p2&&(parseFloat(seg2[seg2len-3])||attrs2.y),attrs2.x=p2&&seg2[seg2len-2],attrs2.y=p2&&seg2[seg2len-1]}return p2?[p,p2]:p}function a2c(x1,y1,rx,ry,angle,lac,sweep_flag,x2,y2,recursive){var f1,f2,cx,cy,xy,PI=Math.PI,_120=120*PI/180,rad=PI/180*(+angle||0),res=[],rotate=function(x,y,rad){var X=x*Math.cos(rad)-y*Math.sin(rad),Y=x*Math.sin(rad)+y*Math.cos(rad);return{x:X,y:Y}};if(recursive)f1=recursive[0],f2=recursive[1],cx=recursive[2],cy=recursive[3];else{xy=rotate(x1,y1,-rad),x1=xy.x,y1=xy.y,xy=rotate(x2,y2,-rad),x2=xy.x,y2=xy.y;var x=(x1-x2)/2,y=(y1-y2)/2,h=x*x/(rx*rx)+y*y/(ry*ry);h>1&&(h=Math.sqrt(h),rx=h*rx,ry=h*ry);var rx2=rx*rx,ry2=ry*ry,k=(lac===sweep_flag?-1:1)*Math.sqrt(Math.abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x)));cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=Math.asin(((y1-cy)/ry).toFixed(9)),f2=Math.asin(((y2-cy)/ry).toFixed(9)),f1=cx>x1?PI-f1:f1,f2=cx>x2?PI-f2:f2,0>f1&&(f1=2*PI+f1),0>f2&&(f2=2*PI+f2),sweep_flag&&f1>f2&&(f1-=2*PI),!sweep_flag&&f2>f1&&(f2-=2*PI)}var df=f2-f1;if(Math.abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1),x2=cx+rx*Math.cos(f2),y2=cy+ry*Math.sin(f2),res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}df=f2-f1;var c1=Math.cos(f1),s1=Math.sin(f1),c2=Math.cos(f2),s2=Math.sin(f2),t=Math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];if(m2[0]=2*m1[0]-m2[0],m2[1]=2*m1[1]-m2[1],recursive)return[m2,m3,m4].concat(res);res=[m2,m3,m4].concat(res).join().split(",");for(var newres=[],i=0,ii=res.length;ii>i;i++)newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;return newres}function catmullRom2bezier(crp,z){for(var d=[],i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];z?i?iLen-4===i?p[3]={x:+crp[0],y:+crp[1]}:iLen-2===i&&(p[2]={x:+crp[0],y:+crp[1]},p[3]={x:+crp[2],y:+crp[3]}):p[0]={x:+crp[iLen-2],y:+crp[iLen-1]}:iLen-4===i?p[3]=p[2]:i||(p[0]={x:+crp[i],y:+crp[i+1]}),d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}function l2c(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]}function q2c(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2]}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){null==z&&(z=1),z=z>1?1:0>z?0:z;for(var z2=z/2,n=12,Tvalues=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],sum=0,Cvalues=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],i=0;n>i;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*Math.sqrt(comb)}return z2*sum}function getTatLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(!(0>ll||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll)){var l,t=1,step=t/2,t2=t-step,e=.01;for(l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);Math.abs(l-ll)>e;)step/=2,t2+=(ll>l?1:-1)*step,l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);return t2}}function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2}function cacheKey(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];i=args.length;for(var hash="";i--;)hash+=args[i]===Object(args[i])?JSON.stringify(args[i]):args[i];return hash}var p5=_dereq_("../core/core"),constants=_dereq_("../core/constants");p5.Font=function(p){this.parent=p,this.cache={},this.font=void 0},p5.Font.prototype.list=function(){throw"not yet implemented"},p5.Font.prototype.textBounds=function(str,x,y,fontSize,options){x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=fontSize||this.parent._renderer._textSize;var p=options&&options.renderer&&options.renderer._pInst||this.parent,ctx=p._renderer.drawingContext,alignment=ctx.textAlign||constants.LEFT,baseline=ctx.textBaseline||constants.BASELINE,result=this.cache[cacheKey("textBounds",str,x,y,fontSize,alignment,baseline)];if(!result){var minX,minY,maxX,maxY,xCoords=[],yCoords=[],self=this,scale=this._scale(fontSize);this.font.forEachGlyph(str,x,y,fontSize,options,function(glyph,gX,gY){xCoords.push(gX),yCoords.push(gY);var gm=glyph.getMetrics();"space"!==glyph.name?(xCoords.push(gX+gm.xMax*scale),yCoords.push(gY+-gm.yMin*scale),yCoords.push(gY+-gm.yMax*scale)):xCoords.push(gX+self.font.charToGlyph(" ").advanceWidth*self._scale(fontSize))}),minX=Math.min.apply(null,xCoords),minY=Math.min.apply(null,yCoords),maxX=Math.max.apply(null,xCoords),maxY=Math.max.apply(null,yCoords),result={x:minX,y:minY,h:maxY-minY,w:maxX-minX,advance:minX-x};var textWidth=result.w+result.advance,pos=this._handleAlignment(p,ctx,str,result.x,result.y,textWidth);result.x=pos.x,result.y=pos.y,this.cache[cacheKey("textBounds",str,x,y,fontSize,alignment,baseline)]=result}return result},p5.Font.prototype.textToPoints=function(txt,x,y,fontSize,options){var xoff=0,result=[],glyphs=this._getGlyphs(txt);fontSize=fontSize||this.parent._renderer._textSize;for(var i=0;i<glyphs.length;i++){for(var gpath=glyphs[i].getPath(x,y,fontSize),paths=splitPaths(gpath.commands),j=0;j<paths.length;j++)for(var pts=pathToPoints(paths[j],options),k=0;k<pts.length;k++)pts[k].x+=xoff,result.push(pts[k]);xoff+=glyphs[i].advanceWidth*this._scale(fontSize)}return result},p5.Font.prototype._getGlyphs=function(str){return this.font.stringToGlyphs(str)},p5.Font.prototype._getPath=function(line,x,y,options){var p=options&&options.renderer&&options.renderer._pInst||this.parent,ctx=p._renderer.drawingContext,pos=this._handleAlignment(p,ctx,line,x,y);return this.font.getPath(line,pos.x,pos.y,p._renderer._textSize,options)},p5.Font.prototype._getPathData=function(line,x,y,options){var decimals=3;return"string"==typeof line&&arguments.length>2?line=this._getPath(line,x,y,options):"object"==typeof x&&(options=x),options&&"number"==typeof options.decimals&&(decimals=options.decimals),line.toPathData(decimals)},p5.Font.prototype._getSVG=function(line,x,y,options){var decimals=3;return"string"==typeof line&&arguments.length>2?line=this._getPath(line,x,y,options):"object"==typeof x&&(options=x),options&&("number"==typeof options.decimals&&(decimals=options.decimals),"number"==typeof options.strokeWidth&&(line.strokeWidth=options.strokeWidth),"undefined"!=typeof options.fill&&(line.fill=options.fill),"undefined"!=typeof options.stroke&&(line.stroke=options.stroke)),line.toSVG(decimals)},p5.Font.prototype._renderPath=function(line,x,y,options){var pdata,pg=options&&options.renderer||this.parent._renderer,ctx=pg.drawingContext;pdata="object"==typeof line&&line.commands?line.commands:this._getPath(line,x,y,options).commands,ctx.beginPath();for(var i=0;i<pdata.length;i+=1){var cmd=pdata[i];"M"===cmd.type?ctx.moveTo(cmd.x,cmd.y):"L"===cmd.type?ctx.lineTo(cmd.x,cmd.y):"C"===cmd.type?ctx.bezierCurveTo(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?ctx.quadraticCurveTo(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&ctx.closePath()}return pg._doStroke&&pg._strokeSet&&ctx.stroke(),pg._doFill&&(ctx.fillStyle=pg._fillSet?ctx.fillStyle:constants._DEFAULT_TEXT_FILL,ctx.fill()),this},p5.Font.prototype._textWidth=function(str,fontSize){if(" "===str)return this.font.charToGlyph(" ").advanceWidth*this._scale(fontSize);var bounds=this.textBounds(str,0,0,fontSize);return bounds.w+bounds.advance},p5.Font.prototype._textAscent=function(fontSize){return this.font.ascender*this._scale(fontSize)},p5.Font.prototype._textDescent=function(fontSize){return-this.font.descender*this._scale(fontSize)},p5.Font.prototype._scale=function(fontSize){return 1/this.font.unitsPerEm*(fontSize||this.parent._renderer._textSize)},p5.Font.prototype._handleAlignment=function(p,ctx,line,x,y,textWidth){var fontSize=p._renderer._textSize,textAscent=this._textAscent(fontSize),textDescent=this._textDescent(fontSize);return textWidth=void 0!==textWidth?textWidth:this._textWidth(line,fontSize),ctx.textAlign===constants.CENTER?x-=textWidth/2:ctx.textAlign===constants.RIGHT&&(x-=textWidth),ctx.textBaseline===constants.TOP?y+=textAscent:ctx.textBaseline===constants._CTX_MIDDLE?y+=textAscent/2:ctx.textBaseline===constants.BOTTOM&&(y-=textDescent),{x:x,y:y}},module.exports=p5.Font},{"../core/constants":36,"../core/core":37}],73:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.append=function(array,value){return array.push(value),array},p5.prototype.arrayCopy=function(src,srcPosition,dst,dstPosition,length){var start,end;"undefined"!=typeof length?(end=Math.min(length,src.length),start=dstPosition,src=src.slice(srcPosition,end+srcPosition)):("undefined"!=typeof dst?(end=dst,end=Math.min(end,src.length)):end=src.length,start=0,dst=srcPosition,src=src.slice(0,end)),Array.prototype.splice.apply(dst,[start,end].concat(src))},p5.prototype.concat=function(list0,list1){return list0.concat(list1)},p5.prototype.reverse=function(list){return list.reverse()},p5.prototype.shorten=function(list){return list.pop(),list},p5.prototype.shuffle=function(arr,bool){var isView=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(arr);arr=bool||isView?arr:arr.slice();for(var rnd,tmp,idx=arr.length;idx>1;)rnd=Math.random()*idx|0,tmp=arr[--idx],arr[idx]=arr[rnd],arr[rnd]=tmp;return arr},p5.prototype.sort=function(list,count){var arr=count?list.slice(0,Math.min(count,list.length)):list,rest=count?list.slice(Math.min(count,list.length)):[];return arr="string"==typeof arr[0]?arr.sort():arr.sort(function(a,b){return a-b}),arr.concat(rest)},p5.prototype.splice=function(list,value,index){return Array.prototype.splice.apply(list,[index,0].concat(value)),list},p5.prototype.subset=function(list,start,count){return"undefined"!=typeof count?list.slice(start,start+count):list.slice(start,list.length)},module.exports=p5},{"../core/core":37}],74:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype["float"]=function(str){return str instanceof Array?str.map(parseFloat):parseFloat(str)},p5.prototype["int"]=function(n,radix){return radix=radix||10,"string"==typeof n?parseInt(n,radix):"number"==typeof n?0|n:"boolean"==typeof n?n?1:0:n instanceof Array?n.map(function(n){return p5.prototype["int"](n,radix)}):void 0},p5.prototype.str=function(n){return n instanceof Array?n.map(p5.prototype.str):String(n)},p5.prototype["boolean"]=function(n){return"number"==typeof n?0!==n:"string"==typeof n?"true"===n.toLowerCase():"boolean"==typeof n?n:n instanceof Array?n.map(p5.prototype["boolean"]):void 0},p5.prototype["byte"]=function(n){var nn=p5.prototype["int"](n,10);return"number"==typeof nn?(nn+128)%256-128:nn instanceof Array?nn.map(p5.prototype["byte"]):void 0},p5.prototype["char"]=function(n){return"number"!=typeof n||isNaN(n)?n instanceof Array?n.map(p5.prototype["char"]):"string"==typeof n?p5.prototype["char"](parseInt(n,10)):void 0:String.fromCharCode(n)},p5.prototype.unchar=function(n){return"string"==typeof n&&1===n.length?n.charCodeAt(0):n instanceof Array?n.map(p5.prototype.unchar):void 0},p5.prototype.hex=function(n,digits){if(digits=void 0===digits||null===digits?digits=8:digits,n instanceof Array)return n.map(function(n){return p5.prototype.hex(n,digits)});if("number"==typeof n){0>n&&(n=4294967295+n+1);for(var hex=Number(n).toString(16).toUpperCase();hex.length<digits;)hex="0"+hex;return hex.length>=digits&&(hex=hex.substring(hex.length-digits,hex.length)),hex}},p5.prototype.unhex=function(n){return n instanceof Array?n.map(p5.prototype.unhex):parseInt("0x"+n,16)},module.exports=p5},{"../core/core":37}],75:[function(_dereq_,module){"use strict";function doNf(){var num=arguments[0],neg=0>num,n=neg?num.toString().substring(1):num.toString(),decimalInd=n.indexOf("."),intPart=-1!==decimalInd?n.substring(0,decimalInd):n,decPart=-1!==decimalInd?n.substring(decimalInd+1):"",str=neg?"-":"";if(3===arguments.length){var decimal="";(-1!==decimalInd||arguments[2]-decPart.length>0)&&(decimal="."),decPart.length>arguments[2]&&(decPart=decPart.substring(0,arguments[2]));for(var i=0;i<arguments[1]-intPart.length;i++)str+="0";str+=intPart,str+=decimal,str+=decPart;for(var j=0;j<arguments[2]-decPart.length;j++)str+="0";return str}for(var k=0;k<Math.max(arguments[1]-intPart.length,0);k++)str+="0";return str+=n}function doNfc(){var num=arguments[0].toString(),dec=num.indexOf("."),rem=-1!==dec?num.substring(dec):"",n=-1!==dec?num.substring(0,dec):num;if(n=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===arguments[1])rem="";
else if(void 0!==arguments[1])if(arguments[1]>rem.length){rem+=-1===dec?".":"";for(var len=arguments[1]-rem.length+1,i=0;len>i;i++)rem+="0"}else rem=rem.substring(0,arguments[1]+1);return n+rem}function addNfp(){return parseFloat(arguments[0])>0?"+"+arguments[0].toString():arguments[0].toString()}function addNfs(){return parseFloat(arguments[0])>0?" "+arguments[0].toString():arguments[0].toString()}var p5=_dereq_("../core/core");p5.prototype.join=function(list,separator){return list.join(separator)},p5.prototype.match=function(str,reg){return str.match(reg)},p5.prototype.matchAll=function(str,reg){for(var re=new RegExp(reg,"g"),match=re.exec(str),matches=[];null!==match;)matches.push(match),match=re.exec(str);return matches},p5.prototype.nf=function(){if(arguments[0]instanceof Array){var a=arguments[1],b=arguments[2];return arguments[0].map(function(x){return doNf(x,a,b)})}var typeOfFirst=Object.prototype.toString.call(arguments[0]);return"[object Arguments]"===typeOfFirst?3===arguments[0].length?this.nf(arguments[0][0],arguments[0][1],arguments[0][2]):2===arguments[0].length?this.nf(arguments[0][0],arguments[0][1]):this.nf(arguments[0][0]):doNf.apply(this,arguments)},p5.prototype.nfc=function(){if(arguments[0]instanceof Array){var a=arguments[1];return arguments[0].map(function(x){return doNfc(x,a)})}return doNfc.apply(this,arguments)},p5.prototype.nfp=function(){var nfRes=this.nf.apply(this,arguments);return nfRes instanceof Array?nfRes.map(addNfp):addNfp(nfRes)},p5.prototype.nfs=function(){var nfRes=this.nf.apply(this,arguments);return nfRes instanceof Array?nfRes.map(addNfs):addNfs(nfRes)},p5.prototype.split=function(str,delim){return str.split(delim)},p5.prototype.splitTokens=function(){var d,sqo,sqc,str;return str=arguments[1],arguments.length>1?(sqc=/\]/g.exec(str),sqo=/\[/g.exec(str),sqo&&sqc?(str=str.slice(0,sqc.index)+str.slice(sqc.index+1),sqo=/\[/g.exec(str),str=str.slice(0,sqo.index)+str.slice(sqo.index+1),d=new RegExp("[\\["+str+"\\]]","g")):sqc?(str=str.slice(0,sqc.index)+str.slice(sqc.index+1),d=new RegExp("["+str+"\\]]","g")):sqo?(str=str.slice(0,sqo.index)+str.slice(sqo.index+1),d=new RegExp("["+str+"\\[]","g")):d=new RegExp("["+str+"]","g")):d=/\s/g,arguments[0].split(d).filter(function(n){return n})},p5.prototype.trim=function(str){return str instanceof Array?str.map(this.trim):str.trim()},module.exports=p5},{"../core/core":37}],76:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.day=function(){return(new Date).getDate()},p5.prototype.hour=function(){return(new Date).getHours()},p5.prototype.minute=function(){return(new Date).getMinutes()},p5.prototype.millis=function(){return window.performance.now()},p5.prototype.month=function(){return(new Date).getMonth()+1},p5.prototype.second=function(){return(new Date).getSeconds()},p5.prototype.year=function(){return(new Date).getFullYear()},module.exports=p5},{"../core/core":37}],77:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.camera=function(x,y,z){this._renderer.translate(-x,-y,-z)},p5.prototype.perspective=function(fovy,aspect,near,far){this._renderer.uPMatrix=p5.Matrix.identity(),this._renderer.uPMatrix.perspective(fovy,aspect,near,far),this._renderer._curCamera="custom"},p5.prototype.ortho=function(left,right,bottom,top,near,far){left=left||-this.width/2,right=right||this.width/2,bottom=bottom||-this.height/2,top=top||this.height/2,near=near||0,far=far||Math.max(this.width,this.height),this._renderer.uPMatrix=p5.Matrix.identity(),this._renderer.uPMatrix.ortho(left,right,bottom,top,near,far),this._renderer._curCamera="custom"},module.exports=p5},{"../core/core":37}],78:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.orbitControl=function(){return this.mouseIsPressed&&(this.rotateY((this.mouseX-this.width/2)/(this.width/2)),this.rotateX((this.mouseY-this.height/2)/(this.width/2))),this},module.exports=p5},{"../core/core":37}],79:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.ambientLight=function(){var gl=this._renderer.GL,shaderProgram=this._renderer._getShader("lightVert","lightTextureFrag");gl.useProgram(shaderProgram),shaderProgram.uAmbientColor=gl.getUniformLocation(shaderProgram,"uAmbientColor["+this._renderer.ambientLightCount+"]");var color=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),colors=color._array;return gl.uniform3f(shaderProgram.uAmbientColor,colors[0],colors[1],colors[2]),shaderProgram.uMaterialColor=gl.getUniformLocation(shaderProgram,"uMaterialColor"),gl.uniform4f(shaderProgram.uMaterialColor,1,1,1,1),this._renderer.ambientLightCount++,shaderProgram.uAmbientLightCount=gl.getUniformLocation(shaderProgram,"uAmbientLightCount"),gl.uniform1i(shaderProgram.uAmbientLightCount,this._renderer.ambientLightCount),this},p5.prototype.directionalLight=function(v1,v2,v3){var gl=this._renderer.GL,shaderProgram=this._renderer._getShader("lightVert","lightTextureFrag");gl.useProgram(shaderProgram),shaderProgram.uDirectionalColor=gl.getUniformLocation(shaderProgram,"uDirectionalColor["+this._renderer.directionalLightCount+"]");var color=this._renderer._pInst.color.apply(this._renderer._pInst,[v1,v2,v3]),colors=color._array;gl.uniform3f(shaderProgram.uDirectionalColor,colors[0],colors[1],colors[2]);for(var _x,_y,_z,args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];if("number"==typeof args[args.length-1])_x=args[args.length-3],_y=args[args.length-2],_z=args[args.length-1];else try{_x=args[args.length-1].x,_y=args[args.length-1].y,_z=args[args.length-1].z}catch(error){throw error}return shaderProgram.uLightingDirection=gl.getUniformLocation(shaderProgram,"uLightingDirection["+this._renderer.directionalLightCount+"]"),gl.uniform3f(shaderProgram.uLightingDirection,_x,_y,_z),shaderProgram.uMaterialColor=gl.getUniformLocation(shaderProgram,"uMaterialColor"),gl.uniform4f(shaderProgram.uMaterialColor,1,1,1,1),this._renderer.directionalLightCount++,shaderProgram.uDirectionalLightCount=gl.getUniformLocation(shaderProgram,"uDirectionalLightCount"),gl.uniform1i(shaderProgram.uDirectionalLightCount,this._renderer.directionalLightCount),this},p5.prototype.pointLight=function(v1,v2,v3){var gl=this._renderer.GL,shaderProgram=this._renderer._getShader("lightVert","lightTextureFrag");gl.useProgram(shaderProgram),shaderProgram.uPointLightColor=gl.getUniformLocation(shaderProgram,"uPointLightColor["+this._renderer.pointLightCount+"]");var color=this._renderer._pInst.color.apply(this._renderer._pInst,[v1,v2,v3]),colors=color._array;gl.uniform3f(shaderProgram.uPointLightColor,colors[0],colors[1],colors[2]);for(var _x,_y,_z,args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];if("number"==typeof args[args.length-1])_x=args[args.length-3],_y=args[args.length-2],_z=args[args.length-1];else try{_x=args[args.length-1].x,_y=args[args.length-1].y,_z=args[args.length-1].z}catch(error){throw error}return shaderProgram.uPointLightLocation=gl.getUniformLocation(shaderProgram,"uPointLightLocation["+this._renderer.pointLightCount+"]"),gl.uniform3f(shaderProgram.uPointLightLocation,_x,_y,_z),shaderProgram.uMaterialColor=gl.getUniformLocation(shaderProgram,"uMaterialColor"),gl.uniform4f(shaderProgram.uMaterialColor,1,1,1,1),this._renderer.pointLightCount++,shaderProgram.uPointLightCount=gl.getUniformLocation(shaderProgram,"uPointLightCount"),gl.uniform1i(shaderProgram.uPointLightCount,this._renderer.pointLightCount),this},module.exports=p5},{"../core/core":37}],80:[function(_dereq_,module){"use strict";function parseObj(model,lines){for(var loadedVerts={v:[],vt:[],vn:[]},indexedVerts={},line=0;line<lines.length;++line){var tokens=lines[line].trim().split(/\b\s+/);if(tokens.length>0)if("v"===tokens[0]||"vn"===tokens[0]){var vertex=new p5.Vector(parseFloat(tokens[1]),parseFloat(tokens[2]),parseFloat(tokens[3]));loadedVerts[tokens[0]].push(vertex)}else if("vt"===tokens[0]){var texVertex=[parseFloat(tokens[1]),parseFloat(tokens[2])];loadedVerts[tokens[0]].push(texVertex)}else if("f"===tokens[0])for(var tri=3;tri<tokens.length;++tri){for(var face=[],vertexTokens=[1,tri-1,tri],tokenInd=0;tokenInd<vertexTokens.length;++tokenInd){var vertString=tokens[vertexTokens[tokenInd]],vertIndex=0;if(void 0!==indexedVerts[vertString])vertIndex=indexedVerts[vertString];else{for(var vertParts=vertString.split("/"),i=0;i<vertParts.length;i++)vertParts[i]=parseInt(vertParts[i])-1;vertIndex=indexedVerts[vertString]=model.vertices.length,model.vertices.push(loadedVerts.v[vertParts[0]].copy()),model.uvs.push(loadedVerts.vt[vertParts[1]]?loadedVerts.vt[vertParts[1]].slice():[0,0]),loadedVerts.vn[vertParts[2]]&&model.vertexNormals.push(loadedVerts.vn[vertParts[2]].copy())}face.push(vertIndex)}model.faces.push(face)}}return 0===model.vertexNormals.length&&model.computeNormals(),model}var p5=_dereq_("../core/core");_dereq_("./p5.Geometry"),p5.prototype.loadModel=function(){var normalize,successCallback,failureCallback,path=arguments[0];"boolean"==typeof arguments[1]?(normalize=arguments[1],successCallback=arguments[2],failureCallback=arguments[3]):(normalize=!1,successCallback=arguments[1],failureCallback=arguments[2]);var model=new p5.Geometry;return model.gid=path+"|"+normalize,this.loadStrings(path,function(strings){parseObj(model,strings),normalize&&model.normalize(),"function"==typeof successCallback&&successCallback(model)}.bind(this),failureCallback),model},p5.prototype.model=function(model){model.vertices.length>0&&(this._renderer.geometryInHash(model.gid)||this._renderer.createBuffers(model.gid,model),this._renderer.drawBuffers(model.gid))},module.exports=p5},{"../core/core":37,"./p5.Geometry":82}],81:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.prototype.normalMaterial=function(){return this._renderer._getShader("normalVert","normalFrag"),this},p5.prototype.texture=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var gl=this._renderer.GL,shaderProgram=this._renderer._getShader("lightVert","lightTextureFrag");gl.useProgram(shaderProgram);var textureData;if(args[0].isTexture)args[0]instanceof p5.Graphics||"undefined"!=typeof p5.MediaElement&&args[0]instanceof p5.MediaElement?textureData=args[0].elt:args[0]instanceof p5.Image&&(textureData=args[0].canvas),this._renderer._bind.call(this,args[0].tex,textureData);else{if(args[0]instanceof p5.Image)textureData=args[0].canvas;else if("undefined"!=typeof p5.MediaElement&&args[0]instanceof p5.MediaElement){if(!args[0].loadedmetadata)return;textureData=args[0].elt}else args[0]instanceof p5.Graphics&&(textureData=args[0].elt);var tex=gl.createTexture();args[0]._setProperty("tex",tex),args[0]._setProperty("isTexture",!0),this._renderer._bind.call(this,tex,textureData)}return gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,args[0].tex),gl.uniform1i(gl.getUniformLocation(shaderProgram,"isTexture"),!0),gl.uniform1i(gl.getUniformLocation(shaderProgram,"uSampler"),0),this},p5.RendererGL.prototype._bind=function(tex,data){var gl=this._renderer.GL;gl.bindTexture(gl.TEXTURE_2D,tex),gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,data),gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.bindTexture(gl.TEXTURE_2D,null)},p5.prototype.ambientMaterial=function(){var gl=this._renderer.GL,shaderProgram=this._renderer._getShader("lightVert","lightTextureFrag");gl.useProgram(shaderProgram),shaderProgram.uMaterialColor=gl.getUniformLocation(shaderProgram,"uMaterialColor");var colors=this._renderer._applyColorBlend.apply(this._renderer,arguments);return gl.uniform4f(shaderProgram.uMaterialColor,colors[0],colors[1],colors[2],colors[3]),shaderProgram.uSpecular=gl.getUniformLocation(shaderProgram,"uSpecular"),gl.uniform1i(shaderProgram.uSpecular,!1),gl.uniform1i(gl.getUniformLocation(shaderProgram,"isTexture"),!1),this},p5.prototype.specularMaterial=function(){var gl=this._renderer.GL,shaderProgram=this._renderer._getShader("lightVert","lightTextureFrag");gl.useProgram(shaderProgram),gl.uniform1i(gl.getUniformLocation(shaderProgram,"isTexture"),!1),shaderProgram.uMaterialColor=gl.getUniformLocation(shaderProgram,"uMaterialColor");var colors=this._renderer._applyColorBlend.apply(this._renderer,arguments);return gl.uniform4f(shaderProgram.uMaterialColor,colors[0],colors[1],colors[2],colors[3]),shaderProgram.uSpecular=gl.getUniformLocation(shaderProgram,"uSpecular"),gl.uniform1i(shaderProgram.uSpecular,!0),this},p5.RendererGL.prototype._applyColorBlend=function(){var gl=this.GL,color=this._pInst.color.apply(this._pInst,arguments),colors=color._array;return colors[colors.length-1]<1?(gl.depthMask(!1),gl.enable(gl.BLEND),gl.blendEquation(gl.FUNC_ADD),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)):(gl.depthMask(!0),gl.disable(gl.BLEND)),colors},module.exports=p5},{"../core/core":37}],82:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");p5.Geometry=function(detailX,detailY,callback){return this.vertices=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.detailX=void 0!==detailX?detailX:1,this.detailY=void 0!==detailY?detailY:1,callback instanceof Function&&callback.call(this),this},p5.Geometry.prototype.computeFaces=function(){for(var a,b,c,d,sliceCount=this.detailX+1,i=0;i<this.detailY;i++)for(var j=0;j<this.detailX;j++)a=i*sliceCount+j,b=i*sliceCount+j+1,c=(i+1)*sliceCount+j+1,d=(i+1)*sliceCount+j,this.faces.push([a,b,d]),this.faces.push([d,b,c]);return this},p5.Geometry.prototype._getFaceNormal=function(faceId,vertId){var face=this.faces[faceId],vA=this.vertices[face[vertId%3]],vB=this.vertices[face[(vertId+1)%3]],vC=this.vertices[face[(vertId+2)%3]],n=p5.Vector.cross(p5.Vector.sub(vB,vA),p5.Vector.sub(vC,vA)),sinAlpha=p5.Vector.mag(n)/(p5.Vector.mag(p5.Vector.sub(vB,vA))*p5.Vector.mag(p5.Vector.sub(vC,vA)));return n=n.normalize(),n.mult(Math.asin(sinAlpha))},p5.Geometry.prototype.computeNormals=function(){for(var v=0;v<this.vertices.length;v++){for(var normal=new p5.Vector,i=0;i<this.faces.length;i++)(this.faces[i][0]===v||this.faces[i][1]===v||this.faces[i][2]===v)&&(normal=normal.add(this._getFaceNormal(i,v)));normal=normal.normalize(),this.vertexNormals.push(normal)}return this},p5.Geometry.prototype.averageNormals=function(){for(var i=0;i<=this.detailY;i++){var offset=this.detailX+1,temp=p5.Vector.add(this.vertexNormals[i*offset],this.vertexNormals[i*offset+this.detailX]);temp=p5.Vector.div(temp,2),this.vertexNormals[i*offset]=temp,this.vertexNormals[i*offset+this.detailX]=temp}return this},p5.Geometry.prototype.averagePoleNormals=function(){for(var sum=new p5.Vector(0,0,0),i=0;i<this.detailX;i++)sum.add(this.vertexNormals[i]);for(sum=p5.Vector.div(sum,this.detailX),i=0;i<this.detailX;i++)this.vertexNormals[i]=sum;for(sum=new p5.Vector(0,0,0),i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)sum.add(this.vertexNormals[i]);for(sum=p5.Vector.div(sum,this.detailX),i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=sum;return this},p5.Geometry.prototype.normalize=function(){if(this.vertices.length>0){for(var maxPosition=this.vertices[0].copy(),minPosition=this.vertices[0].copy(),i=0;i<this.vertices.length;i++)maxPosition.x=Math.max(maxPosition.x,this.vertices[i].x),minPosition.x=Math.min(minPosition.x,this.vertices[i].x),maxPosition.y=Math.max(maxPosition.y,this.vertices[i].y),minPosition.y=Math.min(minPosition.y,this.vertices[i].y),maxPosition.z=Math.max(maxPosition.z,this.vertices[i].z),minPosition.z=Math.min(minPosition.z,this.vertices[i].z);var center=p5.Vector.lerp(maxPosition,minPosition,.5),dist=p5.Vector.sub(maxPosition,minPosition),longestDist=Math.max(Math.max(dist.x,dist.y),dist.z),scale=200/longestDist;for(i=0;i<this.vertices.length;i++)this.vertices[i].sub(center),this.vertices[i].mult(scale)}return this},module.exports=p5.Geometry},{"../core/core":37}],83:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),polarGeometry=_dereq_("../math/polargeometry"),constants=_dereq_("../core/constants"),GLMAT_ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;p5.Matrix=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];return args[0]instanceof p5?(this.p5=args[0],"mat3"===args[1]?this.mat3=args[2]||new GLMAT_ARRAY_TYPE([1,0,0,0,1,0,0,0,1]):this.mat4=args[1]||new GLMAT_ARRAY_TYPE([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):"mat3"===args[0]?this.mat3=args[1]||new GLMAT_ARRAY_TYPE([1,0,0,0,1,0,0,0,1]):this.mat4=args[0]||new GLMAT_ARRAY_TYPE([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},p5.Matrix.prototype.set=function(inMatrix){return inMatrix instanceof p5.Matrix?(this.mat4=inMatrix.mat4,this):inMatrix instanceof GLMAT_ARRAY_TYPE?(this.mat4=inMatrix,this):this},p5.Matrix.prototype.get=function(){return new p5.Matrix(this.mat4)},p5.Matrix.prototype.copy=function(){var copied=new p5.Matrix;return copied.mat4[0]=this.mat4[0],copied.mat4[1]=this.mat4[1],copied.mat4[2]=this.mat4[2],copied.mat4[3]=this.mat4[3],copied.mat4[4]=this.mat4[4],copied.mat4[5]=this.mat4[5],copied.mat4[6]=this.mat4[6],copied.mat4[7]=this.mat4[7],copied.mat4[8]=this.mat4[8],copied.mat4[9]=this.mat4[9],copied.mat4[10]=this.mat4[10],copied.mat4[11]=this.mat4[11],copied.mat4[12]=this.mat4[12],copied.mat4[13]=this.mat4[13],copied.mat4[14]=this.mat4[14],copied.mat4[15]=this.mat4[15],copied},p5.Matrix.identity=function(){return new p5.Matrix},p5.Matrix.prototype.transpose=function(a){var a01,a02,a03,a12,a13,a23;return a instanceof p5.Matrix?(a01=a.mat4[1],a02=a.mat4[2],a03=a.mat4[3],a12=a.mat4[6],a13=a.mat4[7],a23=a.mat4[11],this.mat4[0]=a.mat4[0],this.mat4[1]=a.mat4[4],this.mat4[2]=a.mat4[8],this.mat4[3]=a.mat4[12],this.mat4[4]=a01,this.mat4[5]=a.mat4[5],this.mat4[6]=a.mat4[9],this.mat4[7]=a.mat4[13],this.mat4[8]=a02,this.mat4[9]=a12,this.mat4[10]=a.mat4[10],this.mat4[11]=a.mat4[14],this.mat4[12]=a03,this.mat4[13]=a13,this.mat4[14]=a23,this.mat4[15]=a.mat4[15]):a instanceof GLMAT_ARRAY_TYPE&&(a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11],this.mat4[0]=a[0],this.mat4[1]=a[4],this.mat4[2]=a[8],this.mat4[3]=a[12],this.mat4[4]=a01,this.mat4[5]=a[5],this.mat4[6]=a[9],this.mat4[7]=a[13],this.mat4[8]=a02,this.mat4[9]=a12,this.mat4[10]=a[10],this.mat4[11]=a[14],this.mat4[12]=a03,this.mat4[13]=a13,this.mat4[14]=a23,this.mat4[15]=a[15]),this},p5.Matrix.prototype.invert=function(a){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,a30,a31,a32,a33;a instanceof p5.Matrix?(a00=a.mat4[0],a01=a.mat4[1],a02=a.mat4[2],a03=a.mat4[3],a10=a.mat4[4],a11=a.mat4[5],a12=a.mat4[6],a13=a.mat4[7],a20=a.mat4[8],a21=a.mat4[9],a22=a.mat4[10],a23=a.mat4[11],a30=a.mat4[12],a31=a.mat4[13],a32=a.mat4[14],a33=a.mat4[15]):a instanceof GLMAT_ARRAY_TYPE&&(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15]);var b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,this.mat4[0]=(a11*b11-a12*b10+a13*b09)*det,this.mat4[1]=(a02*b10-a01*b11-a03*b09)*det,this.mat4[2]=(a31*b05-a32*b04+a33*b03)*det,this.mat4[3]=(a22*b04-a21*b05-a23*b03)*det,this.mat4[4]=(a12*b08-a10*b11-a13*b07)*det,this.mat4[5]=(a00*b11-a02*b08+a03*b07)*det,this.mat4[6]=(a32*b02-a30*b05-a33*b01)*det,this.mat4[7]=(a20*b05-a22*b02+a23*b01)*det,this.mat4[8]=(a10*b10-a11*b08+a13*b06)*det,this.mat4[9]=(a01*b08-a00*b10-a03*b06)*det,this.mat4[10]=(a30*b04-a31*b02+a33*b00)*det,this.mat4[11]=(a21*b02-a20*b04-a23*b00)*det,this.mat4[12]=(a11*b07-a10*b09-a12*b06)*det,this.mat4[13]=(a00*b09-a01*b07+a02*b06)*det,this.mat4[14]=(a31*b01-a30*b03-a32*b00)*det,this.mat4[15]=(a20*b03-a21*b01+a22*b00)*det,this):null},p5.Matrix.prototype.invert3x3=function(){var a00=this.mat3[0],a01=this.mat3[1],a02=this.mat3[2],a10=this.mat3[3],a11=this.mat3[4],a12=this.mat3[5],a20=this.mat3[6],a21=this.mat3[7],a22=this.mat3[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;return det?(det=1/det,this.mat3[0]=b01*det,this.mat3[1]=(-a22*a01+a02*a21)*det,this.mat3[2]=(a12*a01-a02*a11)*det,this.mat3[3]=b11*det,this.mat3[4]=(a22*a00-a02*a20)*det,this.mat3[5]=(-a12*a00+a02*a10)*det,this.mat3[6]=b21*det,this.mat3[7]=(-a21*a00+a01*a20)*det,this.mat3[8]=(a11*a00-a01*a10)*det,this):null},p5.Matrix.prototype.transpose3x3=function(mat3){var a01=mat3[1],a02=mat3[2],a12=mat3[5];return this.mat3[1]=mat3[3],this.mat3[2]=mat3[6],this.mat3[3]=a01,this.mat3[5]=mat3[7],this.mat3[6]=a02,this.mat3[7]=a12,this},p5.Matrix.prototype.inverseTranspose=function(matrix){return void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=matrix.mat4[0],this.mat3[1]=matrix.mat4[1],this.mat3[2]=matrix.mat4[2],this.mat3[3]=matrix.mat4[4],this.mat3[4]=matrix.mat4[5],this.mat3[5]=matrix.mat4[6],this.mat3[6]=matrix.mat4[8],this.mat3[7]=matrix.mat4[9],this.mat3[8]=matrix.mat4[10]),this.invert3x3().transpose3x3(this.mat3),this},p5.Matrix.prototype.determinant=function(){var d00=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],d01=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],d02=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],d03=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],d04=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],d05=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],d06=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],d07=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],d08=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],d09=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],d10=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],d11=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return d00*d11-d01*d10+d02*d09+d03*d08-d04*d07+d05*d06},p5.Matrix.prototype.mult=function(multMatrix){var _dest=new GLMAT_ARRAY_TYPE(16),_src=new GLMAT_ARRAY_TYPE(16);multMatrix instanceof p5.Matrix?_src=multMatrix.mat4:multMatrix instanceof GLMAT_ARRAY_TYPE&&(_src=multMatrix);var b0=this.mat4[0],b1=this.mat4[1],b2=this.mat4[2],b3=this.mat4[3];return _dest[0]=b0*_src[0]+b1*_src[4]+b2*_src[8]+b3*_src[12],_dest[1]=b0*_src[1]+b1*_src[5]+b2*_src[9]+b3*_src[13],_dest[2]=b0*_src[2]+b1*_src[6]+b2*_src[10]+b3*_src[14],_dest[3]=b0*_src[3]+b1*_src[7]+b2*_src[11]+b3*_src[15],b0=this.mat4[4],b1=this.mat4[5],b2=this.mat4[6],b3=this.mat4[7],_dest[4]=b0*_src[0]+b1*_src[4]+b2*_src[8]+b3*_src[12],_dest[5]=b0*_src[1]+b1*_src[5]+b2*_src[9]+b3*_src[13],_dest[6]=b0*_src[2]+b1*_src[6]+b2*_src[10]+b3*_src[14],_dest[7]=b0*_src[3]+b1*_src[7]+b2*_src[11]+b3*_src[15],b0=this.mat4[8],b1=this.mat4[9],b2=this.mat4[10],b3=this.mat4[11],_dest[8]=b0*_src[0]+b1*_src[4]+b2*_src[8]+b3*_src[12],_dest[9]=b0*_src[1]+b1*_src[5]+b2*_src[9]+b3*_src[13],_dest[10]=b0*_src[2]+b1*_src[6]+b2*_src[10]+b3*_src[14],_dest[11]=b0*_src[3]+b1*_src[7]+b2*_src[11]+b3*_src[15],b0=this.mat4[12],b1=this.mat4[13],b2=this.mat4[14],b3=this.mat4[15],_dest[12]=b0*_src[0]+b1*_src[4]+b2*_src[8]+b3*_src[12],_dest[13]=b0*_src[1]+b1*_src[5]+b2*_src[9]+b3*_src[13],_dest[14]=b0*_src[2]+b1*_src[6]+b2*_src[10]+b3*_src[14],_dest[15]=b0*_src[3]+b1*_src[7]+b2*_src[11]+b3*_src[15],this.mat4=_dest,this},p5.Matrix.prototype.scale=function(){for(var x,y,z,args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];args[0]instanceof p5.Vector?(x=args[0].x,y=args[0].y,z=args[0].z):args[0]instanceof Array&&(x=args[0][0],y=args[0][1],z=args[0][2]);var _dest=new GLMAT_ARRAY_TYPE(16);return _dest[0]=this.mat4[0]*x,_dest[1]=this.mat4[1]*x,_dest[2]=this.mat4[2]*x,_dest[3]=this.mat4[3]*x,_dest[4]=this.mat4[4]*y,_dest[5]=this.mat4[5]*y,_dest[6]=this.mat4[6]*y,_dest[7]=this.mat4[7]*y,_dest[8]=this.mat4[8]*z,_dest[9]=this.mat4[9]*z,_dest[10]=this.mat4[10]*z,_dest[11]=this.mat4[11]*z,_dest[12]=this.mat4[12],_dest[13]=this.mat4[13],_dest[14]=this.mat4[14],_dest[15]=this.mat4[15],this.mat4=_dest,this},p5.Matrix.prototype.rotate=function(a,axis){var x,y,z,_a,len;this.p5?this.p5._angleMode===constants.DEGREES&&(_a=polarGeometry.degreesToRadians(a)):_a=a,axis instanceof p5.Vector?(x=axis.x,y=axis.y,z=axis.z):axis instanceof Array&&(x=axis[0],y=axis[1],z=axis[2]),len=Math.sqrt(x*x+y*y+z*z),x*=1/len,y*=1/len,z*=1/len;var a00=this.mat4[0],a01=this.mat4[1],a02=this.mat4[2],a03=this.mat4[3],a10=this.mat4[4],a11=this.mat4[5],a12=this.mat4[6],a13=this.mat4[7],a20=this.mat4[8],a21=this.mat4[9],a22=this.mat4[10],a23=this.mat4[11],sA=Math.sin(_a),cA=Math.cos(_a),tA=1-cA,b00=x*x*tA+cA,b01=y*x*tA+z*sA,b02=z*x*tA-y*sA,b10=x*y*tA-z*sA,b11=y*y*tA+cA,b12=z*y*tA+x*sA,b20=x*z*tA+y*sA,b21=y*z*tA-x*sA,b22=z*z*tA+cA;return this.mat4[0]=a00*b00+a10*b01+a20*b02,this.mat4[1]=a01*b00+a11*b01+a21*b02,this.mat4[2]=a02*b00+a12*b01+a22*b02,this.mat4[3]=a03*b00+a13*b01+a23*b02,this.mat4[4]=a00*b10+a10*b11+a20*b12,this.mat4[5]=a01*b10+a11*b11+a21*b12,this.mat4[6]=a02*b10+a12*b11+a22*b12,this.mat4[7]=a03*b10+a13*b11+a23*b12,this.mat4[8]=a00*b20+a10*b21+a20*b22,this.mat4[9]=a01*b20+a11*b21+a21*b22,this.mat4[10]=a02*b20+a12*b21+a22*b22,this.mat4[11]=a03*b20+a13*b21+a23*b22,this},p5.Matrix.prototype.translate=function(v){var x=v[0],y=v[1],z=v[2]||0;this.mat4[12]=this.mat4[0]*x+this.mat4[4]*y+this.mat4[8]*z+this.mat4[12],this.mat4[13]=this.mat4[1]*x+this.mat4[5]*y+this.mat4[9]*z+this.mat4[13],this.mat4[14]=this.mat4[2]*x+this.mat4[6]*y+this.mat4[10]*z+this.mat4[14],this.mat4[15]=this.mat4[3]*x+this.mat4[7]*y+this.mat4[11]*z+this.mat4[15]},p5.Matrix.prototype.rotateX=function(a){this.rotate(a,[1,0,0])},p5.Matrix.prototype.rotateY=function(a){this.rotate(a,[0,1,0])},p5.Matrix.prototype.rotateZ=function(a){this.rotate(a,[0,0,1])},p5.Matrix.prototype.perspective=function(fovy,aspect,near,far){var f=1/Math.tan(fovy/2),nf=1/(near-far);return this.mat4[0]=f/aspect,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=f,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(far+near)*nf,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*far*near*nf,this.mat4[15]=0,this},p5.Matrix.prototype.ortho=function(left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return this.mat4[0]=-2*lr,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*bt,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*nf,this.mat4[11]=0,this.mat4[12]=(left+right)*lr,this.mat4[13]=(top+bottom)*bt,this.mat4[14]=(far+near)*nf,this.mat4[15]=1,this},module.exports=p5.Matrix},{"../core/constants":36,"../core/core":37,"../math/polargeometry":67}],84:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),constants=_dereq_("../core/constants");p5.RendererGL.prototype.beginShape=function(mode){return this.immediateMode.shapeMode=void 0!==mode?mode:constants.LINE_STRIP,void 0===this.immediateMode.vertexPositions?(this.immediateMode.vertexPositions=[],this.immediateMode.vertexColors=[],this.immediateMode.vertexBuffer=this.GL.createBuffer(),this.immediateMode.colorBuffer=this.GL.createBuffer()):(this.immediateMode.vertexPositions.length=0,this.immediateMode.vertexColors.length=0),this.isImmediateDrawing=!0,this},p5.RendererGL.prototype.vertex=function(x,y,z){this.immediateMode.vertexPositions.push(x,y,z);var vertexColor=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.vertexColors.push(vertexColor[0],vertexColor[1],vertexColor[2],vertexColor[3]),this},p5.RendererGL.prototype.endShape=function(mode){var gl=this.GL;if(this._bindImmediateBuffers(this.immediateMode.vertexPositions,this.immediateMode.vertexColors),mode)if("fill"===this.drawMode)switch(this.immediateMode.shapeMode){case constants.LINE_STRIP:this.immediateMode.shapeMode=constants.TRIANGLE_FAN;break;case constants.LINES:this.immediateMode.shapeMode=constants.TRIANGLE_FAN;break;case constants.TRIANGLES:this.immediateMode.shapeMode=constants.TRIANGLE_FAN}else switch(this.immediateMode.shapeMode){case constants.LINE_STRIP:this.immediateMode.shapeMode=constants.LINE_LOOP;break;case constants.LINES:this.immediateMode.shapeMode=constants.LINE_LOOP}if(this.immediateMode.shapeMode===constants.QUADS||this.immediateMode.shapeMode===constants.QUAD_STRIP)throw new Error("sorry, "+this.immediateMode.shapeMode+" not yet implemented in webgl mode.");return gl.enable(gl.BLEND),gl.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.vertexPositions.length/3),this.immediateMode.vertexPositions.length=0,this.immediateMode.vertexColors.length=0,this.isImmediateDrawing=!1,this},p5.RendererGL.prototype._bindImmediateBuffers=function(vertices,colors){this._setDefaultCamera();var gl=this.GL,shaderKey=this._getCurShaderId(),shaderProgram=this.mHash[shaderKey];return shaderProgram.vertexPositionAttribute=gl.getAttribLocation(shaderProgram,"aPosition"),gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute),gl.bindBuffer(gl.ARRAY_BUFFER,this.immediateMode.vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.DYNAMIC_DRAW),gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,3,gl.FLOAT,!1,0,0),shaderProgram.vertexColorAttribute=gl.getAttribLocation(shaderProgram,"aVertexColor"),gl.enableVertexAttribArray(shaderProgram.vertexColorAttribute),gl.bindBuffer(gl.ARRAY_BUFFER,this.immediateMode.colorBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(colors),gl.DYNAMIC_DRAW),gl.vertexAttribPointer(shaderProgram.vertexColorAttribute,4,gl.FLOAT,!1,0,0),this._setMatrixUniforms(shaderKey),this},p5.RendererGL.prototype._getColorVertexShader=function(){var shaderProgram,gl=this.GL,mId="immediateVert|vertexColorFrag";return this.materialInHash(mId)?shaderProgram=this.mHash[mId]:(shaderProgram=this._initShaders("immediateVert","vertexColorFrag",!0),this.mHash[mId]=shaderProgram,shaderProgram.vertexColorAttribute=gl.getAttribLocation(shaderProgram,"aVertexColor"),gl.enableVertexAttribArray(shaderProgram.vertexColorAttribute)),shaderProgram},module.exports=p5.RendererGL},{"../core/constants":36,"../core/core":37}],85:[function(_dereq_,module){"use strict";function flatten(arr){return arr.length>0?arr.reduce(function(a,b){return a.concat(b)}):[]}function vToNArray(arr){return flatten(arr.map(function(item){return[item.x,item.y,item.z]}))}var p5=_dereq_("../core/core"),hashCount=0;p5.RendererGL.prototype._initBufferDefaults=function(gId){if(hashCount++,hashCount>1e3){var key=Object.keys(this.gHash)[0];delete this.gHash[key],hashCount--}var gl=this.GL;this.gHash[gId]={},this.gHash[gId].vertexBuffer=gl.createBuffer(),this.gHash[gId].normalBuffer=gl.createBuffer(),this.gHash[gId].uvBuffer=gl.createBuffer(),this.gHash[gId].indexBuffer=gl.createBuffer()},p5.RendererGL.prototype.createBuffers=function(gId,obj){var gl=this.GL;this._setDefaultCamera(),this._initBufferDefaults(gId);var shaderProgram=this.mHash[this._getCurShaderId()];this.gHash[gId].numberOfItems=3*obj.faces.length,gl.bindBuffer(gl.ARRAY_BUFFER,this.gHash[gId].vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vToNArray(obj.vertices)),gl.STATIC_DRAW),shaderProgram.vertexPositionAttribute=gl.getAttribLocation(shaderProgram,"aPosition"),gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute),gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.gHash[gId].normalBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vToNArray(obj.vertexNormals)),gl.STATIC_DRAW),shaderProgram.vertexNormalAttribute=gl.getAttribLocation(shaderProgram,"aNormal"),gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute),gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute,3,gl.FLOAT,!1,0,0),
gl.bindBuffer(gl.ARRAY_BUFFER,this.gHash[gId].uvBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(flatten(obj.uvs)),gl.STATIC_DRAW),shaderProgram.textureCoordAttribute=gl.getAttribLocation(shaderProgram,"aTexCoord"),gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute),gl.vertexAttribPointer(shaderProgram.textureCoordAttribute,2,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.gHash[gId].indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(flatten(obj.faces)),gl.STATIC_DRAW)},p5.RendererGL.prototype.drawBuffers=function(gId){this._setDefaultCamera();var gl=this.GL,shaderKey=this._getCurShaderId(),shaderProgram=this.mHash[shaderKey];return gl.bindBuffer(gl.ARRAY_BUFFER,this.gHash[gId].vertexBuffer),gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.gHash[gId].normalBuffer),gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.gHash[gId].uvBuffer),gl.vertexAttribPointer(shaderProgram.textureCoordAttribute,2,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.gHash[gId].indexBuffer),this._setMatrixUniforms(shaderKey),gl.drawElements(gl.TRIANGLES,this.gHash[gId].numberOfItems,gl.UNSIGNED_SHORT,0),this},module.exports=p5.RendererGL},{"../core/core":37}],86:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core"),shader=_dereq_("./shader");_dereq_("../core/p5.Renderer"),_dereq_("./p5.Matrix");var uMVMatrixStack=[],attributes={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};p5.RendererGL=function(elt,pInst,isMainCanvas){return p5.Renderer.call(this,elt,pInst,isMainCanvas),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this._curCamera=null,this.uMVMatrix=new p5.Matrix,this.uPMatrix=new p5.Matrix,this.uNMatrix=new p5.Matrix("mat3"),this.gHash={},this.mHash={},this.isImmediateDrawing=!1,this.immediateMode={},this.curFillColor=[.5,.5,.5,1],this.curStrokeColor=[.5,.5,.5,1],this.pointSize=5,this},p5.RendererGL.prototype=Object.create(p5.Renderer.prototype),p5.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",attributes)||this.canvas.getContext("experimental-webgl",attributes),null===this.drawingContext)throw new Error("Error creating webgl context");console.log("p5.RendererGL: enabled webgl context");var gl=this.drawingContext;gl.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL),gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight)}catch(er){throw new Error(er)}},p5.RendererGL.prototype._setDefaultCamera=function(){if(null===this._curCamera){var _w=this.width,_h=this.height;this.uPMatrix=p5.Matrix.identity();var cameraZ=this.height/2/Math.tan(30*Math.PI/180);this.uPMatrix.perspective(60/180*Math.PI,_w/_h,.1*cameraZ,10*cameraZ),this._curCamera="default"}},p5.RendererGL.prototype._update=function(){this.uMVMatrix=p5.Matrix.identity(),this.translate(0,0,-(this.height/2)/Math.tan(30*Math.PI/180)),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},p5.RendererGL.prototype.background=function(){var gl=this.GL,_col=this._pInst.color.apply(this._pInst,arguments),_r=_col.levels[0]/255,_g=_col.levels[1]/255,_b=_col.levels[2]/255,_a=_col.levels[3]/255;gl.clearColor(_r,_g,_b,_a),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)},p5.RendererGL.prototype._initShaders=function(vertId,fragId,isImmediateMode){var gl=this.GL,_vertShader=gl.createShader(gl.VERTEX_SHADER);if(gl.shaderSource(_vertShader,shader[vertId]),gl.compileShader(_vertShader),!gl.getShaderParameter(_vertShader,gl.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+gl.getShaderInfoLog(_vertShader)),null;var _fragShader=gl.createShader(gl.FRAGMENT_SHADER);if(gl.shaderSource(_fragShader,shader[fragId]),gl.compileShader(_fragShader),!gl.getShaderParameter(_fragShader,gl.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+gl.getShaderInfoLog(_fragShader)),null;var shaderProgram=gl.createProgram();return gl.attachShader(shaderProgram,_vertShader),gl.attachShader(shaderProgram,_fragShader),gl.linkProgram(shaderProgram),gl.getProgramParameter(shaderProgram,gl.LINK_STATUS)||alert("Snap! Error linking shader program"),this._getLocation(shaderProgram,isImmediateMode),shaderProgram},p5.RendererGL.prototype._getLocation=function(shaderProgram,isImmediateMode){var gl=this.GL;gl.useProgram(shaderProgram),shaderProgram.uPMatrixUniform=gl.getUniformLocation(shaderProgram,"uProjectionMatrix"),shaderProgram.uMVMatrixUniform=gl.getUniformLocation(shaderProgram,"uModelViewMatrix"),void 0===isImmediateMode&&(shaderProgram.uNMatrixUniform=gl.getUniformLocation(shaderProgram,"uNormalMatrix"),shaderProgram.samplerUniform=gl.getUniformLocation(shaderProgram,"uSampler"))},p5.RendererGL.prototype._setUniform1f=function(shaderKey,uniform,data){var gl=this.GL,shaderProgram=this.mHash[shaderKey];return gl.useProgram(shaderProgram),shaderProgram[uniform]=gl.getUniformLocation(shaderProgram,uniform),gl.uniform1f(shaderProgram[uniform],data),this},p5.RendererGL.prototype._setMatrixUniforms=function(shaderKey){var gl=this.GL,shaderProgram=this.mHash[shaderKey];gl.useProgram(shaderProgram),gl.uniformMatrix4fv(shaderProgram.uPMatrixUniform,!1,this.uPMatrix.mat4),gl.uniformMatrix4fv(shaderProgram.uMVMatrixUniform,!1,this.uMVMatrix.mat4),this.uNMatrix.inverseTranspose(this.uMVMatrix),gl.uniformMatrix3fv(shaderProgram.uNMatrixUniform,!1,this.uNMatrix.mat3)},p5.RendererGL.prototype._getShader=function(vertId,fragId,isImmediateMode){var mId=vertId+"|"+fragId;if(!this.materialInHash(mId)){var shaderProgram=this._initShaders(vertId,fragId,isImmediateMode);this.mHash[mId]=shaderProgram}return this.curShaderId=mId,this.mHash[this.curShaderId]},p5.RendererGL.prototype._getCurShaderId=function(){var mId,shaderProgram;return"fill"!==this.drawMode&&void 0===this.curShaderId?(mId="normalVert|normalFrag",shaderProgram=this._initShaders("normalVert","normalFrag"),this.mHash[mId]=shaderProgram,this.curShaderId=mId):this.isImmediateDrawing&&"fill"===this.drawMode&&(mId="immediateVert|vertexColorFrag",shaderProgram=this._initShaders("immediateVert","vertexColorFrag"),this.mHash[mId]=shaderProgram,this.curShaderId=mId),this.curShaderId},p5.RendererGL.prototype.fill=function(){var shaderProgram,gl=this.GL,colors=this._applyColorBlend.apply(this,arguments);return this.curFillColor=colors,this.drawMode="fill",this.isImmediateDrawing?(shaderProgram=this._getShader("immediateVert","vertexColorFrag"),gl.useProgram(shaderProgram)):(shaderProgram=this._getShader("normalVert","basicFrag"),gl.useProgram(shaderProgram),shaderProgram.uMaterialColor=gl.getUniformLocation(shaderProgram,"uMaterialColor"),gl.uniform4f(shaderProgram.uMaterialColor,colors[0],colors[1],colors[2],colors[3])),this},p5.RendererGL.prototype.stroke=function(){var color=this._pInst.color.apply(this._pInst,arguments),colorNormalized=color._array;return this.curStrokeColor=colorNormalized,this.drawMode="stroke",this},p5.RendererGL.prototype._strokeCheck=function(){if("stroke"===this.drawMode)throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(")},p5.RendererGL.prototype.strokeWeight=function(pointSize){return this.pointSize=pointSize,this},p5.RendererGL.prototype.geometryInHash=function(gId){return void 0!==this.gHash[gId]},p5.RendererGL.prototype.materialInHash=function(mId){return void 0!==this.mHash[mId]},p5.RendererGL.prototype.resize=function(w,h){var gl=this.GL;p5.Renderer.prototype.resize.call(this,w,h),gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),"default"===this._curCamera&&(this._curCamera=null,this._setDefaultCamera())},p5.RendererGL.prototype.clear=function(){var gl=this.GL;gl.clearColor(arguments[0],arguments[1],arguments[2],arguments[3]),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)},p5.RendererGL.prototype.translate=function(x,y,z){return this.uMVMatrix.translate([x,-y,z]),this},p5.RendererGL.prototype.scale=function(x,y,z){return this.uMVMatrix.scale([x,y,z]),this},p5.RendererGL.prototype.rotate=function(rad,axis){return this.uMVMatrix.rotate(rad,axis),this},p5.RendererGL.prototype.rotateX=function(rad){return this.rotate(rad,[1,0,0]),this},p5.RendererGL.prototype.rotateY=function(rad){return this.rotate(rad,[0,1,0]),this},p5.RendererGL.prototype.rotateZ=function(rad){return this.rotate(rad,[0,0,1]),this},p5.RendererGL.prototype.push=function(){uMVMatrixStack.push(this.uMVMatrix.copy())},p5.RendererGL.prototype.pop=function(){if(0===uMVMatrixStack.length)throw new Error("Invalid popMatrix!");this.uMVMatrix=uMVMatrixStack.pop()},p5.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=p5.Matrix.identity(),this.translate(0,0,-800),this},p5.RendererGL.prototype._applyTextProperties=function(){console.error("text commands not yet implemented in webgl")},module.exports=p5.RendererGL},{"../core/core":37,"../core/p5.Renderer":43,"./p5.Matrix":83,"./shader":88}],87:[function(_dereq_,module){"use strict";var p5=_dereq_("../core/core");_dereq_("./p5.Geometry"),p5.prototype.plane=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var width=args[0]||50,height=args[1]||width,detailX="number"==typeof args[2]?args[2]:1,detailY="number"==typeof args[3]?args[3]:1,gId="plane|"+width+"|"+height+"|"+detailX+"|"+detailY;if(!this._renderer.geometryInHash(gId)){var _plane=function(){for(var u,v,p,i=0;i<=this.detailY;i++){v=i/this.detailY;for(var j=0;j<=this.detailX;j++)u=j/this.detailX,p=new p5.Vector(width*u-width/2,height*v-height/2,0),this.vertices.push(p),this.uvs.push([u,v])}},planeGeom=new p5.Geometry(detailX,detailY,_plane);planeGeom.computeFaces().computeNormals(),this._renderer.createBuffers(gId,planeGeom)}this._renderer.drawBuffers(gId)},p5.prototype.box=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var width=args[0]||50,height=args[1]||width,depth=args[2]||width,detailX="number"==typeof args[3]?args[3]:4,detailY="number"==typeof args[4]?args[4]:4,gId="box|"+width+"|"+height+"|"+depth+"|"+detailX+"|"+detailY;if(!this._renderer.geometryInHash(gId)){var _box=function(){for(var cubeIndices=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]],id=0,i=0;i<cubeIndices.length;i++){for(var cubeIndex=cubeIndices[i],v=4*i,j=0;4>j;j++){var d=cubeIndex[j],octant=new p5.Vector((2*(1&d)-1)*width/2,((2&d)-1)*height/2,((4&d)/2-1)*depth/2);this.vertices.push(octant),this.uvs.push([1&j,(2&j)/2]),id++}this.faces.push([v,v+1,v+2]),this.faces.push([v+2,v+1,v+3])}},boxGeom=new p5.Geometry(detailX,detailY,_box);boxGeom.computeNormals(),this._renderer.createBuffers(gId,boxGeom)}return this._renderer.drawBuffers(gId),this},p5.prototype.sphere=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var radius=args[0]||50,detailX="number"==typeof args[1]?args[1]:24,detailY="number"==typeof args[2]?args[2]:16,gId="sphere|"+radius+"|"+detailX+"|"+detailY;if(!this._renderer.geometryInHash(gId)){var _sphere=function(){for(var u,v,p,i=0;i<=this.detailY;i++){v=i/this.detailY;for(var j=0;j<=this.detailX;j++){u=j/this.detailX;var theta=2*Math.PI*u,phi=Math.PI*v-Math.PI/2;p=new p5.Vector(radius*Math.cos(phi)*Math.sin(theta),radius*Math.sin(phi),radius*Math.cos(phi)*Math.cos(theta)),this.vertices.push(p),this.uvs.push([u,v])}}},sphereGeom=new p5.Geometry(detailX,detailY,_sphere);sphereGeom.computeFaces().computeNormals().averageNormals().averagePoleNormals(),this._renderer.createBuffers(gId,sphereGeom)}return this._renderer.drawBuffers(gId),this};var _truncatedCone=function(bottomRadius,topRadius,height,detailX,detailY,topCap,bottomCap){detailX=3>detailX?3:detailX,detailY=1>detailY?1:detailY,topCap=void 0===topCap?!0:topCap,bottomCap=void 0===bottomCap?!0:bottomCap;var yy,ii,extra=(topCap?2:0)+(bottomCap?2:0),vertsAroundEdge=detailX+1,slant=Math.atan2(bottomRadius-topRadius,height),start=topCap?-2:0,end=detailY+(bottomCap?2:0);for(yy=start;end>=yy;++yy){var ringRadius,v=yy/detailY,y=height*v;for(0>yy?(y=0,v=1,ringRadius=bottomRadius):yy>detailY?(y=height,v=1,ringRadius=topRadius):ringRadius=bottomRadius+(topRadius-bottomRadius)*(yy/detailY),(-2===yy||yy===detailY+2)&&(ringRadius=0,v=0),y-=height/2,ii=0;vertsAroundEdge>ii;++ii)this.vertices.push(new p5.Vector(Math.sin(ii*Math.PI*2/detailX)*ringRadius,y,Math.cos(ii*Math.PI*2/detailX)*ringRadius)),this.vertexNormals.push(new p5.Vector(0>yy||yy>detailY?0:Math.sin(ii*Math.PI*2/detailX)*Math.cos(slant),0>yy?-1:yy>detailY?1:Math.sin(slant),0>yy||yy>detailY?0:Math.cos(ii*Math.PI*2/detailX)*Math.cos(slant))),this.uvs.push([ii/detailX,v])}for(yy=0;detailY+extra>yy;++yy)for(ii=0;detailX>ii;++ii)this.faces.push([vertsAroundEdge*(yy+0)+0+ii,vertsAroundEdge*(yy+0)+1+ii,vertsAroundEdge*(yy+1)+1+ii]),this.faces.push([vertsAroundEdge*(yy+0)+0+ii,vertsAroundEdge*(yy+1)+1+ii,vertsAroundEdge*(yy+1)+0+ii])};p5.prototype.cylinder=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var radius=args[0]||50,height=args[1]||radius,detailX="number"==typeof args[2]?args[2]:24,detailY="number"==typeof args[3]?args[3]:16,gId="cylinder|"+radius+"|"+height+"|"+detailX+"|"+detailY;if(!this._renderer.geometryInHash(gId)){var cylinderGeom=new p5.Geometry(detailX,detailY);_truncatedCone.call(cylinderGeom,radius,radius,height,detailX,detailY,!0,!0),cylinderGeom.computeNormals(),this._renderer.createBuffers(gId,cylinderGeom)}return this._renderer.drawBuffers(gId),this},p5.prototype.cone=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var baseRadius=args[0]||50,height=args[1]||baseRadius,detailX="number"==typeof args[2]?args[2]:24,detailY="number"==typeof args[3]?args[3]:16,gId="cone|"+baseRadius+"|"+height+"|"+detailX+"|"+detailY;if(!this._renderer.geometryInHash(gId)){var coneGeom=new p5.Geometry(detailX,detailY);_truncatedCone.call(coneGeom,baseRadius,0,height,detailX,detailY,!0,!0),coneGeom.computeNormals(),this._renderer.createBuffers(gId,coneGeom)}return this._renderer.drawBuffers(gId),this},p5.prototype.ellipsoid=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var detailX="number"==typeof args[3]?args[3]:24,detailY="number"==typeof args[4]?args[4]:24,radiusX=args[0]||50,radiusY=args[1]||radiusX,radiusZ=args[2]||radiusX,gId="ellipsoid|"+radiusX+"|"+radiusY+"|"+radiusZ+"|"+detailX+"|"+detailY;if(!this._renderer.geometryInHash(gId)){var _ellipsoid=function(){for(var u,v,p,i=0;i<=this.detailY;i++){v=i/this.detailY;for(var j=0;j<=this.detailX;j++){u=j/this.detailX;var theta=2*Math.PI*u,phi=Math.PI*v-Math.PI/2;p=new p5.Vector(radiusX*Math.cos(phi)*Math.sin(theta),radiusY*Math.sin(phi),radiusZ*Math.cos(phi)*Math.cos(theta)),this.vertices.push(p),this.uvs.push([u,v])}}},ellipsoidGeom=new p5.Geometry(detailX,detailY,_ellipsoid);ellipsoidGeom.computeFaces().computeNormals(),this._renderer.createBuffers(gId,ellipsoidGeom)}return this._renderer.drawBuffers(gId),this},p5.prototype.torus=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var detailX="number"==typeof args[2]?args[2]:24,detailY="number"==typeof args[3]?args[3]:16,radius=args[0]||50,tubeRadius=args[1]||10,gId="torus|"+radius+"|"+tubeRadius+"|"+detailX+"|"+detailY;if(!this._renderer.geometryInHash(gId)){var _torus=function(){for(var u,v,p,i=0;i<=this.detailY;i++){v=i/this.detailY;for(var j=0;j<=this.detailX;j++){u=j/this.detailX;var theta=2*Math.PI*u,phi=2*Math.PI*v;p=new p5.Vector((radius+tubeRadius*Math.cos(phi))*Math.cos(theta),(radius+tubeRadius*Math.cos(phi))*Math.sin(theta),tubeRadius*Math.sin(phi)),this.vertices.push(p),this.uvs.push([u,v])}}},torusGeom=new p5.Geometry(detailX,detailY,_torus);torusGeom.computeFaces().computeNormals().averageNormals(),this._renderer.createBuffers(gId,torusGeom)}return this._renderer.drawBuffers(gId),this},p5.RendererGL.prototype.point=function(){return console.log("point not yet implemented in webgl"),this},p5.RendererGL.prototype.triangle=function(args){var x1=args[0],y1=args[1],x2=args[2],y2=args[3],x3=args[4],y3=args[5],gId="tri|"+x1+"|"+y1+"|"+x2+"|"+y2+"|"+x3+"|"+y3;if(!this.geometryInHash(gId)){var _triangle=function(){var vertices=[];vertices.push(new p5.Vector(x1,y1,0)),vertices.push(new p5.Vector(x2,y2,0)),vertices.push(new p5.Vector(x3,y3,0)),this.vertices=vertices,this.faces=[[0,1,2]],this.uvs=[[0,0],[0,1],[1,1]]},triGeom=new p5.Geometry(1,1,_triangle);triGeom.computeNormals(),this.createBuffers(gId,triGeom)}return this.drawBuffers(gId),this},p5.RendererGL.prototype.ellipse=function(args){var x=args[0],y=args[1],width=args[2],height=args[3],detailX=args[4]||24,detailY=args[5]||16,gId="ellipse|"+args[0]+"|"+args[1]+"|"+args[2]+"|"+args[3];if(!this.geometryInHash(gId)){var _ellipse=function(){for(var u,v,p,centerX=x+.5*width,centerY=y+.5*height,i=0;i<=this.detailY;i++){v=i/this.detailY;for(var j=0;j<=this.detailX;j++){u=j/this.detailX;var theta=2*Math.PI*u;if(0===v)p=new p5.Vector(centerX,centerY,0);else{var _x=centerX+.5*width*Math.cos(theta),_y=centerY+.5*height*Math.sin(theta);p=new p5.Vector(_x,_y,0)}this.vertices.push(p),this.uvs.push([u,v])}}},ellipseGeom=new p5.Geometry(detailX,detailY,_ellipse);ellipseGeom.computeFaces().computeNormals(),this.createBuffers(gId,ellipseGeom)}return this.drawBuffers(gId),this},p5.RendererGL.prototype.rect=function(args){var gId="rect|"+args[0]+"|"+args[1]+"|"+args[2]+"|"+args[3],x=args[0],y=args[1],width=args[2],height=args[3],detailX=args[4]||24,detailY=args[5]||16;if(!this.geometryInHash(gId)){var _rect=function(){for(var u,v,p,i=0;i<=this.detailY;i++){v=i/this.detailY;for(var j=0;j<=this.detailX;j++)u=j/this.detailX,p=new p5.Vector(x+width*u,y+height*v,0),this.vertices.push(p),this.uvs.push([u,v])}},rectGeom=new p5.Geometry(detailX,detailY,_rect);rectGeom.computeFaces().computeNormals(),this.createBuffers(gId,rectGeom)}return this.drawBuffers(gId),this},p5.RendererGL.prototype.quad=function(){for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var x1=args[0],y1=args[1],x2=args[2],y2=args[3],x3=args[4],y3=args[5],x4=args[6],y4=args[7],gId="quad|"+x1+"|"+y1+"|"+x2+"|"+y2+"|"+x3+"|"+y3+"|"+x4+"|"+y4;if(!this.geometryInHash(gId)){var _quad=function(){this.vertices.push(new p5.Vector(x1,y1,0)),this.vertices.push(new p5.Vector(x2,y2,0)),this.vertices.push(new p5.Vector(x3,y3,0)),this.vertices.push(new p5.Vector(x4,y4,0)),this.uvs.push([0,0],[1,0],[1,1],[0,1])},quadGeom=new p5.Geometry(2,2,_quad);quadGeom.computeNormals(),quadGeom.faces=[[0,1,2],[2,3,0]],this.createBuffers(gId,quadGeom)}return this.drawBuffers(gId),this},p5.RendererGL.prototype.bezier=function(args){var bezierDetail=args[12]||20;this.beginShape();for(var coeff=[0,0,0,0],vertex=[0,0,0],i=0;bezierDetail>=i;i++)coeff[0]=Math.pow(1-i/bezierDetail,3),coeff[1]=3*(i/bezierDetail)*Math.pow(1-i/bezierDetail,2),coeff[2]=3*Math.pow(i/bezierDetail,2)*(1-i/bezierDetail),coeff[3]=Math.pow(i/bezierDetail,3),vertex[0]=args[0]*coeff[0]+args[3]*coeff[1]+args[6]*coeff[2]+args[9]*coeff[3],vertex[1]=args[1]*coeff[0]+args[4]*coeff[1]+args[7]*coeff[2]+args[10]*coeff[3],vertex[2]=args[2]*coeff[0]+args[5]*coeff[1]+args[8]*coeff[2]+args[11]*coeff[3],this.vertex(vertex[0],vertex[1],vertex[2]);return this.endShape(),this},p5.RendererGL.prototype.curve=function(args){var curveDetail=args[12];this.beginShape();for(var coeff=[0,0,0,0],vertex=[0,0,0],i=0;curveDetail>=i;i++)coeff[0]=.5*Math.pow(i/curveDetail,3),coeff[1]=.5*Math.pow(i/curveDetail,2),coeff[2]=i/curveDetail*.5,coeff[3]=.5,vertex[0]=coeff[0]*(-args[0]+3*args[3]-3*args[6]+args[9])+coeff[1]*(2*args[0]-5*args[3]+4*args[6]-args[9])+coeff[2]*(-args[0]+args[6])+2*coeff[3]*args[3],vertex[1]=coeff[0]*(-args[1]+3*args[4]-3*args[7]+args[10])+coeff[1]*(2*args[1]-5*args[4]+4*args[7]-args[10])+coeff[2]*(-args[1]+args[7])+2*coeff[3]*args[4],vertex[2]=coeff[0]*(-args[2]+3*args[5]-3*args[8]+args[11])+coeff[1]*(2*args[2]-5*args[5]+4*args[8]-args[11])+coeff[2]*(-args[2]+args[8])+2*coeff[3]*args[5],this.vertex(vertex[0],vertex[1],vertex[2]);return this.endShape(),this},module.exports=p5},{"../core/core":37,"./p5.Geometry":82}],88:[function(_dereq_,module){module.exports={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n\n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}\n",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a);\n    }\n  }\n}"}},{}]},{},[28])(28)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}{var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_p=require("p5"),_p2=_interopRequireDefault(_p),_lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash),Particle=function(){function Particle(position,velocity){_classCallCheck(this,Particle),this.position=position,this.velocity=velocity}return _createClass(Particle,[{key:"update",value:function(gravity){this.velocity.add(gravity),this.position.add(this.velocity)}},{key:"display",value:function(p){var to=this.position.copy().add(this.velocity);p.line(this.position.x,this.position.y,to.x,to.y).strokeWeight(2)}}]),Particle}(),Text=function(){function Text(position,text){_classCallCheck(this,Text),this.position=position,this.text=text,this.size=12}return _createClass(Text,[{key:"update",value:function(){this.size=this.size+5}},{key:"display",value:function(p,r,g,b,alpha){p.textSize(this.size).fill(r,g,b,alpha).strokeWeight(0),p.text(this.text,this.position.x-this.size/2,this.position.y+this.size/2)}}]),Text}(),Particles=function(){function Particles(p,pos,step,count,color,text){_classCallCheck(this,Particles),this.step=step,this.stepMax=step,this.particles=_lodash2["default"].times(count,function(){return new Particle(pos.copy(),_p.Vector.fromAngle(p.random(p.TAU)).mult(p.random(100)))}),this.text=new Text(pos.copy(),text),this.color=color}return _createClass(Particles,[{key:"update",value:function(gravity){return this.particles.forEach(function(p){return p.update(gravity)}),this.text.update(gravity),this.step--,this}},{key:"display",value:function(p){var r=p.red(this.color),g=p.green(this.color),b=p.blue(this.color),a=256*this.step/this.stepMax;p.push(),p.colorMode(p.BLEND),p.stroke(r,g,b,a),this.particles.forEach(function(pt){return pt.display(p)}),this.text.display(p,r,g,b,a),p.pop()}}]),Particles}(),createParticles=function(p,text){return new Particles(p,p.createVector(p.random(p.width-100)+50,p.random(p.height/2)+100),p.random(50,200),Math.floor(p.random(100,200)),p.color(p.random(255),p.random(255),p.random(255)),text)},update=function(particles,gravity){return particles.map(function(p){return p.update(gravity)}).filter(function(p){return p.step>0})},display=function(p,particles){p.push(),p.blendMode(p.ADD),particles.forEach(function(pt){return pt.display(p)}),p.pop()},sketch=function(p){var gravity=_p.Vector.fromAngle(p.HALF_PI).mult(.25),TEXT="おつかれたかし",particles=[],texts=TEXT.split("");p.setup=function(){p.createCanvas(p.windowWidth,p.windowHeight)},p.draw=function(){p.blendMode(p.BLEND),p.background(0),p.random(1)<.02&&(particles.push(createParticles(p,texts.shift())),0===texts.length&&(texts=TEXT.split(""))),particles=update(particles,gravity),display(p,particles)},p.windowResized=function(){p.resizeCanvas(p.windowWidth,p.windowHeight)}};new _p2["default"](sketch,document.body)}},{lodash:1,p5:2}]},{},[3]);